"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
* A simple jQuery Wrapper for Geolocation API
* Supports Deferreds
*
* @author: Manuel Bieh
* @url: http://www.manuel-bieh.de/
* @documentation: http://www.manuel-bieh.de/blog/geolocation-jquery-plugin
* @version 1.1.0
* @license MIT
*/
/*!
* A simple jQuery Wrapper for Geolocation API
* Supports Deferreds
*
* @author: Manuel Bieh
* @url: http://www.manuel-bieh.de/
* @documentation: http://www.manuel-bieh.de/blog/geolocation-jquery-plugin
* @version 1.1.0
* @license MIT
*/
!function(e){e.extend({geolocation:{watchIDs:[],get:function(t,i,a){var n={};return n="object"===(void 0===t?"undefined":_typeof(t))?e.geolocation.prepareOptions(t):e.geolocation.prepareOptions({success:t,error:i,options:a}),e.geolocation.getCurrentPosition(n.success,n.error,n.options)},getPosition:function(t){return e.geolocation.get.call(this,t)},getCurrentPosition:function(t,i,a){var n=e.Deferred();if(void 0===navigator.geolocation){var o={message:"No geolocation available"};return"function"==typeof i&&i(o),n.rejectWith(this,[o]),n.promise()}if("function"!=typeof t)return navigator.geolocation.getCurrentPosition(function(){n.resolveWith(this,arguments)},function(){n.rejectWith(this,arguments)},t||a),n.promise();navigator.geolocation.getCurrentPosition(t,i,a)},watch:function(t){return t=e.geolocation.prepareOptions(t),e.geolocation.watchPosition(t.success,t.error,t.options)},watchPosition:function(t,i,a){if(void 0!==navigator.geolocation)return watchID=navigator.geolocation.watchPosition(t,i,a),e.geolocation.watchIDs.push(watchID),watchID;i()},stop:function(e){void 0!==navigator.geolocation&&navigator.geolocation.clearWatch(e)},clearWatch:function(t){e.geolocation.stop(t)},stopAll:function(){e.each(jQuery.geolocation.watchIDs,function(t,i){e.geolocation.stop(i)})},clearAll:function(){e.geolocation.stopAll()},prepareOptions:function(e){return!1==!!(e=e||{}).options&&(e.options={highAccuracy:!1,maximumAge:3e4,timeout:6e4}),!1==!!e.win&&!1==!!e.done||(e.success=e.win||e.done),!1!=!!e.fail&&(e.error=e.fail),e}}})}(jQuery),function(e,t,i){var a=function(){},n={};a.prototype.Initialize=function(i,a){i&&(n.$searchInputField=t(i)),a&&(n.$searchLink=t(a)),n.$searchLink.on("click",function(i){e.Utility.CancelEvent(i),t.geolocation.get({win:n.getNearYouUrl,fail:n.handleNearYouError})})},n={$searchInputField:null,$searchLink:null,getNearYouUrl:function(i){i&&i.coords?t.ajax({url:e.Utility.AssembleUrl(["quicksearch","getnearyouurl"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({latitude:i.coords.latitude,longitude:i.coords.longitude})}).done(function(e){n.redirectToNearYouSearchResults(e)}).fail(function(t,i,a){var o="NRT.NearYouSearch.getNearYouUrl: Ajax Error";e.Event.Raise(e.Event.eError.ASYNC_ERROR,o,t,i,a),e.Utility.LogConsole(o+": "+t.toString()),n.redirectToNearYouSearchResults(t)}):n.showNearYouError("Oops! We couldn't locate you.")},handleNearYouError:function(e){var t="Oops! We couldn't locate you.";1===e.code&&(t+="  Please turn on Location Services."),n.showNearYouError(t)},redirectToNearYouSearchResults:function(e){e&&e.redirectToUrl&&e.redirectToUrl.length>0?i.location.href=e.redirectToUrl:n.showNearYouError("Oops! We didn't find any matching locations. Try again?")},showNearYouError:function(e){t(".error").removeClass("error"),n.$searchInputField.closest("form").parent().addClass("error"),t(".message").remove(),t(".search-input").parent().append('<span for="searchtext" class="message">'+e+"</span>")}},e.NearYouSearch=a}(window.NRT,jQuery,window),function(e,t,i){var a,n={};a={Initialize:function(){t("#lnkLookingElsewhere").on("click",n.openHandler),t("#lookingelsewhere-submit").on("click",n.submitHandler)}},n={selectedValue:function(){return t("#lookElsewhere").val()},openHandler:function(e){t("#mdlLookingElsewhere").lightbox_me({lightboxSpeed:500,overlaySpeed:300,appearEffect:"fadeIn",appearEase:"swing",centered:!0,closeEsc:!0,closeClick:!1,onLoad:function(){n.resetDDL()},onClose:function(){n.resetDDL()}}),e.preventDefault()},resetDDL:function(){t("#lookElsewhere").val("")},submitHandler:function(e){var t=n.selectedValue().trim();t.trim().length>0&&(i.location=i.location.origin+"/"+t+"/"),e.preventDefault()}},e.LookingElsewhere=a}(window.NRT,jQuery,window),function(e,t,i,a){var n={},o={};n={Initialize:function(){var i=t("#hdnLocationID").val(),a={locationID:i,locationLevel:t("#hdnLocationLevel").val()},n=this;void 0!==i&&i>0&&t.ajax({type:"GET",url:e.Utility.AssembleUrl(["tabset","tabsforhomepage"]),data:a}).done(function(e){t('[id$="home-property-tabs"]').html(e),o.findSelectedTab(),n.SetupViewMoreButton(),n.GetInitialTabSelected(),n.MobileSortChanged()})},InitializeHomePageTabs:function(){var e=t("div#home-property-tabs.property-tabs"),i=e.data("activeTab")||null;e&&e.length>0&&(i&&this.SetSelectedTab(i),o.findSelectedTab(),this.SetupHomePageViewMoreButton(),this.GetHomePageInitialTabSelected(),this.MobileSortChanged())},MobileSortChanged:function(){t("#sort-by-mobile").change(function(){o.selectedTab=t(this).find("option:selected").attr("id"),o.homeTab=t("#tabSet_"+o.selectedTab),o.homeTab.length&&o.homeTab.click()})},GetHomePageInitialTabSelected:function(){var i;t.tabset({header:"#home-property-tabs .tab-nav > li",content:"#home-property-tabs .tab-content-wrap > .tab-content",activeIndex:o.selectedIndex,after:function(a){o.homeTab=t("#home-property-tabs").find(".tab-nav").find("li").eq(a),o.homeTab.length&&(o.selectedTab=o.homeTab.find("a").attr("id"),i=o.selectedTab.indexOf("_")+1,o.selectedTab=o.selectedTab.substr(i,o.selectedTab.length),o.persistSelectedTab(o.selectedTab),t("#sort-by-mobile").val(o.selectedTab)),n.LoadActiveHomePageTab("#home-property-tabs .tab-content-wrap > .tab-content#"+o.selectedTab),e.Utility.LogConsole("NRT.Tabs.GetInitialTabSelected: $.tabset.after > tab: "+o.selectedTab)}})},GetInitialTabSelected:function(){var e,i=this;t.tabset({header:"#home-property-tabs .tab-nav > li",content:"#home-property-tabs .tab-content-wrap > .tab-content",activeIndex:o.selectedIndex,after:function(a){i.LoadActiveTab("#home-property-tabs .tab-content-wrap > .tab-content"),o.homeTab=t("#home-property-tabs").find(".tab-nav").find("li").eq(a),o.homeTab.length&&(o.selectedTab=o.homeTab.find("a").attr("id"),e=o.selectedTab.indexOf("_")+1,o.selectedTab=o.selectedTab.substr(e,o.selectedTab.length),o.persistSelectedTab(o.selectedTab),t("#sort-by-mobile").val(o.selectedTab))}})},SetSelectedTab:function(e){o.selectedTab=e,o.homeTab=t("#tabSet_"+e)},LoadActiveHomePageTab:function(a){var n,r,s,l,c,d,u,h,p,g,m=t(a),f=t("input#hdnLocationID").val(),v=t("input#hdnLocationLevel").val(),y=t("div#tsSpinner");e.Utility.LogConsole("NRT.Tabs.LoadActiveTab: active tab is: "+m.attr("id")),m.hasClass("active")&&(n=m.attr("id"),l=t("div#"+n+"_list").data(),r=t("div#home-property-tabs.property-tabs div.tab-content-wrap div.tab-content.active div#"+n+"_list.property-row"),-1===t.inArray(n,o.typeLoaded)?(u={locationID:f,locationLevel:v,type:n,page:"1"},y.top=r.offset().top+r.height,(p=new e.Spinner(y,o.spinnerOptions)).Spin(),t.ajax({type:"GET",url:e.Utility.AssembleUrl(["tabset","tabsetcards"]),data:u}).done(function(i){(s=t(i)).css({opacity:0}),r.html(s).css("height","auto").waitForImages(function(){t(this).find("div.property-snapshot").matchHeight(),s.animate({opacity:1},"slow"),e.Utility.LogConsole("NRT.Tabs.LoadActiveHomePageTab: matchHeight on listings"),(c=r.find("ul.tabset-card-list").data())&&(h=c.propertyCardsTotalProps||0,l.totalProps=h,d=c.propertyCardsPage||0,l.page=d,d<5&&h>r.find("div.property-snapshot").length&&r.parent().find("p.btn-view-more").show()),o.typeLoaded.push(n),l.page=++d,p.Stop()})}).error(function(){p.Stop()}).always(function(){e.PrefetchedListings.InitializeTabsets(),g={content:"#home-property-tabs div.tab-content-wrap > .tab-content"},t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,g)})):e.Utility.LogConsole("NRT.Tabs.LoadActiveHomePageTab: this tab was already loaded"))},LoadActiveTab:function(a){var n,r,s,l,c,d,u,h,p;t(a).each(function(){n=t(this),s=t("#hdnLocationID").val(),l=t("#hdnLocationLevel").val(),n.attr("class").indexOf("active")>0&&(r=n.attr("id"),-1===t.inArray(r,o.typeLoaded)?(c=t('[id$="'+r+'_page"]'),d={locationID:s,locationLevel:l,type:r,page:"1"},t("body").css("cursor","progress"),t.ajax({type:"GET",url:e.Utility.AssembleUrl(["tabset","tabsetcards"]),data:d}).done(function(i){t('[id$="'+r+'_list"]').html(i).waitForImages(function(){t(this).find("div.property-snapshot").matchHeight(),e.Utility.LogConsole("NRT.Tabs.LoadActiveTab: matchHeight on listings")}),u=t('[id$="'+r+'_totalProps"]').val(),h=+c.val(),+u<5*h+4&&t('[id$="'+r+'_list"]').parent().find("p.btn-view-more").hide(),o.typeLoaded.push(r)}).always(function(){c.val(2),t("body").css("cursor","default"),e.PrefetchedListings.InitializeTabsets(),p={content:".property-tabs .tab-content-wrap > .tab-content"},t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,p)})):e.Utility.LogConsole("NRT.Tabs.LoadActiveTab: this tab was already loaded"))})},SetupHomePageViewMoreButton:function(){var a,n,r,s,l,c,d,u,h,p,g;t("div.property-tabs").on("click",'a[id$="_link"]',function(){h=t(this),t("div#"+o.selectedTab+"_list"),s=t("div#"+o.selectedTab+"_list").data(),e.Utility.LogConsole("NRT.Tabs.SetupViewMoreButton: click occurred for button:"+h.attr("id")),a=t("#hdnLocationID").val(),n=t("#hdnLocationLevel").val(),r=h.attr("id").split("_")[0],d=s.page,l=s.totalProps,c=t('[id$="'+r+'_viewMore"]'),u={locationID:a,locationLevel:n,type:r,page:d},t.ajax({type:"GET",url:e.Utility.AssembleUrl(["tabset","tabsetcards"]),data:u,datatype:"html"}).done(function(i){(p=t(i)).css("opacity",0),t('[id$="'+r+'_list"]').append(p).waitForImages(function(){t(this).find("ul.tabset-card-list:last div.property-snapshot").matchHeight(),p.animate({opacity:1},"slow"),e.Utility.LogConsole("NRT.Tabs.SetupViewMoreButton: matchHeight on listings"),t("html, body").animate({scrollTop:t(this).find("ul.tabset-card-list:last").offset().top-50},1e3)})}).always(function(){+l<5*d+4?c.addClass("hide"):(c.removeClass("hide"),s.page=++d),e.PrefetchedListings.InitializeTabsets(),g={content:"#home-property-tabs div.tab-content-wrap > .tab-content"},t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,g)})})},SetupViewMoreButton:function(){var a,n,o,r,s,l,c,d,u;t('[id$="_link"]').click(function(){a=t("#hdnLocationID").val(),n=t("#hdnLocationLevel").val(),o=t(this).attr("id").split("_"),r=t('[id$="'+o[0]+'_page"]'),s=t('[id$="'+o[0]+'_totalProps"]').val(),l=t('[id$="'+o[0]+'_viewMore"]'),c=+r.val(),d={locationID:a,locationLevel:n,type:o[0],page:c},t("body").css("cursor","progress"),t.ajax({type:"GET",url:e.Utility.AssembleUrl(["tabset","tabsetcards"]),data:d,datatype:"html"}).done(function(i){t('[id$="'+o[0]+'_list"]').append(i).waitForImages(function(){t(this).find("ul.tabset-card-list:last div.property-snapshot").matchHeight(),e.Utility.LogConsole("NRT.Tabs.SetupViewMoreButton: matchHeight on listings")}),t("html, body").animate({scrollTop:l.offset().top-500},1e3)}).always(function(){+s<5*c+4?l.addClass("hide"):(l.removeClass("hide"),r.val(++c)),t("body").css("cursor","default"),e.PrefetchedListings.InitializeTabsets(),u={content:".property-tabs .tab-content-wrap > .tab-content"},t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,u)})})}},o={selectedTab:null,homeTab:null,selectedIndex:0,typeLoaded:[],isPropAjaxLoaded:!1,spinnerOptions:{top:"75px",position:"relative",color:"#fff"},findSelectedTab:function(){o.homeTab=t("#tabSet_"+o.selectedTab),o.homeTab.length?o.selectedIndex=o.homeTab.parent().index():o.selectedIndex=0},persistSelectedTab:function(t){var a,n;t&&((a=new Date).setHours(a.getHours()+1),n="."+i.location.hostname,Cookies.set("HomePageTab","Zone="+e.Profile.Zone+"&Tab="+t,{path:"/",expires:a,domain:n}))}},e.Tabs=n}(window.NRT,jQuery,window),function(e,t){var i={Initialize:function(){t(".dym-choice").click(function(){var i=t(this).data("preferred-zone"),a=t(this).data("preferred-search-url");t.ajax({url:e.Utility.AssembleUrl(["searchresults","savedidyoumeanchoice"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({preferredZone:i,preferredSearchUrl:a})}).fail(function(t,i,a){var n="NRT.DidYouMeanChoiceTracking.Initialize: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+t.toString()),new Error(n)})})}};e.DidYouMeanChoiceTracking=i}(window.NRT,jQuery),function(e,t,i){var a,n={};a={Initialize:function(a,o,r){var s;n.subscriberIsActive=a,n.subscriberIsAuthenticated=o,n.$authDlg=t("#authdialog"),n.$authFrm=t("#authdialog form"),n.modalVerticalCenter=0,n.$saveSearchWithAlertsCheckDlg=t("#saveSearchWithAlertsCheckModal"),t.validator.unobtrusive.parse("#SaveSearchWithAlertsCheckForm"),e.Validate.Unobtrusive.Parse("#SaveSearchWithAlertsCheckForm"),n.$savedSearchAlertPreferencesDlg=t("#savedSearchAlertPreferencesModal"),t.validator.unobtrusive.parse("#SavedSearchAlertPreferencesForm"),e.Validate.Unobtrusive.Parse("#SavedSearchAlertPreferencesForm"),n.hookUpEvents(),null!==(s=e.session.get("pdModal"))&&!0===s.isSyncing&&(null!==history.state?(e.PropertyDetailModal.saveState(i.location.href,history.state.depth,!1),ioc("app.events").once(e.SearchMapEvent.PROPERTY_MARKERS_ADDED,function(){history.go(s.depth)})):(e.PropertyDetailModal.saveState(i.location.href,s.depth,!1),ioc("app.events").once(e.SearchMapEvent.PROPERTY_MARKERS_ADDED,function(){e.PropertyDetailModal.open(s.urls[s.depth])})))},ShowSaveSearchWithAlertsCheckModal:function(e){var t={centered:!0,closeEsc:!0,closeClick:!1,onClose:function(){n.$saveSearchWithAlertsCheckDlg.find("#result").val("").addClass("hide")},onLoad:function(){n.$saveSearchWithAlertsCheckDlg.find("input.js-search-name-alert-check").focus().end().find("input#IsOverride").val(!1).end().data("origin",e)}};n.$saveSearchWithAlertsCheckDlg.lightbox_me(t)},ShowSavedSearchAlertPreferencesModal:function(e,t){var a={centered:!1,closeEsc:!0,closeClick:!1,onClose:function(){n.$savedSearchAlertPreferencesDlg.find("#result").val("").addClass("hide")},onLoad:function(){n.$savedSearchAlertPreferencesDlg.data("origin",e)}};n.$savedSearchAlertPreferencesDlg.find("p.search-name span").html(t).end().find("input.js-search-name-alert-preferences:hidden").val(t),n.modalVerticalCenter=(i.innerHeight-n.$savedSearchAlertPreferencesDlg.height())/2,n.modalVerticalCenter<=0&&(a.clipHeaderPadding=!0),a.modalCSS={top:n.modalVerticalCenter+"px",position:"fixed"},n.$savedSearchAlertPreferencesDlg.lightbox_me(a)},SetGalleryColumnStyling:function(){var i=t("section.layout-search-results.layout-list-view"),a="div.property-snapshot",n=0;i.length>0?(n=e.Utility.CountItemsInRow("div.list-items",a),i.find(a).removeClass("col1 col2 col3").addClass("col"+n)):t("section.layout-search-results").find(a).removeClass("col1 col2 col3"),e.Utility.LogConsole("NRT.PropertyResults.SetGalleryColumnStyling: executed")}},n={$authDlg:null,$authFrm:null,$saveSearchDlg:null,$saveSearchWithAlertsCheckDlg:null,$savedSearchAlertPreferencesDlg:null,subscriberIsActive:!1,subscriberIsAuthenticated:!1,isUserSignedIn:!1,hookUpEvents:function(){var o,r,s,l,c,d,u,h,p,g=new e.HBIB.LoginAjax(n.$authFrm),m=i.location;t("div.simple-search, .listing-results, div.mobile-links-wrap").on("click","a.js-save-this-search-trigger",function(i){i.preventDefault(),p=t(i.currentTarget).data("origin"),n.subscriberIsActive&&n.subscriberIsAuthenticated?a.ShowSaveSearchWithAlertsCheckModal(p):(o=n.$authDlg.find("p.not-a-member a"),r=m.pathname,o.prop("href","/sign-up/?ReturnURL="+encodeURIComponent(r)),e.CompleteActionStorage.setItem("savesearch",{name:"savesearch",created:new Date,params:p}),g.BindForm(function(){n.isUserSignedIn=!0,n.$authDlg.trigger("close"),e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(document).trigger(e.Event.eAction.USER_SIGNIN,["manual","modal_prompt",p]),e.session.item("LoggedInStatus","ManualLoggedIn")),m.href=r}),e.FacebookLogin.Initialize({clickSelector:".account-sign-in-modal .facebook-signin",onLogin:function(){e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(document).trigger(e.Event.eAction.USER_SIGNIN,["fb_manual","modal_prompt",p]),e.session.item("LoggedInStatus","FBLoggedIn")),n.isUserSignedIn=!0,m.href=r},returnUrl:encodeURIComponent(r),cancelUrl:encodeURIComponent(m.pathname+m.search)}),n.$authDlg.lightbox_me({centered:!0,closeEsc:!0,closeClick:!1,onClose:function(){n.isUserSignedIn||e.CompleteActionStorage.removeItem("savesearch"),g.ResetForm()}}))}),t(".vow-signin").click(function(e){g.BindForm(function(){m.reload()}),n.$authDlg.lightbox_me({centered:!0,closeEsc:!0,closeClick:!1,onClose:function(){g.ResetForm()}})}),t("form#SaveSearchWithAlertsCheckForm").submit(function(i){i.preventDefault(),l=t("#saveSearchWithAlertsCheckModal"),(d=t(this)).valid()&&(h=d.serialize(),t.ajax({url:e.Utility.AssembleUrl(["subscriber","savesearch"]),method:"POST",data:h}).done(function(i){s=t("#save-search-overwrite-modal"),i.success?(p=l.data("origin"),e.StatusSlider.ShowStatusSlider(i.message),s.trigger("close"),l.trigger("close"),d.find("input#chkEmailAlerts").is(":checked")&&a.ShowSavedSearchAlertPreferencesModal(p,i.searchName),t(document).trigger(e.Event.eAction.SEARCH_SAVED,[p])):i.showOverride&&(t("#save-search-overwrite").submit(function(e){e.preventDefault(),d.find("#IsOverride").val(!0).submit()}).find('input[type="reset"]').click(function(){a.ShowSaveSearchWithAlertsCheckModal(p)}).end().find("#new-search-name").text(i.searchName),l.trigger("close"),s.lightbox_me({centered:!0,closeEsc:!0,closeClick:!1}))}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider(),l.trigger("close")}))}),t("#SavedSearchAlertPreferencesForm").submit(function(i){if(i.preventDefault(),c=t("#savedSearchAlertPreferencesModal"),(u=t(this)).valid()){var a=JSON.stringify(e.AlertPreferences.getSavedSearchAlertPreferences(u));t.ajax({url:e.Utility.AssembleUrl(["subscriber","savedsearchalertpreferences"]),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:a}).done(function(i){i.success?(p=c.data("origin"),e.StatusSlider.ShowStatusSlider(i.message),t(document).trigger(e.Event.eAction.SEARCH_ALERTS_SAVED,[p])):e.StatusSlider.ShowErrorSlider()}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider()}).always(function(){c.trigger("close"),t("#SavedSearchAlertPreferencesForm")[0].reset()})}}).find('input[type="reset"]').click(function(){t("#SavedSearchAlertPreferencesForm")[0].reset()})}},e.Utility.BaseOrigin().PSR&&!e.Global.Feature.UseNewPropertySearchFilters&&t(".js-more-neighborhoods-trigger").click(function(a){var n=t(t("#add-a-location-list").children().find("input[value]")).map(function(){return t(this).val()+(t(this).is(":checked")?"_1":"_0")}).get().join();t(".js-more-neighborhoods-modal").load(e.Utility.AssembleUrl(["searchresults","nearbylocations"]),{searchId:App.searchData.searchId,locations:n},function(){t.tabset({header:".modal-with-navigation .nav-tabs-lite li",content:".modal-with-navigation .tab",activeIndex:0}),t(".js-more-neighborhoods-modal").lightbox_me({centered:!0,destroyOnClose:!1,closeClick:!0,modalCSS:{top:t(i).scrollTop()+40+"px"}}),t("#more-hoods").change(function(){t(".tab").hide(),t("#nearby-locations div.tab").removeClass("active"),t("#tab"+t(this).find("option:selected").attr("id")).show().addClass("active")})}),a.preventDefault()}),e.Utility.BaseOrigin().PSR&&t(i).on("load",function(){if(!e.Global.Feature.UseNewPropertySearchFilters&&"psr"===e.session.item("Locations").current){var i=t("input#searchtext-2").val(),a=t("H1>span").text(),n=null!=t("div.dym").data("dym-type")?t("div.dym").data("dym-type"):"";null!=i&&i!==a&&t(document).trigger(e.Event.eAction.SEARCH_DYM,[n.toLowerCase(),e.session.item("Locations").previous,i,a])}t(document).on("click","a.icon-location2.ab-map",function(i){i.preventDefault(),t(".layout-search-results.psr-panel:not(.layout-list-view) .results-map.psr-panel").is(":hidden")||t(".layout-search-results.psr-panel.layout-list-view .results-map.psr-panel").is(":hidden")||t(".mobile-index-view.psr-panel").is(":visible")?ioc("app.events").trigger(e.SearchListEvent.SHOW_MAP_CLICK_NEW_PSR_PANELS,{element:i.currentTarget}):ioc("app.events").trigger(e.SearchListEvent.CENTER_MAP_CLICK,{offset:t(i.currentTarget).data("offset")})}).on("click","body.body-property-search-results a.icon-hide",function(i){var a,n=t(i.currentTarget);i.preventDefault(),n&&(a=n.data("pid"),e.HBIB.HideListing(a,function(){App.reloadResults()}))})}),e.PropertyResults=a}(window.NRT,jQuery,window),function(e,t,i){var a={},n={};a={open:function(e,t){n.pdModal.open(e,t)},navigate:function(e){n.pdModal.navigate(e)},close:function(e){n.pdModal.close(e)},saveState:function(t,i,a){var o=n.state.urls;o.some(function(e){return t===e})?i!==o.lastIndexOf(t)&&(o.splice(o.lastIndexOf(t),o.lastIndexOf(t)-i),o.push(t)):0===i?o[i]=t:i<=o.length?(o[i]=t,o.splice(o.lastIndexOf(t)+1,o.lastIndexOf(t)+1-i)):o.push(t),n.state.depth=i,n.state.isSyncing=a,e.session.set("pdModal",n.state)}},n={state:{urls:[],depth:0,isSyncing:!1},pdModal:function(){var n,o,r=t.noop;function s(t){var a=e.Utility.parseUri(t.data),n=/\/(?:p|d|m)id_\d+\//.test(a.path);t.origin===i.location.origin&&n&&c(a.path)}function l(e,t){var a=i.history.state;n=document.getElementById("detail-iframe"),null!==document.getElementById("detail-iframe-expand")&&(o=document.getElementById("detail-iframe-expand")),n?("function"==typeof t&&(r=t),i.addEventListener("message",s,!0),a&&a.depth||i.history.replaceState({url:i.location.href,depth:0},document.title,i.location.href),c(e)):i.App.loadDetailModal(0,e)}function c(r){var s=i.history.state,l=e.Utility.parseUri(r),c=l.protocol+"//"+l.authority+l.path;if(n.contentWindow.location.href!==c){var d=s&&s.depth||0;i.location.pathname!==l.path&&(i.history.pushState({url:c,depth:d+1},document.title,c),a.saveState(c,d+1,!1),e.Utility.LogConsole(history.state)),n.contentWindow.location.replace(c+"?ismodal=1"),null!==document.getElementById("detail-iframe-expand")&&o.setAttribute("href",c),n.style.visibility="hidden",i.App.spinner.Spin(),t(".spinnerContainer").addClass("property-detail-modal-spinner"),n.attachEvent?n.attachEvent("onload",function(){n.style.visibility="visible",t(".spinnerContainer").removeClass("property-detail-modal-spinner"),i.App.spinner.Stop()}):n.onload=function(){n.style.visibility="visible",t(".spinnerContainer").removeClass("property-detail-modal-spinner"),i.App.spinner.Stop()}}}function d(e){var t=history.state&&history.state.depth||0;i.App.state.isPDModalOpen&&(i.App.state.isPDModalOpen=!1,n.setAttribute("src","about:blank"),a.saveState(i.location.href,t,!1),e&&t&&i.history.go(-t),i.removeEventListener("message",s,!0),r())}return{open:l,close:d,navigate:c}}()},e.PropertyDetailModal=a}(window.NRT,jQuery,window);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * author Christopher Blum
 *    - based on the idea of Remy Sharp, http://remysharp.com/2009/01/26/element-in-view-event-plugin/
 *    - forked from http://github.com/zuk/jquery.inview/
 */
/*!
 * author Christopher Blum
 *    - based on the idea of Remy Sharp, http://remysharp.com/2009/01/26/element-in-view-event-plugin/
 *    - forked from http://github.com/zuk/jquery.inview/
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e(require("jquery")):e(jQuery)}(function(e){var t,i,a,n=[],o=document,r=window,s=o.documentElement;function l(){if(n.length){var a,l,c,d=0,u=e.map(n,function(e){var t=e.data.selector,i=e.$element;return t?i.find(t):i});for(t=t||((c={height:r.innerHeight,width:r.innerWidth}).height||!(a=o.compatMode)&&e.support.boxModel||(c={height:(l="CSS1Compat"===a?s:o.body).clientHeight,width:l.clientWidth}),c),i=i||{top:r.pageYOffset||s.scrollTop||o.body.scrollTop,left:r.pageXOffset||s.scrollLeft||o.body.scrollLeft};d<n.length;d++)if(e.contains(s,u[d][0])){var h=e(u[d]),p=h[0].offsetHeight,g=h[0].offsetWidth,m=h.offset(),f=h.data("inview");if(!i||!t)return;m.top+p>i.top&&m.top<i.top+t.height&&m.left+g>i.left&&m.left<i.left+t.width?f||h.data("inview",!0).trigger("inview",[!0]):f&&h.data("inview",!1).trigger("inview",[!1])}}}e.event.special.inview={add:function(t){n.push({data:t,$element:e(this),element:this}),!a&&n.length&&(a=setInterval(l,250))},remove:function(e){for(var t=0;t<n.length;t++){var i=n[t];if(i.element===this&&i.data.guid===e.guid){n.splice(t,1);break}}n.length||(clearInterval(a),a=null)}},e(r).on("scroll resize scrollstop",function(){t=i=null}),!s.addEventListener&&s.attachEvent&&s.attachEvent("onfocusin",function(){i=null})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 *         ,/
 *       ,'/
 *     ,' /
 *   ,'  /_____,
 * .'____    ,'
 *      /  ,'
 *     / ,'
 *    /,'
 *   /'
 *
 * Selectric ϟ v1.13.0 (Aug 22 2017) - http://lcdsantos.github.io/jQuery-Selectric/
 *
 * @Copyright (c) 2017 Leonardo Santos; @License: MIT License
 *
 */
/*!
 *         ,/
 *       ,'/
 *     ,' /
 *   ,'  /_____,
 * .'____    ,'
 *      /  ,'
 *     / ,'
 *    /,'
 *   /'
 *
 * Selectric ϟ v1.13.0 (Aug 22 2017) - http://lcdsantos.github.io/jQuery-Selectric/
 *
 * @Copyright (c) 2017 Leonardo Santos; @License: MIT License
 *
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){var t=e(document),i=e(window),a="selectric",n=".sl",o=["a","e","i","o","u","n","c","y"],r=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],s=function(t,i){var a=this;a.element=t,a.$element=e(t),a.state={multiple:!!a.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},a.eventTriggers={open:a.open,close:a.close,destroy:a.destroy,refresh:a.refresh,init:a.init},a.init(i)};s.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=r.length;t--;)e=e.toLowerCase().replace(r[t],o[t]);return e},format:function(e){var t=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,i,a){return a&&t[1]?t[1][a]:t[i]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(t,i){var n=i.element,o=i.options["on"+t],r=[n].concat([].slice.call(arguments).slice(1));e.isFunction(o)&&o.apply(n,r),e(n).trigger(a+"-"+this.toDash(t),r)},arrayToClassname:function(t){var i=e.grep(t,function(e){return!!e});return e.trim(i.join(" "))}},init:function(t){var i=this;if(i.options=e.extend(!0,{},e.fn[a].defaults,i.options,t),i.utils.triggerCallback("BeforeInit",i),i.destroy(!0),i.options.disableOnMobile&&i.utils.isMobile())i.disableOnMobile=!0;else{i.classes=i.getClassNames();var n=e("<input/>",{class:i.classes.input,readonly:i.utils.isMobile()}),o=e("<div/>",{class:i.classes.items,tabindex:-1}),r=e("<div/>",{class:i.classes.scroll}),s=e("<div/>",{class:i.classes.prefix,html:i.options.arrowButtonMarkup}),l=e("<span/>",{class:"label"}),c=i.$element.wrap("<div/>").parent().append(s.prepend(l),o,n),d=e("<div/>",{class:i.classes.hideselect});i.elements={input:n,items:o,itemsScroll:r,wrapper:s,label:l,outerWrapper:c},i.options.nativeOnMobile&&i.utils.isMobile()&&(i.elements.input=void 0,d.addClass(i.classes.prefix+"-is-native"),i.$element.on("change",function(){i.refresh()})),i.$element.on(i.eventTriggers).wrap(d),i.originalTabindex=i.$element.prop("tabindex"),i.$element.prop("tabindex",-1),i.populate(),i.activate(),i.utils.triggerCallback("Init",i)}},activate:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.$element.width();t.removeClass(e.classes.tempshow),e.utils.triggerCallback("BeforeActivate",e),e.elements.outerWrapper.prop("class",e.utils.arrayToClassname([e.classes.wrapper,e.$element.prop("class").replace(/\S+/g,e.classes.prefix+"-$&"),e.options.responsive?e.classes.responsive:""])),e.options.inheritOriginalWidth&&i>0&&e.elements.outerWrapper.width(i),e.unbindEvents(),e.$element.prop("disabled")?(e.elements.outerWrapper.addClass(e.classes.disabled),e.elements.input&&e.elements.input.prop("disabled",!0)):(e.state.enabled=!0,e.elements.outerWrapper.removeClass(e.classes.disabled),e.$li=e.elements.items.removeAttr("style").find("li"),e.bindEvents()),e.utils.triggerCallback("Activate",e)},getClassNames:function(){var t=this,i=t.options.customClass,a={};return e.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel".split(" "),function(e,n){var o=i.prefix+n;a[n.toLowerCase()]=i.camelCase?o:t.utils.toDash(o)}),a.prefix=i.prefix,a},setLabel:function(){var t=this,i=t.options.labelBuilder;if(t.state.multiple){var a=e.isArray(t.state.currValue)?t.state.currValue:[t.state.currValue];a=0===a.length?[0]:a;var n=e.map(a,function(i){return e.grep(t.lookupItems,function(e){return e.index===i})[0]});n=e.grep(n,function(t){return n.length>1||0===n.length?""!==e.trim(t.value):t}),n=e.map(n,function(a){return e.isFunction(i)?i(a):t.utils.format(i,a)}),t.options.multiple.maxLabelEntries&&(n.length>=t.options.multiple.maxLabelEntries+1?(n=n.slice(0,t.options.multiple.maxLabelEntries)).push(e.isFunction(i)?i({text:"..."}):t.utils.format(i,{text:"..."})):n.slice(n.length-1)),t.elements.label.html(n.join(t.options.multiple.separator))}else{var o=t.lookupItems[t.state.currValue];t.elements.label.html(e.isFunction(i)?i(o):t.utils.format(i,o))}},populate:function(){var t=this,i=t.$element.children(),a=t.$element.find("option"),n=a.filter(":selected"),o=a.index(n),r=0,s=t.state.multiple?[]:0;n.length>1&&t.state.multiple&&(o=[],n.each(function(){o.push(e(this).index())})),t.state.currValue=~o?o:s,t.state.selectedIdx=t.state.currValue,t.state.highlightedIdx=t.state.currValue,t.items=[],t.lookupItems=[],i.length&&(i.each(function(i){var a=e(this);if(a.is("optgroup")){var n={element:a,label:a.prop("label"),groupDisabled:a.prop("disabled"),items:[]};a.children().each(function(i){var a=e(this);n.items[i]=t.getItemData(r,a,n.groupDisabled||a.prop("disabled")),t.lookupItems[r]=n.items[i],r++}),t.items[i]=n}else t.items[i]=t.getItemData(r,a,a.prop("disabled")),t.lookupItems[r]=t.items[i],r++}),t.setLabel(),t.elements.items.append(t.elements.itemsScroll.html(t.getItemsMarkup(t.items))))},getItemData:function(t,i,a){return{index:t,element:i,value:i.val(),className:i.prop("class"),text:i.html(),slug:e.trim(this.utils.replaceDiacritics(i.html())),alt:i.attr("data-alt"),selected:i.prop("selected"),disabled:a}},getItemsMarkup:function(t){var i=this,a="<ul>";return e.isFunction(i.options.listBuilder)&&i.options.listBuilder&&(t=i.options.listBuilder(t)),e.each(t,function(t,n){void 0!==n.label?(a+=i.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',i.utils.arrayToClassname([i.classes.group,n.groupDisabled?"disabled":"",n.element.prop("class")]),i.classes.grouplabel,n.element.prop("label")),e.each(n.items,function(e,t){a+=i.getItemMarkup(t.index,t)}),a+="</ul>"):a+=i.getItemMarkup(n.index,n)}),a+"</ul>"},getItemMarkup:function(t,i){var a=this,n=a.options.optionsItemBuilder,o={value:i.value,text:i.text,slug:i.slug,index:i.index};return a.utils.format('<li data-index="{1}" class="{2}">{3}</li>',t,a.utils.arrayToClassname([i.className,t===a.items.length-1?"last":"",i.disabled?"disabled":"",i.selected?"selected":""]),e.isFunction(n)?a.utils.format(n(i,this.$element,t),i):a.utils.format(n,o))},unbindEvents:function(){this.elements.wrapper.add(this.$element).add(this.elements.outerWrapper).add(this.elements.input).off(n)},bindEvents:function(){var t=this;t.elements.outerWrapper.on("mouseenter.sl mouseleave.sl",function(i){e(this).toggleClass(t.classes.hover,"mouseenter"===i.type),t.options.openOnHover&&(clearTimeout(t.closeTimer),"mouseleave"===i.type?t.closeTimer=setTimeout(e.proxy(t.close,t),t.options.hoverIntentTimeout):t.open())}),t.elements.wrapper.on("click.sl",function(e){t.state.opened?t.close():t.open(e)}),t.options.nativeOnMobile&&t.utils.isMobile()||(t.$element.on("focus.sl",function(){t.elements.input.focus()}),t.elements.input.prop({tabindex:t.originalTabindex,disabled:!1}).on("keydown.sl",e.proxy(t.handleKeys,t)).on("focusin.sl",function(e){t.elements.outerWrapper.addClass(t.classes.focus),t.elements.input.one("blur",function(){t.elements.input.blur()}),t.options.openOnFocus&&!t.state.opened&&t.open(e)}).on("focusout.sl",function(){t.elements.outerWrapper.removeClass(t.classes.focus)}).on("input propertychange",function(){var i=t.elements.input.val(),a=new RegExp("^"+t.utils.escapeRegExp(i),"i");clearTimeout(t.resetStr),t.resetStr=setTimeout(function(){t.elements.input.val("")},t.options.keySearchTimeout),i.length&&e.each(t.items,function(e,i){if(!i.disabled)if(a.test(i.text)||a.test(i.slug))t.highlight(e);else if(i.alt)for(var n=i.alt.split("|"),o=0;o<n.length&&n[o];o++)if(a.test(n[o].trim()))return void t.highlight(e)})})),t.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return t.select(e(this).data("index")),!1}})},handleKeys:function(t){var i=this,a=t.which,n=i.options.keys,o=e.inArray(a,n.previous)>-1,r=e.inArray(a,n.next)>-1,s=e.inArray(a,n.select)>-1,l=e.inArray(a,n.open)>-1,c=i.state.highlightedIdx,d=o&&0===c||r&&c+1===i.items.length,u=0;if(13!==a&&32!==a||t.preventDefault(),o||r){if(!i.options.allowWrap&&d)return;o&&(u=i.utils.previousEnabledItem(i.lookupItems,c)),r&&(u=i.utils.nextEnabledItem(i.lookupItems,c)),i.highlight(u)}if(s&&i.state.opened)return i.select(c),void(i.state.multiple&&i.options.multiple.keepMenuOpen||i.close());l&&!i.state.opened&&i.open()},refresh:function(){this.populate(),this.activate(),this.utils.triggerCallback("Refresh",this)},setOptionsDimensions:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.options.maxHeight,a=e.elements.items.outerWidth(),n=e.elements.wrapper.outerWidth()-(a-e.elements.items.width());!e.options.expandToItemText||n>a?e.finalWidth=n:(e.elements.items.css("overflow","scroll"),e.elements.outerWrapper.width(9e4),e.finalWidth=e.elements.items.width()+1,e.elements.items.css("overflow",""),e.elements.outerWrapper.width("")),e.elements.items.width(e.finalWidth).height()>i&&e.elements.items.height(i),t.removeClass(e.classes.tempshow)},isInViewport:function(){var e=this;if(!0===e.options.forceRenderAbove)e.elements.outerWrapper.addClass(e.classes.above);else if(!0===e.options.forceRenderBelow)e.elements.outerWrapper.addClass(e.classes.below);else{var t=i.scrollTop(),a=i.height(),n=e.elements.outerWrapper.offset().top,o=n+e.elements.outerWrapper.outerHeight()+e.itemsHeight<=t+a,r=n-e.itemsHeight>t,s=!o&&r,l=!s;e.elements.outerWrapper.toggleClass(e.classes.above,s),e.elements.outerWrapper.toggleClass(e.classes.below,l)}},detectItemVisibility:function(t){var i=this,a=i.$li.filter("[data-index]");i.state.multiple&&(t=e.isArray(t)&&0===t.length?0:t,t=e.isArray(t)?Math.min.apply(Math,t):t);var n=a.eq(t).outerHeight(),o=a[t].offsetTop,r=i.elements.itemsScroll.scrollTop(),s=o+2*n;i.elements.itemsScroll.scrollTop(s>r+i.itemsHeight?s-i.itemsHeight:o-n<r?o-n:r)},open:function(i){var n=this;if(n.options.nativeOnMobile&&n.utils.isMobile())return!1;n.utils.triggerCallback("BeforeOpen",n),i&&(i.preventDefault(),n.options.stopPropagation&&i.stopPropagation()),n.state.enabled&&(n.setOptionsDimensions(),e("."+n.classes.hideselect,"."+n.classes.open).children()[a]("close"),n.state.opened=!0,n.itemsHeight=n.elements.items.outerHeight(),n.itemsInnerHeight=n.elements.items.height(),n.elements.outerWrapper.addClass(n.classes.open),n.elements.input.val(""),i&&"focusin"!==i.type&&n.elements.input.focus(),setTimeout(function(){t.on("click.sl",e.proxy(n.close,n)).on("scroll.sl",e.proxy(n.isInViewport,n))},1),n.isInViewport(),n.options.preventWindowScroll&&t.on("mousewheel.sl DOMMouseScroll.sl","."+n.classes.scroll,function(t){var i=t.originalEvent,a=e(this).scrollTop(),o=0;"detail"in i&&(o=-1*i.detail),"wheelDelta"in i&&(o=i.wheelDelta),"wheelDeltaY"in i&&(o=i.wheelDeltaY),"deltaY"in i&&(o=-1*i.deltaY),(a===this.scrollHeight-n.itemsInnerHeight&&o<0||0===a&&o>0)&&t.preventDefault()}),n.detectItemVisibility(n.state.selectedIdx),n.highlight(n.state.multiple?-1:n.state.selectedIdx),n.utils.triggerCallback("Open",n))},close:function(){var e=this;e.utils.triggerCallback("BeforeClose",e),t.off(n),e.elements.outerWrapper.removeClass(e.classes.open),e.state.opened=!1,e.utils.triggerCallback("Close",e)},change:function(){var t=this;t.utils.triggerCallback("BeforeChange",t),t.state.multiple?(e.each(t.lookupItems,function(e){t.lookupItems[e].selected=!1,t.$element.find("option").prop("selected",!1)}),e.each(t.state.selectedIdx,function(e,i){t.lookupItems[i].selected=!0,t.$element.find("option").eq(i).prop("selected",!0)}),t.state.currValue=t.state.selectedIdx,t.setLabel(),t.utils.triggerCallback("Change",t)):t.state.currValue!==t.state.selectedIdx&&(t.$element.prop("selectedIndex",t.state.currValue=t.state.selectedIdx).data("value",t.lookupItems[t.state.selectedIdx].text),t.setLabel(),t.utils.triggerCallback("Change",t))},highlight:function(e){var t=this,i=t.$li.filter("[data-index]").removeClass("highlighted");t.utils.triggerCallback("BeforeHighlight",t),void 0===e||-1===e||t.lookupItems[e].disabled||(i.eq(t.state.highlightedIdx=e).addClass("highlighted"),t.detectItemVisibility(e),t.utils.triggerCallback("Highlight",t))},select:function(t){var i=this,a=i.$li.filter("[data-index]");if(i.utils.triggerCallback("BeforeSelect",i,t),void 0!==t&&-1!==t&&!i.lookupItems[t].disabled){if(i.state.multiple){i.state.selectedIdx=e.isArray(i.state.selectedIdx)?i.state.selectedIdx:[i.state.selectedIdx];var n=e.inArray(t,i.state.selectedIdx);-1!==n?i.state.selectedIdx.splice(n,1):i.state.selectedIdx.push(t),a.removeClass("selected").filter(function(t){return-1!==e.inArray(t,i.state.selectedIdx)}).addClass("selected")}else a.removeClass("selected").eq(i.state.selectedIdx=t).addClass("selected");i.state.multiple&&i.options.multiple.keepMenuOpen||i.close(),i.change(),i.utils.triggerCallback("Select",i,t)}},destroy:function(e){var t=this;t.state&&t.state.enabled&&(t.elements.items.add(t.elements.wrapper).add(t.elements.input).remove(),e||t.$element.removeData(a).removeData("value"),t.$element.prop("tabindex",t.originalTabindex).off(n).off(t.eventTriggers).unwrap().unwrap(),t.state.enabled=!1)}},e.fn[a]=function(t){return this.each(function(){var i=e.data(this,a);i&&!i.disableOnMobile?"string"==typeof t&&i[t]?i[t]():i.init(t):e.data(this,a,new s(this,t))})},e.fn[a].defaults={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,forceRenderAbove:!1,forceRenderBelow:!1,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:a,camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*! ===================================================
 * tagmanager.js v3.0.2
 * http://welldonethings.com/tags/manager
 * ===================================================
 * @Copyright 2012 Max Favilli
 *
 * @License: Licensed under the Mozilla Public License, Version 2.0 You may not use this work except in compliance with the License.
 *
 * http://www.mozilla.org/MPL/2.0/
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
/*! ===================================================
 * tagmanager.js v3.0.2
 * http://welldonethings.com/tags/manager
 * ===================================================
 * @Copyright 2012 Max Favilli
 *
 * @License: Licensed under the Mozilla Public License, Version 2.0 You may not use this work except in compliance with the License.
 *
 * http://www.mozilla.org/MPL/2.0/
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(e,t){var i={prefilled:null,CapitalizeFirstLetter:!1,preventSubmitOnEnter:!0,isClearInputOnEsc:!0,externalTagId:!1,prefillIdFieldName:"Id",prefillValueFieldName:"Value",AjaxPush:null,AjaxPushAllTags:null,AjaxPushParameters:null,delimiters:[9,13,44],backspace:[8],maxTags:0,hiddenTagListName:null,hiddenTagListId:null,replace:!0,output:null,deleteTagsOnBackspace:!0,tagsContainer:null,tagCloseIcon:"x",tagIconCloseClass:"icon-remove",tagClass:"",tagClassAddAnimate:"",tagClassRemoveAnimate:"",validator:null,onlyTagList:!1,tagList:null,fillInputOnTagRemove:!1,AjaxPushDataType:"json"},a={pushTag:function(i,a,o){var r,s,l,c,d,u,h,p,g,m,f,v,y,S=e(this),b=S.data("opts"),w=S.data("tlis"),C=S.data("tlid");if((i=n.trimTag(i,b.delimiterChars))&&!(i.length<=0)){if(b.onlyTagList&&t!==b.tagList&&b.tagList){var T=b.tagList;if(e.each(T,function(e,t){T[e]=t.toLowerCase()}),-1===e.inArray(i.toLowerCase(),T))return}if(b.CapitalizeFirstLetter&&i.length>1&&(i=i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()),!b.validator||b.validator(i)){if(!(b.maxTags>0&&w.length>=b.maxTags)){if(r=!1,s=jQuery.map(w,function(e){return e.toLowerCase()}),-1!==(d=e.inArray(i.toLowerCase(),s))&&(r=!0),r)if((v=e("#"+S.data("tm_rndid")+"_"+C[d]).closest(".js-more-locations-tags")).length||(v=e("#"+S.data("tm_rndid")+"_"+C[d])),S.trigger("tm:duplicated",i),b.blinkClass){v.removeClass(b.tagClassAddAnimate);for(var I=0;I<2;++I)v.queue(function(t){e(this).toggleClass(b.blinkClass),t()}).delay(400)}else e("#"+S.data("tm_rndid")+"_"+C[d]).stop().velocity({backgroundColor:b.blinkBGColor_1},100).velocity({backgroundColor:b.blinkBGColor_2},100).velocity({backgroundColor:b.blinkBGColor_1},100).velocity({backgroundColor:b.blinkBGColor_2},100).velocity({backgroundColor:b.blinkBGColor_1},100).velocity({backgroundColor:b.blinkBGColor_2},100);else{!0===b.externalTagId?(o===t&&e.error("externalTagId is not passed for tag -"+i),c=o):(l=(l=Math.max.apply(null,C))===-1/0?0:l,c=++l),a||S.trigger("tm:pushing",[i,c]),w.push(i),C.push(c),a||null!==b.AjaxPush&&null===b.AjaxPushAllTags&&-1===e.inArray(i,b.prefilled)&&e.post(b.AjaxPush,e.extend({tag:i},b.AjaxPushParameters),null,b.AjaxPushDataType),u=S.data("tm_rndid")+"_"+c,h=S.data("tm_rndid")+"_Remover_"+c,p=e("<span/>").text(i).html(),g='<span class="'+n.tagClasses.call(S)+'" id="'+u+'" title="'+p+'">',g+="<span>"+p+"</span>",g+='<a href="#" title="Remove" class="tm-tag-remove '+b.tagIconCloseClass+'" id="'+h+'" TagIdToRemove="'+c+'">',g+=b.tagCloseIcon+"</a></span> ",m=e(g);var E=S.parents(".twitter-typeahead")[0]!==t;null!==b.tagsContainer?(y=e(b.tagsContainer).find(".more-location-tags")).length>0?(y.before(m).addClass(b.tagClassAddAnimate),setTimeout(function(){y.removeClass(b.tagClassAddAnimate)},500)):e(b.tagsContainer).append(m):C.length>1?E?(f=S.data("tm_rndid")+"_"+--c,jQuery("#"+f).after(m)):S.siblings("#"+S.data("tm_rndid")+"_"+C[C.length-2]).after(m):E?S.parents(".twitter-typeahead").before(m):S.before(m),setTimeout(function(){m.removeClass(b.tagClassAddAnimate)},500),m.find("#"+h).on("click",S,function(t){t.preventDefault();var i=parseInt(e(this).attr("TagIdToRemove")),a=S.data("opts"),o=a.tagClassRemoveAnimate?" "+a.tagClassRemoveAnimate:"",r=a.tagClassAddAnimate?" "+a.tagClassAddAnimate:"",s="."+a.tagBaseClass;r.length>0?e(t.currentTarget).parent(s).removeClass(r).addClass(o).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.spliceTag.call(S,i,t.data)}):n.spliceTag.call(S,i,t.data)}),n.refreshHiddenTagList.call(S),a||S.trigger("tm:pushed",[i,c]),n.showOrHide.call(S)}S.val("")}}else S.trigger("tm:invalid",i)}},popTag:function(){var t,i,a=e(this),o=a.data("tlis"),r=a.data("tlid");r.length>0&&(t=r.pop(),i=o[o.length-1],a.trigger("tm:popping",[i,t]),o.pop(),e("#"+a.data("tm_rndid")+"_"+t).remove(),n.refreshHiddenTagList.call(a),a.trigger("tm:popped",[i,t]),n.showOrHide.call(a))},empty:function(){for(var t,i=e(this),a=i.data("tlis"),o=i.data("tlid");o.length>0;)t=o.pop(),a.pop(),e("#"+i.data("tm_rndid")+"_"+t).remove(),n.refreshHiddenTagList.call(i);i.trigger("tm:emptied",null),n.showOrHide.call(i)},tags:function(){return this.data("tlis")},removeTag:function(i,a){var o=this,r=o.data("opts"),s=r.tagClassRemoveAnimate?" "+r.tagClassRemoveAnimate:"",l=r.tagClassAddAnimate?" "+r.tagClassAddAnimate:"",c="."+r.tagBaseClass;if(a===t&&(a=!0),l.length>0&&a){var d="#"+o.data("tm_rndid")+"_Remover_"+i;e(d).parent(c).removeClass(l).addClass(s).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.spliceTag.call(o,i)})}else n.spliceTag.call(o,i)}},n={showOrHide:function(){var e=this,t=e.data("opts"),i=e.data("tlis");t.maxTags>0&&i.length<t.maxTags&&(e.show(),e.trigger("tm:show")),t.maxTags>0&&i.length>=t.maxTags&&(e.hide(),e.trigger("tm:hide"))},tagClasses:function(){var t,i=e(this),a=i.data("opts"),n=a.tagBaseClass,o=a.inputBaseClass;return t=n,i.attr("class")&&e.each(i.attr("class").split(" "),function(e,i){-1!==i.indexOf(o+"-")&&(t+=" "+n+i.substring(o.length))}),t+=a.tagClass?" "+a.tagClass:"",t+=a.tagClassAddAnimate?" "+a.tagClassAddAnimate:""},trimTag:function(t,i){var a;for(t=e.trim(t),a=0;a<t.length&&-1===e.inArray(t.charCodeAt(a),i);a++);return t.substring(0,a)},refreshHiddenTagList:function(){var t=e(this),i=t.data("tlis"),a=t.data("lhiddenTagList");a&&e(a).val(i.join(t.data("opts").baseDelimiter)).change(),t.trigger("tm:refresh",i.join(t.data("opts").baseDelimiter))},killEvent:function(e){e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation(),e.preventDefault()},keyInArray:function(t,i){return-1!==e.inArray(t.which,i)},applyDelimiter:function(t){e(this);t.preventDefault()},prefill:function(t){var i=e(this),n=i.data("opts");e.each(t,function(e,t){!0===n.externalTagId?a.pushTag.call(i,t[n.prefillValueFieldName],!0,t[n.prefillIdFieldName]):a.pushTag.call(i,t,!0)})},pushAllTags:function(t,i){var a=e(this),n=a.data("opts"),o=a.data("tlis");n.AjaxPushAllTags&&("tm:pushed"===t.type&&-1!==e.inArray(i,n.prefilled)||e.post(n.AjaxPush,e.extend({tags:o.join(n.baseDelimiter)},n.AjaxPushParameters)))},spliceTag:function(t){var i,a=this,o=a.data("tlis"),r=a.data("tlid"),s=e.inArray(t,r);-1!==s&&(i=o[s],a.trigger("tm:splicing",[i,t]),e("#"+a.data("tm_rndid")+"_"+t).remove(),o.splice(s,1),r.splice(s,1),n.refreshHiddenTagList.call(a),a.trigger("tm:spliced",[i,t])),n.showOrHide.call(a)},init:function(t){var o,r,s=e.extend({},i,t);return s.hiddenTagListName=null===s.hiddenTagListName?"hidden-"+this.attr("name"):s.hiddenTagListName,o=s.delimeters||s.delimiters,r=[9,13,17,18,19,37,38,39,40],s.delimiterChars=[],s.delimiterKeys=[],e.each(o,function(t,i){-1!==e.inArray(i,r)?s.delimiterKeys.push(i):s.delimiterChars.push(i)}),s.baseDelimiter=String.fromCharCode(s.delimiterChars[0]||44),s.tagBaseClass="tm-tag",s.inputBaseClass="tm-input",e.isFunction(s.validator)||(s.validator=null),this.each(function(){var t=e(this),i="",o="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";if(t.data("tagManager"))return!1;t.data("tagManager",!0);for(var l=0;l<5;l++)o+=r.charAt(Math.floor(Math.random()*r.length));if(t.data("tm_rndid",o),t.data("opts",s).data("tlis",[]).data("tlid",[]),null===s.output?(i=e("<input/>",{type:"hidden",name:s.hiddenTagListName}),t.after(i),t.data("lhiddenTagList",i)):t.data("lhiddenTagList",e(s.output)),s.AjaxPushAllTags&&(t.on("tm:spliced",n.pushAllTags),t.on("tm:popped",n.pushAllTags),t.on("tm:pushed",n.pushAllTags)),t.on("focus keypress",function(t){e(this).popover&&e(this).popover("hide")}),s.isClearInputOnEsc&&t.on("keyup",function(t){27===t.which&&(e(this).val(""),n.killEvent(t))}),t.on("keypress",function(e){n.keyInArray(e,s.delimiterChars)&&n.applyDelimiter.call(t,e)}),t.on("keydown",function(e){n.keyInArray(e,s.delimiterKeys)&&n.applyDelimiter.call(t,e)}),s.deleteTagsOnBackspace&&t.on("keydown",function(i){n.keyInArray(i,s.backspace)&&e(this).val().length<=0&&(a.popTag.call(t),n.killEvent(i))}),s.fillInputOnTagRemove&&t.on("tm:popped",function(t,i){e(this).val(i)}),t.change(function(e){/webkit/.test(navigator.userAgent.toLowerCase())||t.focus(),n.killEvent(e)}),null!==s.prefilled)"object"===_typeof(s.prefilled)?n.prefill.call(t,s.prefilled):"string"==typeof s.prefilled?n.prefill.call(t,s.prefilled.split(s.baseDelimiter)):"function"==typeof s.prefilled&&n.prefill.call(t,s.prefilled());else if(null!==s.output){if(e(s.output)&&e(s.output).val())e(s.output);n.prefill.call(t,e(s.output).val().split(s.baseDelimiter))}}),this.trigger("tm:loaded"),this}};e.fn.tagsManager=function(t){var i=e(this);return 0 in this?a[t]?a[t].apply(i,Array.prototype.slice.call(arguments,1)):"object"!==(void 0===t?"undefined":_typeof(t))&&t?(e.error("Method "+t+" does not exist."),!1):n.init.apply(this,arguments):this}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){function i(e,t,i){var a=e+":",n=document.createElement("test").style;return n.cssText=i?a+t:a+["-webkit-","-moz-","-ms-","-o-",""].join(t+";"+a)+t+";",-1!==n[e].indexOf(t)}function a(e){return parseInt(e,10)||0}var n=0,o={classes:{plugin:"fixedsticky",active:"fixedsticky-on",inactive:"fixedsticky-off",clone:"fixedsticky-dummy",withoutFixedFixed:"fixedsticky-withoutfixedfixed",allowOverflow:"fixedsticky-allow-overflow"},keys:{offset:"fixedStickyOffset",position:"fixedStickyPosition",id:"fixedStickyId"},tests:{sticky:i("position","sticky"),fixed:i("position","fixed",!0)},getScrollTop:function(){var t="pageYOffset",i="scrollTop";return e?t in e?e[t]:e.document.documentElement[i]:e.document.body[i]},bypass:function(){return o.tests.sticky&&!o.optOut||!o.tests.fixed||e.FixedFixed&&!t(e.document.documentElement).hasClass("fixed-supported")},update:function(e){if(e.offsetWidth){var i,n,r,s,l,c=t(e),d=c.outerHeight(),u=c.data(o.keys.offset),h=o.getScrollTop(),p=c.is("."+o.classes.active),g=function(e){c[e?"addClass":"removeClass"](o.classes.active)[e?"removeClass":"addClass"](o.classes.inactive)},m=t(window).height(),f=c.data(o.keys.position),v=c.parent(),y=v.offset().top,S=v.outerHeight();void 0===u?(u=c.offset().top,c.data(o.keys.offset,u),c.after(t("<div>").addClass(o.classes.clone).height(d))):c.next("."+o.classes.clone).height(d),f||((i="auto"!==c.css("top")||"auto"!==c.css("bottom"))||c.css("position","fixed"),f={top:"auto"!==c.css("top"),bottom:"auto"!==c.css("bottom")},i||c.css("position",""),c.data(o.keys.position,f)),n=a(c.css("top")),r=a(c.css("bottom")),f.top&&(s=h+n,l=c.is("."+o.classes.allowOverflow),u<s&&(l||!(s+d>y+S)))||f.bottom&&u+(d||0)>h+m-r&&h+m-r>=y+(d||0)?p||g(!0):p&&g(!1)}},destroy:function(i){var a=t(i);return o.bypass()?a:a.each(function(){var i=t(this),a=i.data(o.keys.id);t(e).unbind(".fixedsticky"+a),i.removeData([o.keys.offset,o.keys.position,o.keys.id]).removeClass(o.classes.active).removeClass(o.classes.inactive).next("."+o.classes.clone).remove()})},init:function(i){var a=t(i);return o.bypass()?a:a.each(function(){var i=this,r=n++;t(this).data(o.keys.id,r),t(e).bind("scroll.fixedsticky"+r,function(){o.update(i)}).trigger("scroll.fixedsticky"+r),t(e).bind("resize.fixedsticky"+r,function(){a.is("."+o.classes.active)&&o.update(i)})})}};e.FixedSticky=o,t.fn.fixedsticky=function(e){if("function"==typeof o[e])return o[e].call(o,this);if("object"!==(void 0===e?"undefined":_typeof(e))&&e)throw new Error("Method `"+e+"` does not exist on jQuery.fixedsticky");return o.init.call(o,this)},e.FixedFixed||t(e.document.documentElement).addClass(o.classes.withoutFixedFixed)}(window,jQuery),function(e,t,i,a){e=t.extend(!0,e,{SearchFilters:{Enums:{}}});var n={};n={initialize:function(e){n.checkRecentSalesSearch(e)&&(n.eSearchCriteriaType=t.extend(!0,{},n.eSearchCriteriaType,n.ePriceRecentSales))},eSearchCriteriaType:{BEDS:4,BATHS:5,IS_NEW_LISTING:8,CATEGORY_TYPE:18,NEW_LISTING_DAYS:216,DATE_AVAILABLE:650,SUBDIVISION:2491,SEARCH_TYPE:3875,KEYWORDS:3877,PRICE_MIN:3878,PRICE_MAX:3879},eSearchType:{AGENT_LISTINGS:2,OFFICE_LISTINGS:18,ADDRESS_FOR_SALE:42,ADDRESS_FOR_RENT:43,ADDRESS_RECENT_SALES:44,MLS_ALL:45,MLS_FOR_SALE:46,MLS_FOR_RENT:47,MLS_RECENT_SALES:48,LOCATION_FOR_SALE:35,LOCATION_FOR_RENT:38,LOCATION_RECENT_SALES:39},eEntityId:{ENTITY_IS_ADDRESS:-3,ENTITY_IS_MLS:-1,ENTITY_IS_ZIPCODE:5},eRangeCriteria:{minAcreage:715,maxAcreage:714},eEvents:{PSR_FILTERS_READY:"nrt:psr:search:filters:ready",SUGGESTED_LOCATION_TOGGLE:"nrt:search:suggested:location:toggle",FETCH_SUCCESS:"nrt:search:getsearchresultsurl:fetch:success",FETCH_SUCCESS_SAVE:"nrt:search:getsearchresultsurl:fetch:success:save",FETCH_SUCCESS_LOAD:"nrt:search:getsearchresultsurl:fetch:success:load",QUEUE_CLEARED:"nrt:search:getsearchresultsurl:queue:cleared",CRITERIA_EXISTS:"nrt:search:criteria:collection:exists",CRITERIA_ADDED:"nrt:search:criteria:collection:added",CRITERIA_INVALID:"nrt:search:criteria:collection:invalid",CRITERIA_REMOVED:"nrt:search:criteria:collection:removed",CRITERIA_CLEARED:"nrt:search:criteria:collection:cleared",NEARBY_LOCATIONS_COMPLETE:"nrt:search:nearbylocations:complete",LOCATION_EXISTS:"nrt:search:locations:collection:exists",LOCATION_ADDED:"nrt:search:locations:collection:added",LOCATION_INVALID:"nrt:search:locations:collection:invalid",LOCATION_REMOVED:"nrt:search:locations:collection:removed",LOCATION_PRIMARY_CHANGED:"nrt:search:locations:collection:primary:changed",LOCATION_CLEARED:"nrt:search:locations:collection:cleared",LOCATION_MATCH_COMPLETE:"nrt:search:locationmatch:complete",animationEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"},eLocationTypeLabels:{CITY:"City",COMMUNITY:"Community",STREET:"Street",SCHOOL_DISTRICT:"School District",COUNTY:"County",ZIPCODE:"Zip Code",SCHOOL:"School",MLS_NUMBER:"MLSNumber",NEARBY:"Nearby",LOCATIONS:"Locations",HISTORY:"History"},ePriceRecentSales:{PRICE_MIN:3990,PRICE_MAX:3991},ePriceDealPending:{PRICE_MIN:3878,PRICE_MAX:3879},eIntegerLimits:{MIN:0,MAX:2147483647},eUserSearchType:{FOR_SALE:1,FOR_RENT:2,RECENT_SALES:3},eUserCategoryType:{RESIDENTIAL:1,COMMERCIAL_INVESTMENT:2,LAND_FARM:3},mapInputToSearchType:function(e,t){if(n.checkAddressSearch(t))switch(e){case n.eUserSearchType.FOR_SALE:return n.eSearchType.ADDRESS_FOR_SALE;case n.eUserSearchType.FOR_RENT:return n.eSearchType.ADDRESS_FOR_RENT;case n.eUserSearchType.RECENT_SALES:return n.eSearchType.ADDRESS_RECENT_SALES;default:return console.warn("NRT.Search.Filters.Enums.mapInputToSearchType: Unrecognized input",e),t}else if(n.checkMlsSearch(t))switch(e){case n.eUserSearchType.FOR_SALE:return n.eSearchType.MLS_FOR_SALE;case n.eUserSearchType.FOR_RENT:return n.eSearchType.MLS_FOR_RENT;case n.eUserSearchType.RECENT_SALES:return n.eSearchType.MLS_RECENT_SALES;default:return console.warn("NRT.Search.Filters.Enums.mapInputToSearchType: Unrecognized input",e),t}else{if(!n.checkLocationSearch(t))return console.warn("NRT.Search.Filters.Enums.mapInputToSearchType: currentSearchType not recognized",t),t;switch(e){case n.eUserSearchType.FOR_SALE:return n.eSearchType.LOCATION_FOR_SALE;case n.eUserSearchType.FOR_RENT:return n.eSearchType.LOCATION_FOR_RENT;case n.eUserSearchType.RECENT_SALES:return n.eSearchType.LOCATION_RECENT_SALES;default:return console.warn("NRT.Search.Filters.Enums.mapInputToSearchType: Unrecognized input",e),t}}},checkLocationSearch:function(e){return e===n.eSearchType.LOCATION_FOR_SALE||e===n.eSearchType.LOCATION_FOR_RENT||e===n.eSearchType.LOCATION_RECENT_SALES},checkAddressSearch:function(e){return e===n.eSearchType.ADDRESS_FOR_SALE||e===n.eSearchType.ADDRESS_FOR_RENT||e===n.eSearchType.ADDRESS_RECENT_SALES},checkMlsSearch:function(e){return e===n.eSearchType.MLS_ALL||e===n.eSearchType.MLS_FOR_SALE||e===n.eSearchType.MLS_FOR_RENT||e===n.eSearchType.MLS_RECENT_SALES},checkAllSearch:function(e){return e===n.eSearchType.MLS_ALL},checkForSaleSearch:function(e){return e===n.eSearchType.LOCATION_FOR_SALE||e===n.eSearchType.ADDRESS_FOR_SALE||e===n.eSearchType.MLS_FOR_SALE},checkForRentSearch:function(e){return e===n.eSearchType.LOCATION_FOR_RENT||e===n.eSearchType.ADDRESS_FOR_RENT||e===n.eSearchType.MLS_FOR_RENT},checkRecentSalesSearch:function(e){return e===n.eSearchType.LOCATION_RECENT_SALES||e===n.eSearchType.ADDRESS_RECENT_SALES||e===n.eSearchType.MLS_RECENT_SALES}},e.SearchFilters.Enums=n}(window.NRT,jQuery,document),function(e,t){var i,a={};i={Load:function(e){a.clear(),a.load(e)},Add:function(t){t=e.SearchCriteriaCommon.StandardizeCriterion(t),a.add(t)},AddRaw:function(i,n,o,r){var s=e.SearchCriteriaCommon.CreateCriterion(i,n,o,r);s?a.add(s):t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_INVALID,s)},Remove:function(t){t=e.SearchCriteriaCommon.StandardizeCriterion(t),a.remove(t)},RemoveRaw:function(i,n,o,r){var s=e.SearchCriteriaCommon.CreateCriterion(i,n,o,r);s?a.remove(s):t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_INVALID,s)},Count:function(){var e=0;return a.criteria&&(e=a.criteria.length),e},FilteredMobileCriteriaCount:function(){var t=null;return a.uncountedMobileCriteriaIds&&0!==a.uncountedMobileCriteriaIds.length||(t=e.SearchFilters.Enums.eSearchCriteriaType,a.uncountedMobileCriteriaIds=[t.SEARCH_TYPE,t.CATEGORY_TYPE,t.SUBDIVISION,t.IS_NEW_LISTING]),a.getfilteredCriteriaCount(a.uncountedMobileCriteriaIds)},FilteredDesktopCriteriaCount:function(){var t=null;return a.uncountedDesktopCriteriaIds&&0!==a.uncountedDesktopCriteriaIds.length||(t=e.SearchFilters.Enums.eSearchCriteriaType,a.uncountedDesktopCriteriaIds=[t.SEARCH_TYPE,t.SUBDIVISION,t.CATEGORY_TYPE,t.PRICE_MIN,t.PRICE_MAX,t.BEDS,t.BATHS,t.IS_NEW_LISTING]),a.getfilteredCriteriaCount(a.uncountedDesktopCriteriaIds)},GetCriteria:function(){return t.extend(!0,[],a.criteria)},Clear:function(){a.clear(),t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_CLEARED)},Replace:function(e){a.replace(e)},UpdatePrices:function(e,t){a.updatePrices(e,t)}},a={criteria:[],uncountedMobileCriteriaIds:[],uncountedDesktopCriteriaIds:[],getfilteredCriteriaCount:function(e){return t.map(a.criteria,function(i){if(-1===t.inArray(i.id,e))return i}).length},clear:function(){a.criteria=[]},load:function(e){var t,i=e?e.length:0;if(i>0)for(t=0;t<i;t+=1)a.add(e[t])},add:function(i){e.SearchCriteriaCommon.ContainsCriterion(a.criteria,i)?(t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_EXISTS,i),e.Utility.LogConsole("nrt.SearchCriteriaCollection.add: CRITERIA_EXISTS, criterion not added to collection, criterion = "+JSON.stringify(i))):(e.Utility.LogConsole("nrt.SearchCriteriaCollection.add: add criterion to collection, criterion = "+JSON.stringify(i)),a.criteria.push(i),e.Utility.LogConsole("nrt.SearchCriteriaCollection.add: this is the collection now = "+JSON.stringify(a.criteria)),t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_ADDED,i))},remove:function(i){var n,o=a.criteria.length;if(e.SearchCriteriaCommon.ContainsCriterion(a.criteria,i)){for(n=0;n<o;n+=1)if(e.SearchCriteriaCommon.AreCriteriaEqual(a.criteria[n],i)){a.criteria.splice(n,1),e.Utility.LogConsole("nrt.SearchCriteriaCollection.remove: this is the collection now = "+JSON.stringify(a.criteria));break}t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_REMOVED,i)}},replace:function(e){var t,i=a.criteria.length,n=!1;for(t=0;t<i;t+=1)if(e.id===a.criteria[t].id){a.criteria.splice(t,1),a.criteria.push(e),n=!0;break}n||a.add(e)},updatePrices:function(i,n){var o=e.SearchFilters.Enums.eSearchCriteriaType.PRICE_MIN,r=e.SearchFilters.Enums.eSearchCriteriaType.PRICE_MAX,s=a.criteria.filter(function(e){return e.id!==o&&e.id!==r}),l=[];""!==i&&(l=l.concat([{id:o,value:null,name:"PriceMin",valueId:i}])),""!==n&&(l=l.concat([{id:r,value:null,name:"PriceMax",valueId:n}])),a.criteria=s.concat(l),t(document).trigger(e.SearchFilters.Enums.eEvents.CRITERIA_ADDED,l)}},e.SearchCriteriaCollection=i}(window.NRT,jQuery),function(e){var t,i={};t={IsValidCriterion:function(e,t,a,n){return i.isValidCriterion(e,t,a,n)},CreateCriterion:function(e,t,a,n){return i.createCriterion(e,t,a,n)},AreCriteriaEqual:function(e,t){return i.areCriteriaEqual(e,t)},ContainsCriterion:function(e,t){return i.containsCriterion(e,t)},StandardizeCriterion:function(e){return i.standardizeCriterion(e)}},i={requiresValueText:function(e){return[3,9,11,3877].indexOf(e)>-1},isValidCriterion:function(t,a,n,o){var r=!1,s=e.SearchFilters.Enums,l=t===s.eSearchCriteriaType.PRICE_MIN||t===s.eSearchCriteriaType.PRICE_MAX||t===s.eSearchCriteriaType.DATE_AVAILABLE;return t>=0&&n>=-1&&(i.requiresValueText(t)?o&&(r=!0):o||!l&&0===n||(r=!0)),r},createCriterion:function(e,t,a,n){var o;return i.isValidCriterion(e,t,a,n)?(o={id:e,value:n,name:t,valueId:a},o=i.standardizeCriterion(o)):o=null,o},areCriteriaEqual:function(e,t){var a=!1;return e&&t&&(i.requiresValueText(e.id)||i.requiresValueText(t.id)?e.value&&t.value&&(a=e.id===t.id&&e.name===t.name&&e.valueId===t.valueId&&e.value===t.value):e.value||t.value||(a=e.id===t.id&&e.name===t.name&&e.valueId===t.valueId)),a},containsCriterion:function(e,t){var a,n,o=!1;if(e&&e.length&&t)for(n=e.length,a=0;a<n&&!(o=i.areCriteriaEqual(e[a],t));a+=1);return o},standardizeCriterion:function(e){return e&&e.value&&0===e.length&&(e.value=null),e}},e.SearchCriteriaCommon=t}(window.NRT),function(e){var t,i={};t={GetLocationMatch:function(e){i.getLocationMatch(e)}},i={getLocationMatch:function(t){var i,a;a=e.Utility.AssembleUrl(["location","getlocationmatch"])+"?searchTerm="+encodeURIComponent(t),$.ajax({type:"GET",url:a}).done(function(a){a&&((i=a).searchTerm=t),$(document).trigger(e.SearchFilters.Enums.eEvents.LOCATION_MATCH_COMPLETE,i)})}},e.SearchLocationsMatch=t}(window.NRT),function(e){var t,i={};t={GetLocations:function(e,t,a,n,o){return i.getLocations(e,t,a,n,o)}},i={defaultNumberOfRecordsDisplayed:5,getLocations:function(t,a,n,o,r){var s,l,c,d=[],u=0;l=5===t&&-2===a?parseInt(n):a,c=!o||o<1?2*i.defaultNumberOfRecordsDisplayed:2*o,s=e.Utility.AssembleUrl(["location","getnearbyentities"])+"?entitytype="+t+"&entityID="+l+"&numberOfRecords="+c,$.ajax({type:"GET",url:s}).done(function(t){if(t)if(r){for(;u<t.length;u++)if(e.SearchLocationsCommon.ContainsLocation(r,t[u]))e.Utility.LogConsole("NRT.SearchLocationsNearby.getLocations: location ignored: "+t[u].displayText);else if(d.push(t[u]),d.length===i.defaultNumberOfRecordsDisplayed)break}else d=t.length>i.defaultNumberOfRecordsDisplayed?t.slice(0,i.defaultNumberOfRecordsDisplayed):t;$(document).trigger(e.SearchFilters.Enums.eEvents.NEARBY_LOCATIONS_COMPLETE,[d])})}},e.SearchLocationsNearby=t}(window.NRT),function(e,t,i){var a,n={};a={checkHasPendingRequests:function(){return n.requestQueue.length>0},getSearchResultsUrl:function(i,a,o){if(0===i.locations.length)return null;var r=t.performance.now();n.requestQueue.push(r),i.groupId=o||n.eSearchCriteriaDefaults.groupId,e.Utility.LogConsole("NRT.SearchResultsUrl.getSearchResultsUrl: my.searchFilterInfo.groupId = "+i.groupId),$.ajax({url:e.Utility.AssembleUrl(["searchresults","getsearchresultsurl"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(i)}).done(function(t){t||e.Utility.LogConsole("NRT.SearchResultsUrl.getSearchResultsUrl: searchResultsUrl: NONE RETURNED"),n.checkIfMostRecentRequest(r)&&$(document).trigger(a,t),n.refreshQueue(r),0===n.requestQueue.length&&$(document).trigger(e.SearchFilters.Enums.eEvents.QUEUE_CLEARED)}).fail(function(t,i,a){n.refreshQueue(r),0===n.requestQueue.length&&$(document).trigger(e.SearchFilters.Enums.eEvents.QUEUE_CLEARED)}).fail(function(t,i,a){n.refreshQueue(r),0===n.requestQueue.length&&$(document).trigger(e.SearchFilters.Enums.eEvents.QUEUE_CLEARED),e.StatusSlider.ShowErrorSlider();var o="NRT.SearchResultsUrl.getSearchResultsUrl: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,o,t,i,a),e.Utility.LogConsole(o+": "+a),new Error(o)})}},n={requestQueue:[],checkIfMostRecentRequest:function(e){return-1!==n.requestQueue.indexOf(e)&&n.requestQueue.every(function(t){return e>=t})},refreshQueue:function(e){var t,i;n.requestQueue.sort(),(i=n.requestQueue.indexOf(e))>-1&&(t=i+1,n.requestQueue.splice(0,t))},eSearchCriteriaDefaults:{groupId:-1}},e.SearchResultsUrl=a}(window.NRT,window),function(e,t,i,a){e=t.extend(!0,e,{SearchFilters:{DidYouMean:function(){}}});var n={},o={};if(n={GetDidYouMeanAlert:o.createDidYouMeanAlert,GetDidYouMeanModal:o.createDidYouMeanModal,RemovePriorDidYouMean:function(){var e=t(o.selDymPanel);n.inferredLocation=null,e.length>0&&e.remove()},ChangeZone:function(i){var a,n=t(".did-you-mean-modal-container .did-you-mean-modal-location"),o=JSON.parse(n.data("location")),r=e.SearchFilters.Enums,s=o.entityId===r.eEntityId.ENTITY_IS_MLS;e.SearchCriteriaCollection.Clear(),e.SearchCriteriaCollection.Add({id:r.eSearchCriteriaType.SEARCH_TYPE,value:null,name:"",valueId:r.eUserSearchType.FOR_SALE}),e.SearchCriteriaCollection.Add({id:r.eSearchCriteriaType.CATEGORY_TYPE,value:null,name:"Property category",valueId:r.eUserCategoryType.RESIDENTIAL}),e.SearchLocationsCollection.Clear(),a=jQuery.extend({},e.SearchFilters.getSearchFilterInfo(),{zone:o.zone,searchId:null,searchType:s?r.eSearchType.MLS_ALL:null,locations:[o]}),s||e.SearchLocationsCollection.Add(o),e.SearchResultsUrl.getSearchResultsUrl(a,r.eEvents.FETCH_SUCCESS_LOAD)},inferredLocation:null},o={initialize:function(){n.GetDidYouMeanAlert=o.createDidYouMeanAlert,n.GetDidYouMeanModal=o.createDidYouMeanModal,o.placePropertyAlert()},$TagLocationInput:null,selDymPanel:".dym.property-search-alert",createDidYouMeanAlert:function(e){var i=e.bestMatch&&e.bestMatch.displayText&&' We think you meant "'+e.bestMatch.displayText+'"'||"",a='You entered "'+e.searchTerm+'."'+i+"\n",n="",r=t("<div>");return e.similarMatches&&e.similarMatches.length&&(n="<br /> Did you mean: "+e.similarMatches.reduce(function(e,t){return e+o.createDidYouMeanChoice(t)},"")+"\n"),r.addClass("property-search-alert with-dismiss dym psr-panel"),r.html("<p>"+a+n+'<a style="cursor: pointer;" class="dismiss icon-cross dym-alert-close"><span class="visually-hidden">Dismiss</span></a></p>'),o.placePropertyAlert(r),null},placePropertyAlert:function(n,r){var s,l=t(".psr-search-filters-nav");if(n===a&&0===(n=t(o.selDymPanel)).length)return null;r===a&&(r=e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP),s=n.hasClass("dym-server-generated"),r||s||(l=t(".tags-holder")),l.append(n),e.HeaderEvent&&t(i).trigger(e.HeaderEvent.ALERT_CHANGE)},createDidYouMeanModal:function(e,i,a){var n,o=t(".did-you-mean-modal-container"),r=o.find(".js-did-you-mean-you-entered");return r.length>0&&r.remove(),i&&(n=t("<p>").addClass("modal-paragraph js-did-you-mean-you-entered").html('You entered "<span class="did-you-mean-you-entered-location">'+a+'</span>"'),o&&o.insertBefore(n,o.find(".js-did-you-mean-you-entered"))),o.find(".did-you-mean-modal-location").text(e.displayText).data("location",JSON.stringify(e)),o.lightbox_me({centered:!0,closeClick:!1}),o},attemptToAddLocation:function(i){var r=t(this);i.preventDefault();var s,l=r.data("location"),c=e.SearchLocationsCollection.GetPrimaryZone(),d=e.SearchLocationsCollection.GetLocations();l.Zone!==a&&(l=e.SearchLocationsCommon.GetStandardizedCasing(l)),l.zone===c?(s=1===d.length?d[0]:n.inferredLocation,e.SearchLocationsCollection.Remove(s),e.SearchLocationsCollection.Add(l),e.SearchResultsUrl.getSearchResultsUrl(e.SearchFilters.getSearchFilterInfo(),e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_LOAD)):o.createDidYouMeanModal(l)},createDidYouMeanChoice:function(e){return e.displayText?e.displayText=e.displayText.replace(/'/g,"'"):e.Text&&(e.Text=e.Text.replace(/'/g,"'")),'<a class="dym-choice" data-preferred-zone="'+e.zone+"\" data-location='"+JSON.stringify(e).replace(/'/g,"&#39")+'\' href="" >'+e.displayText+"</a>? "}},e.Utility.BaseOrigin().PSR&&e.Global.Feature.UseNewPropertySearchFilters){var r=e.Utility.MediaQueryEvents.eEvents;o.initialize(),t(i).on(r.MQ_DESKTOP_ENTER,function(e){o.placePropertyAlert(a,!0)}).on(r.MQ_TABLET_ENTER+" "+r.MQ_MOBILE_ENTER,function(e){o.placePropertyAlert(a,!1)}).on("click",o.selDymPanel+" a.dym-choice",o.attemptToAddLocation).on("click",o.selDymPanel+" a.dym-alert-close",function(a){a.preventDefault(),t(this).parent().parent().remove(),e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP&&t(i).trigger(e.HeaderEvent.ALERT_CHANGE)}).on("click","#did-you-mean-modal-container .submit-btn",n.ChangeZone)}e.SearchFilters.DidYouMean=n}(window.NRT,jQuery,document),function(e,t,i,a,n){e=t.extend(!0,e,{SearchFilters:{Autocomplete:function(){}}});var o=function(){this.textBoxSelector=null,this.selectedObject=null,this.searchTerm=null,this.searchLocationLimit="All",this.returnSearchURL=!1,this.historyLocations=null,this.htmlEncode=function(e){return t("<div/>").html(e).text()}},r={primaryLocation:{zone:-1,entityType:-1,entityId:-1,displayText:null},numberOfRecords:0};o.prototype.initialize=function(i,n,o,s,l){var c=this,d=t(".js-did-you-mean-display-text"),u=e.SearchFilters.Enums.eLocationTypeLabels,h=[u.CITY,u.COMMUNITY,u.STREET,u.SCHOOL_DISTRICT,u.COUNTY,u.ZIPCODE,u.SCHOOL,u.MLS_NUMBER];r.primaryLocation=l,r.numberOfRecords=5,e.SearchFilters.initialLocationText=r.primaryLocation.displayText,d.length>0&&(e.SearchFilters.initialLocationText=d.data("location").Text),e.SearchLocationsHistory.Initialize(l.zone,l.entityType,l.entityId,e.SearchFilters.initialLocationText),c.historyLocations=t.map(e.SearchLocationsHistory.GetLocations(),function(e){return{history:!0,label:c.htmlEncode(e.displayText),value:e}}),this.textBoxSelector=i,this.returnSearchURL=o||!1,null!==s&&(this.searchLocationLimit=s),t.widget("custom.catcomplete",t.ui.autocomplete,{_renderMenu:function(i,a){var n,o=this,r="",s="";t.each(a,function(t,a){a.nearby&&r!==n?(n=u.NEARBY,r=n,s!==u.NEARBY&&(s=u.NEARBY,i.append('<strong class="meta-title">'+s+"</strong>"))):a.history?(n=u.HISTORY,r=n,s!==u.HISTORY&&(s=u.HISTORY,i.append('<strong class="meta-title">'+s+"</strong>"))):a.nearby||a.history||(n=h[a.value.entityType],41!==e.Profile.Zone||r===n||n!==u.CITY&&n!==u.COMMUNITY?r!==n&&(r=n,s=n,i.append('<strong class="meta-title">'+s+"</strong>")):(r=n,s!==u.LOCATIONS&&(s=u.LOCATIONS,i.append('<strong class="meta-title">'+s+"</strong>")))),o._renderItemData(i,a)}),t('<li class="tooltip-add-location-input"><span><i class="icon-info-circle"></i>You can search by city, neighborhood, county, address, zip code, schools or MLS#</span></li>').appendTo(i)},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(i,a){var n="";return e.SearchLocationsCommon.ContainsLocation(e.SearchLocationsCollection.GetLocations(),a.value)&&(n+="ui-state-disabled"),t("<li>").addClass(n).append(t("<a><strong>").text(a.label)).appendTo(i)}}),t(this.textBoxSelector).catcomplete({delay:250,minLength:0,source:function(i,n){var o=e.SearchFilters.Enums.checkLocationSearch(e.SearchFilters.getSearchFilterInfo().searchType);0===i.term.length&&e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP?(t(a).on(e.SearchFilters.Enums.eEvents.NEARBY_LOCATIONS_COMPLETE,function(e,i){n(t.map(i,function(e){return{nearby:!0,label:c.htmlEncode(e.displayText),value:e}}).concat(c.historyLocations))}),o&&e.SearchLocationsNearby.GetLocations(r.primaryLocation.entityType,r.primaryLocation.entityId,r.primaryLocation.displayText,r.numberOfRecords,null,e.SearchLocationsCollection.GetLocations)):i.term.length>=3?t.ajax({url:e.Utility.AssembleUrl(["quicksearch","getautocomplete"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({Text:i.term,SearchLocationLimit:c.searchLocationLimit,ReturnSearchURL:c.returnSearchURL})}).done(function(e){n(t.map(e.Hs,function(e){return{label:c.htmlEncode(e.Text),value:{zone:e.Zone,entityId:e.EntityId,entityType:e.EntityType,displayText:e.Text}}}))}).fail(function(t,i,a){var n="NRT.PropertySearchAutocomplete.initialize: save search: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+a),new Error(n)}):this.close()},appendTo:"#autocompletedropdown",select:function(i,a){var n=t(this),o="keydown"===i.originalEvent.originalEvent.type,r=i.keyCode||i.which,s=o&&(9===r||13===r||186===r),l="click"===i.originalEvent.originalEvent.type,d=null;return c.selectedObject=a.item.value,s&&(n.val(c.htmlEncode(a.item.label)),c.searchTerm=n.val()),(s||l)&&(d=e.SearchFilters.Enums.checkLocationSearch(e.SearchFilters.getSearchFilterInfo().searchType),!(c.selectedObject.entityId===e.SearchFilters.Enums.eEntityId.ENTITY_IS_ADDRESS)&&d?e.SearchFilters.pushAutocompleteLocationTag(c.selectedObject):e.SearchLocationsMatch.GetLocationMatch(c.selectedObject.displayText)),n.blur(),!1},focus:function(e,i){var a=t(this);return i.item&&e&&(38===e.keyCode||40===e.keyCode)&&a.val(c.htmlEncode(i.item.value.Text)),!1},open:function(){var e=t(".box-and-button").width(),i=t("#autocompletedropdown ul"),a=i.find(".tooltip-add-location-input"),n=i.width(),o=n;if(n<e&&(o=e),o<265&&(o=265),n>e&&n>265)return a.css("width",n+"px"),null;i.css("width",o+"px"),a.css("width",o+"px")},close:function(e,t){return!1}}).focus(function(){t("ul.ui-autocomplete").is(":hidden")&&t(this).data("custom-catcomplete").search(t(this).val())})},o.prototype.GetSearchTerm=function(){return null!==this.searchTerm?this.searchTerm:t(this.textBoxSelector).val()},o.prototype.GetSelectedObject=function(){return this.selectedObject},o.prototype.SetSearchLocationLimit=function(e){this.searchLocationLimit=e},o.prototype.DataProxy=function(e,t){},e.SearchFilters.Autocomplete=o}(window.NRT,jQuery,window,document),function(e,t,i,a){e=t.extend(!0,e,{SearchFilters:{PriceRange:{}}});var n={};n={list:null,ignoreBlur:!1,priceLabelClasses:["search-prices","js-price-filter-label","js-price-filter-arrow"],selWrapperSml:".price-range-sml",selInputMinSml:"#price-min-sml",selInputMaxSml:"#price-max-sml",$wrapperSml:null,$inputMinSml:null,$inputMaxSml:null,selWrapperLrg:".price-range-lrg",selInputMinLrg:"#price-min-lrg",selInputMaxLrg:"#price-max-lrg",selFilterLrg:'[data-label-for="price-filter"]',selPriceBoxContainerLrg:".psr-simple-filters .search-prices",$wrapperLrg:null,$inputMinLrg:null,$inputMaxLrg:null,$priceBoxContainerLrg:null,$filterLabelLrg:null,initialize:function(){n.$wrapperSml=t(n.selWrapperSml),n.$inputMinSml=t(n.selInputMinSml),n.$inputMaxSml=t(n.selInputMaxSml),n.$wrapperSml.on("touchend focus",n.selInputMinSml+","+n.selInputMaxSml,function(e){var i=t(this);i.val(i.val().replace(/,/g,"")),i.attr("type","number")}).on("blur",n.selInputMinSml+","+n.selInputMaxSml,n.handlePriceBlur).on("keydown",n.selInputMinSml+","+n.selInputMaxSml,function(i){var a=t(this),o=i.keyCode||i.which;13===o&&(a.is(n.selInputMinSml)?t(n.selInputMaxSml).focus():a.blur()),e.Utility.LogConsole("NRT.SearchFilters.PriceRange $wrapperSml:"+t(this).attr("id")+": keydown: "+o)}),n.$wrapperLrg=t(n.selWrapperLrg),n.$inputMinLrg=t(n.selInputMinLrg),n.$inputMaxLrg=t(n.selInputMaxLrg),n.$filterLabelLrg=t(n.selFilterLrg),n.$priceBoxContainerLrg=t(n.selPriceBoxContainerLrg),n.$inputMinLrg.autoNumeric("init",{vMin:"0",mDec:"0",vMax:"2147483647"}),n.$inputMaxLrg.autoNumeric("init",{vMin:"0",mDec:"0",vMax:"2147483647"}),n.$wrapperLrg.on("focus",n.selInputMinLrg+","+n.selInputMaxLrg,function(e){n.$wrapperLrg.parent()[0].classList.add("open")}).on("blur",n.selInputMinLrg+","+n.selInputMaxLrg,n.handlePriceBlur).on("keydown",n.selInputMinLrg+","+n.selInputMaxLrg,function(i){var a=t(this),o=i.keyCode||i.which;13===o&&(a.is(n.selInputMinLrg)?t(n.selInputMaxLrg).focus():(n.$wrapperLrg.parent(".search-prices").removeClass("open"),a.blur())),27===o&&a.blur(),e.Utility.LogConsole("NRT.SearchFilters.PriceRange $wrapperLrg:"+t(this).attr("id")+": keydown: "+o)}),e.Utility.LogConsole("NRT.SearchFilters.PriceRange.initialize: executed")},updatePriceRangeSml:function(t,i){n.$inputMinSml.attr("type","text").val(e.Utility.FormatCommas(t)),n.$inputMaxSml.attr("type","text").val(e.Utility.FormatCommas(i)),e.Utility.LogConsole("NRT.SearchFilters.PriceRange.updatePriceRangeSml: executed")},updatePriceRangeLrg:function(t,i){""===t?n.$inputMinLrg.val(""):n.$inputMinLrg.autoNumeric("set",t),""===i?n.$inputMaxLrg.val(""):n.$inputMaxLrg.autoNumeric("set",i),e.Utility.LogConsole("NRT.SearchFilters.PriceRange.updatePriceRangeLrg: executed")},updateFilterLabelLrg:function(t,i){var a="Any Price";t&&!i?a="$"+e.Utility.AbbreviateNumber(t)+"+":!t&&i?a="$0 - $"+e.Utility.AbbreviateNumber(i):t&&i&&(a="$"+e.Utility.AbbreviateNumber(t)+" - $"+e.Utility.AbbreviateNumber(i)),n.$filterLabelLrg[0].innerText=a,e.Utility.LogConsole("NRT.SearchFilters.PriceRange.updateFilterLabelLrg: executed")},checkIfLeavingPriceBox:function(e){return!e||"price-min-lrg"!==e.id&&"price-max-lrg"!==e.id&&-1===e.className.indexOf("search-prices")},textifyPriceInput:function(t){var i=t.val();t.attr("type","text").val(e.Utility.FormatCommas(""===i?"":parseInt(i,10)))},handlePriceBlur:function(i){var a=e.SearchFilters.Enums.eIntegerLimits,o="price-min-lrg"===i.target.id||"price-max-lrg"===i.target.id,r=o?n.$inputMinLrg.autoNumeric("get"):n.$inputMinSml.val().replace(/,/g,""),s=o?n.$inputMaxLrg.autoNumeric("get"):n.$inputMaxSml.val().replace(/,/g,""),l=""===r?r:Math.min(parseInt(r,10),a.MAX),c=""===s?s:Math.min(parseInt(s,10),a.MAX),d=i.relatedTarget&&i.relatedTarget.id&&"#"+i.relatedTarget.id,u=!d||d!==n.selInputMinLrg&&d!==n.selInputMinSml&&d!==n.selInputMaxLrg&&d!==n.selInputMaxSml,h=null,p=null;""!==l&&""!==c&&(h=l,p=c,l=Math.min(h,p),c=Math.max(h,p)),u?(n.updatePriceRangeSml(l,c),n.updatePriceRangeLrg(l,c),n.updateFilterLabelLrg(l,c),n.checkIfPriceChanged(l,c)&&e.SearchCriteriaCollection.UpdatePrices(l,c)):u||o||n.textifyPriceInput(t(i.target)),n.checkIfLeavingPriceBox(i&&i.relatedTarget)&&n.$wrapperLrg.parent().removeClass("open"),e.Utility.LogConsole("NRT.SearchFilters.PriceRange $wrapperSml:")},checkIfPriceChanged:function(t,i){var a=e.SearchFilters.Enums,n=e.SearchCriteriaCollection.GetCriteria(),o=n.filter(function(e){return e.id===a.eSearchCriteriaType.PRICE_MIN})[0],r=n.filter(function(e){return e.id===a.eSearchCriteriaType.PRICE_MAX})[0],s=!o&&""!==t||o&&"number"==typeof o.valueId&&o.valueId!==t,l=!r&&""!==i||r&&"number"==typeof r.valueId&&r.valueId!==i;return s||l}},e.Utility.BaseOrigin().PSR&&e.Global.Feature.UseNewPropertySearchFilters&&(n.initialize(),t(i).on("click",function(e){var a=n.$priceBoxContainerLrg.hasClass("open"),o=e.target.className,r=n.priceLabelClasses.some(function(e){return o.indexOf(e)>-1}),s=i.activeElement&&i.activeElement.id;!a||!r&&t(e.target).closest(n.selWrapperLrg).length?!a&&r&&(n.$wrapperLrg.show(),n.$inputMinLrg.focus(),n.$priceBoxContainerLrg.addClass("open")):(n.$priceBoxContainerLrg.removeClass("open"),!s||s!==n.selInputMinLrg.slice(1)&&s!==n.selInputMaxLrg.slice(1)||t(i.activeElement).blur())}),e.Utility.LogConsole("NRT.SearchFilters.PriceRange: events bound")),e.SearchFilters.PriceRange={}}(window.NRT,jQuery,document),function(e,t){e=t.extend(!0,e,{SearchFilters:{SaveSearch:{}}});var i,a={};i={initialize:function(e,t){a.init(e,t)},authenticateUserBeforeSaveSearch:function(i,n){var o=new e.HBIB.LoginAjax(a.$authFrm),r=a.$authDlg.find(".not-a-member a"),s=window.location,l=n||s.pathname;r.prop("href","/sign-up/?ReturnURL="+encodeURIComponent(l)),e.CompleteActionStorage.setItem("savesearch",{name:"savesearch",created:new Date,params:i}),o.BindForm(function(){a.isUserSignedIn=!0,a.$authDlg.trigger("close"),e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(document).trigger(e.Event.eAction.USER_SIGNIN,["manual","modal_prompt",i]),e.session.item("LoggedInStatus","ManualLoggedIn")),e.SearchFilters.reloadSearchFilters(l)}),e.FacebookLogin.Initialize({clickSelector:".account-sign-in-modal .facebook-signin",onLogin:function(){e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(document).trigger(e.Event.eAction.USER_SIGNIN,["fb_manual","modal_prompt",i]),e.session.item("LoggedInStatus","FBLoggedIn")),a.isUserSignedIn=!0,e.SearchFilters.reloadSearchFilters(l)},returnUrl:encodeURIComponent(l),cancelUrl:encodeURIComponent(s.pathname+s.search)}),a.$body.hasClass("modal-open")&&a.$body.addClass("double-modal-open"),a.$authDlg.lightbox_me({centered:!0,closeEsc:!0,closeClick:!1,onClose:function(){a.$body.hasClass("double-modal-open")&&a.$body.removeClass("double-modal-open"),a.isUserSignedIn||e.CompleteActionStorage.removeItem("savesearch"),o.ResetForm()}})},showSaveSearchWithAlertsCheckModal:function(e){var t={centered:!0,closeEsc:!0,closeClick:!1,onClose:function(){a.$saveSearchWithAlertsCheckDlg.find("#result").val("").addClass("hide")},onLoad:function(){a.$saveSearchWithAlertsCheckDlg.find("input.js-search-name-alert-check").val("").focus().end().find("input#IsOverride").val(!1).end().data("origin",e)}};a.$saveSearchWithAlertsCheckDlg.lightbox_me(t)},showSavedSearchAlertPreferencesModal:function(i,n){var o=a.$body.hasClass("modal-open"),r=window.outerWidth>window.outerHeight&&e.Utility.MediaQueryEvents.currentDisplayMode<e.Utility.MediaQueryEvents.eCurrentDisplayMode.TABLET,s=null,l={centered:!1,closeEsc:!0,closeClick:!1,onClose:function(){a.$savedSearchAlertPreferencesDlg.find("#result").val("").addClass("hide"),o?a.$body.removeClass("double-modal-open"):r&&(t("html,body").removeClass("modal-open"),a.$body.removeClass("double-modal-open"))},onLoad:function(){a.$savedSearchAlertPreferencesDlg.data("origin",i)}};a.$savedSearchAlertPreferencesDlg.find("p.search-name span").html(n).end().find("input#SearchName:hidden").val(n),s=Math.max((window.innerHeight-a.$savedSearchAlertPreferencesDlg.height())/2,50),o?(s=50,l.clipHeaderPadding=!0,a.$body.addClass("double-modal-open")):r&&(s=50,l.clipHeaderPadding=!0,t("html,body").addClass("modal-open"),a.$body.addClass("double-modal-open")),l.modalCSS={top:s+"px",position:"fixed"},a.$savedSearchAlertPreferencesDlg.lightbox_me(l)}},a={$authDlg:null,$authFrm:null,$saveSearchWithAlertsCheckDlg:null,$savedSearchAlertPreferencesDlg:null,subscriberIsActive:!1,subscriberIsAuthenticated:!1,isUserSignedIn:!1,$body:t("body"),init:function(i,n){var o;a.subscriberIsActive=i,a.subscriberIsAuthenticated=n,a.$authDlg=t("#authdialog"),a.$authFrm=a.$authDlg.find("form"),a.$saveSearchWithAlertsCheckDlg=t("#saveSearchWithAlertsCheckModal"),t.validator.unobtrusive.parse("#SaveSearchWithAlertsCheckForm"),e.Validate.Unobtrusive.Parse("#SaveSearchWithAlertsCheckForm"),a.$savedSearchAlertPreferencesDlg=t("#savedSearchAlertPreferencesModal"),t.validator.unobtrusive.parse("#SavedSearchAlertPreferencesForm"),e.Validate.Unobtrusive.Parse("#SavedSearchAlertPreferencesForm"),a.prepareEvents(),null!==(o=e.session.get("pdModal"))&&!0===o.isSyncing&&(null!==history.state?(e.PropertyDetailModal.saveState(window.location.href,history.state.depth,!1),ioc("app.events").once(e.SearchMapEvent.PROPERTY_MARKERS_ADDED,function(){history.go(o.depth)})):(e.PropertyDetailModal.saveState(window.location.href,o.depth,!1),ioc("app.events").once(e.SearchMapEvent.PROPERTY_MARKERS_ADDED,function(){e.PropertyDetailModal.open(o.urls[o.depth])})))},prepareEvents:function(){var n,o,r,s,l,c,d,u=new e.HBIB.LoginAjax(a.$authFrm),h=window.location;t(document).on("click",".vow-signin",function(e){e.preventDefault(),u.BindForm(function(){h.reload()}),a.$body.hasClass("modal-open")&&a.$body.addClass("double-modal-open"),a.$authDlg.lightbox_me({centered:!0,closeEsc:!0,closeClick:!1,onClose:function(){u.ResetForm(),a.$body.hasClass("double-modal-open")&&a.$body.removeClass("double-modal-open")}})}),t("#SaveSearchWithAlertsCheckForm").on("submit",function(a){a.preventDefault(),o=t("#saveSearchWithAlertsCheckModal"),(s=t(this)).valid()&&(c={searchId:e.SearchFilters.getSearchFilterInfo().searchId,savedSearchName:s.find("input[name=SearchName]").val(),IsOverride:s.find("input[name=IsOverride]").val(),AddEmailAlertsPreferences:s.find("input[name=AddEmailAlertsPreferences]").val()},t.ajax({url:e.Utility.AssembleUrl(["subscriber","psrfilterssavesearch"]),method:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(c)}).done(function(a){n=t("#save-search-overwrite-modal"),a.success?(d=o.data("origin"),e.StatusSlider.ShowStatusSlider(a.message),n.trigger("close"),o.trigger("close"),s.find("#chkEmailAlerts").is(":checked")&&i.showSavedSearchAlertPreferencesModal(d,a.searchName),t(document).trigger(e.Event.eAction.SEARCH_SAVED,[d])):a.showOverride&&(t("#save-search-overwrite").submit(function(e){e.preventDefault(),s.find("#IsOverride").val(!0).submit()}).find('input[type="reset"]').click(function(){i.showSaveSearchWithAlertsCheckModal(d)}).end().find("#new-search-name").text(a.searchName),o.trigger("close"),n.lightbox_me({centered:!0,closeEsc:!0,closeClick:!1}))}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider(),o.trigger("close")}))}),t("#SavedSearchAlertPreferencesForm").on("submit",function(i){if(i.preventDefault(),r=t("#savedSearchAlertPreferencesModal"),(l=t(this)).valid()){var a=JSON.stringify(e.AlertPreferences.getSavedSearchAlertPreferences(l));t.ajax({url:e.Utility.AssembleUrl(["subscriber","savedsearchalertpreferences"]),method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:a}).done(function(i){i.success?(d=r.data("origin"),e.StatusSlider.ShowStatusSlider(i.message),t(document).trigger(e.Event.eAction.SEARCH_ALERTS_SAVED,[d])):e.StatusSlider.ShowErrorSlider()}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider()}).always(function(){r.trigger("close"),t("#SavedSearchAlertPreferencesForm")[0].reset()})}}).find('input[type="reset"]').click(function(){t("#SavedSearchAlertPreferencesForm")[0].reset()})}},e.Utility.BaseOrigin().PSR&&e.Global.Feature.UseNewPropertySearchFilters,e.SearchFilters.SaveSearch=i}(window.NRT,jQuery),function(e,t,i,a,n){e=t.extend(!0,e,{SearchFilters:{PriceDropdown:function(){}}});var o={},r={Initialize:function(){var i=e.SearchFilters.Enums,a=(i.eLocationTypeLabels,e.SearchFilters.getSearchFilterInfo().searchType),n=i.checkForRentSearch(a)?o.priceGroupsRent:o.priceGroupsBuy;o.minSteps=[n[0].bound].concat(o.makeStepsUp(n,n[0].bound).slice(0,o.stepsInDropdown-1)),o.setSelectors(),t.widget("custom.catcomplete",t.ui.autocomplete,{_renderMenu:function(e,i){var a=this,n="price-max-lrg"===this.element[0].id;t.each(i,function(t,i){a._renderItemData(e,i,n)})},_renderItem:function(e,i,a){var n="";return""===i.label&&(n+=" ui-state-disabled"),a&&(n+=" dropdown-price-max"),t("<li class="+n+">").addClass(n).append(t("<a><strong>").text(i.label)).appendTo(e)},_renderItemData:function(e,t,i){return this._renderItem(e,t,i).data("ui-autocomplete-item",t)}}),o.$priceInputs.catcomplete({delay:250,minLength:0,source:function(t,i){var a=e.SearchFilters.getSearchFilterInfo().searchType,n=e.SearchFilters.Enums.checkForRentSearch(a)?o.priceGroupsRent:o.priceGroupsBuy,r="price-max-lrg"===this.element[0].id,s=null,l=parseInt(o.$priceMinLrg.val().replace(/,/g,""),10)||0,c=parseInt(o.$priceMaxLrg.val().replace(/,/g,""),10)||0,d=l,u=[];if(r)s=o.makeStepsUp(n,d).map(function(e,t,i){return o.mapStepToDropdownItem(e,t,i,r)}).slice(0,o.stepsInDropdown-1).concat({label:"Any Price",value:""});else s=o.minSteps.map(function(e,t,i){return o.mapStepToDropdownItem(e,t,i,r)});if(o.stepsInDropdown-s.length>0){for(var h=0;h<o.stepsInDropdown-s.length;h+=1)u=u.concat([{label:"",value:r?c:l}]);s=s.concat(u)}i(s)},appendTo:".price-range-lrg",select:function(e,i){var a=t(this),n="keydown"===e.originalEvent.originalEvent.type,r=e.keyCode||e.which,s=n&&(9===r||13===r||186===r),l="click"===e.originalEvent.originalEvent.type,c="price-max-lrg"===e.target.id;return(s||l)&&a.val(o.htmlEncode(i.item.value)),l&&(c?a.blur():(o.isClickTransitionToMax=!0,o.$priceMaxLrg.focus())),!1},focus:function(e,i){var a=t(this);return i.item&&e&&(38===e.keyCode||40===e.keyCode)&&a.val(o.htmlEncode(i.item.value.Text)),!1},open:function(e,t){var i=Math.max(o.$dropdownContainer.outerHeight(),50),a=o.$dropdownContainer.find("ul");e.target.id;a.css({width:"100%",left:"0px",top:i})},close:function(e,i){return o.isClickTransitionToMax?o.isClickTransitionToMax=!1:t(this).data("custom-catcomplete").search(t(this).val()),!1}}).focus(function(){var e=o.$dropdownContainer.find("ul"),i=t(this).data("custom-catcomplete");e.hide(),t(i.menu.element[0]).show(),e.is(":hidden")&&i.search(t(this).val())}),o.$dropdownContainer.find("ul").attr({tabIndex:-1})}};o={$priceMinLrg:null,$priceMaxLrg:null,$dropdownContainer:null,$priceInputs:null,setSelectors:function(){o.$priceMinLrg=t("#price-min-lrg"),o.$priceMaxLrg=t("#price-max-lrg"),o.$dropdownContainer=t(".price-range-lrg"),o.$priceInputs=t(".price-range-lrg .price-input")},isClickTransitionToMax:!1,htmlEncode:function(e){return t("<div/>").html(e).text()},priceLimits:{min:0,max:2147483647},priceGroupsRent:[{bound:0,step:250},{bound:2e3,step:500},{bound:1e4,step:1e3}],minSteps:null,stepsInDropdown:10,priceGroupsBuy:[{bound:0,step:5e4},{bound:1e6,step:1e5},{bound:5e6,step:25e4}],mapStepToDropdownItem:function(t,i,a,n){return{label:t>0?e.Utility.FormatCurrency(t,!1,"$")+(n?"":"+"):"0",value:t}},makeStepsUp:function(e,t,i){return o.makeSteps(e,t,i,!0)},makeStepsDown:function(e,t,i){var a=e.slice().reverse();return o.makeSteps(a,t,i,!1)},makeSteps:function(e,t,i,a){var r,s,l;if(i===n&&(i=[]),e===n||t===n)return console.warn("must pass in priceGroups, number, newSteps (optional), and goingUp but received","priceGroups:",e,"number:",t,"newSteps:",i,"goingUp:",a),null;var c=e.filter(function(e,i,n){var r=n[i+1],s=r&&r.bound||(a?o.priceLimits.max:o.priceLimits.min),l=i+1===n.length,c=t>=e.bound,d=(a?t<s:t>=e.bound)||l;return c&&d})[0];e.filter(function(e,t,i){return c.bound===(i[t-1]&&i[t-1].bound)})[0];return l=(r=a?t+c.step:t-c.step)>=o.priceLimits.max,s=r<=o.priceLimits.min,l?a?i.concat(Math.min(o.priceLimits.max,r)):o.makeSteps(e,o.priceLimits.max-c.step,i.concat(o.priceLimits.max-c.step),a):s?a?o.makeSteps(e,o.priceLimits.min+c.step,i.concat(o.priceLimits.min+c.step),a):i.concat(Math.max(o.priceLimits.min,r)):i.concat(r).length===o.stepsInDropdown?i.concat(r):o.makeSteps(e,r,i.concat(r),a)}},e.SearchFilters.PriceDropdown=r}(window.NRT,jQuery,window,document),function(e,t,i,a,n){var o={},r={};o={historyLocations:null,initialLocations:[],initialize:function(e,t,i){r.init(e,t,i)},pushAutocompleteLocationTag:function(e){r.pushAutocompleteLocationTag(e)},quickSearch:function(i,a,o){o===n&&(o=e.Utility.GenerateOnAjaxError("SearchFilters.ChangeZone")),t.ajax({url:e.Utility.AssembleUrl(["quicksearch","getsearchresultsurl"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({searchTerm:i})}).done(a).fail(o)},getSearchFilterInfo:function(){return t.extend(!0,{},r.searchFilterInfo)},getCurrentSearchResultsUrlInfo:function(){return r.currentSearchResultsUrlInfo},reloadSearchFilters:function(t){1===e.Helpers.UrlQueryVar("g",0)&&e.session.set("syncGeoSearch",!0),i.location.href=t}},r={$LocationInput:null,$TagKeywordInput:null,$TagLocationInput:null,$authenticationDialog:null,$authenticationDialogForm:null,$desktopLocationCounts:null,$mobileLocationCounts:null,$newListingDropdownInput:null,$pageHeader:null,$tagsHolder:null,currentScrollPosition:null,currentSearchResultsUrlInfo:null,isAddressOrMlsSearch:null,modalLayerAnimationSpeed:"animated-half-duration",searchFilterInfo:null,searchFiltersAutocomplete:{},subscriberIsActive:!1,subscriberIsAuthenticated:!1,Login:null,tagControlSettings:{AjaxPush:null,AjaxPushAllTags:null,AjaxPushParameters:null,delimiters:[13,59],backspace:[8],deleteTagsOnBackspace:!1,tagCloseIcon:"",tagClassAddAnimate:e.Global.Feature.UseNewPropertySearchFiltersMVP2?"":"pulse",tagClassRemoveAnimate:"zoomOut",validator:null,onlyTagList:!1,tagClass:"psr-filter-tag animated-half-duration",blinkClass:"pulse psr-filter-tag-exists"},init:function(s,l,c){var d,u=t("#Keywords").length?JSON.parse(t("#Keywords").val())||"[]":"",h=e.SearchFilters.Enums;c.criteria=c.criteria.filter(function(t){return t.id!==e.SearchFilters.Enums.eSearchCriteriaType.SUBDIVISION}),r.subscriberIsActive=s,r.subscriberIsAuthenticated=l,e.SearchFilters.SaveSearch.initialize(s,l),t(a).on(e.SearchFilters.Enums.eEvents.FETCH_SUCCESS,function(e,t){r.currentSearchResultsUrlInfo=t}).on(e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_LOAD,function(e,t){r.currentSearchResultsUrlInfo=t,o.reloadSearchFilters(r.currentSearchResultsUrlInfo.url)}),r.$mobileLocationCounts=t(".psr-search-mobile-nav .nav-button .location-count, .modal-location-count .location-count"),r.$desktopLocationCounts=t(".js-more-locations-count"),r.$TagLocationInput=t("#location-search.location-add-input"),r.$pageHeader=t(".page-header"),r.$tagsHolder=t(".tags-holder"),r.searchFilterInfo=c,r.isAddressOrMlsSearch=e.SearchFilters.Enums.checkAddressSearch(c.searchType)||e.SearchFilters.Enums.checkMlsSearch(c.searchType),e.SearchResultsUrl.getSearchResultsUrl(c,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS),r.populateCollections(),r.updateCriteriaCount(),d=r.searchFilterInfo.locations[0],c.searchType!==h.eSearchType.AGENT_LISTINGS&&c.searchType!==h.eSearchType.OFFICE_LISTINGS&&(r.searchFiltersAutocomplete=new e.SearchFilters.Autocomplete,r.searchFiltersAutocomplete.initialize(r.$TagLocationInput,!0,!1,null,d)),e.Global.Feature.UseNewPropertySearchFiltersMVP2&&e.SearchFilters.PriceDropdown.Initialize(),t(a).on("click",".save-search .psr-filters-save-search",t.proxy(r.onSaveSearchClick,this)),t(i).on("resize",function(t,i){e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP&&e.Utility.Throttle(r.taggingOverflow(),250)}),r.$TagLocationInput.one("tm:loaded",function(i,a){t(".location-tagging").on("click",".more-location-tags",function(e,i){var a=t(".js-more-locations-tags");["js-more-locations-count","js-more-locations-text","js-more-locations-arrow","js-more-locations-tags"].some(function(t){return-1!==e.target.className.indexOf(t)})&&(t(".tags-overflow").slideToggle(),a.hasClass("open")?a.removeClass("open"):a.addClass("open"))}),e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP&&r.taggingOverflow(),r.updateMobileLocationCount()}).on("tm:pushed tm:spliced tm:splicing",function(t,i){var a,n,o=null;if(e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP&&e.Utility.Throttle(r.taggingOverflow(),250),r.updateMobileLocationCount(),"tm:spliced"===t.type&&-1!==t.target.className.indexOf("location-add-input")){for(n=(o=e.SearchLocationsCollection.GetLocations()).length,a=0;a<n;a+=1)if(i===o[a].displayText){e.SearchLocationsCollection.Remove(o[a]);break}e.Utility.LogConsole("NRT.SearchFilters.poptag: "+i+" |evt: "+t.type+" |tags: "+r.$TagLocationInput.tagsManager("tags"))}}).on("keydown",function(t){var i=t.key||t.keyCode||t.which,a=t.target,n=a&&a.value||"",o=a&&"location-search"===a.id;i&&("Enter"===i||";"===i||13===i||186===i)&&o&&n.length>0&&e.SearchLocationsMatch.GetLocationMatch(n)}),r.isAddressOrMlsSearch||(r.$TagLocationInput.tagsManager(t.extend(!0,{},r.tagControlSettings,{prefilled:o.initialLocations||[],tagsContainer:".tags-holder"})),e.Global.Feature.UseNewPropertySearchFiltersMVP2&&(r.$TagLocationInput.data("opts",t.extend(!0,{},r.$TagLocationInput.data("opts"),{tagClassAddAnimate:"pulse"})),r.$tagsHolder.removeClass("transparent"))),t(a).on("click",".location-input .location-add-btn",function(t){t.preventDefault();var i=r.$TagLocationInput.val();i.length>0&&(e.SearchLocationsMatch.GetLocationMatch(i),r.$TagLocationInput.val(""))}).on("click",function(e){var i=t(".js-more-locations-tags"),a=t(e.target).closest(i).length>0,n=e.target.className.indexOf("js-more-locations-tags")>-1;r.isAddressOrMlsSearch||n||a||!i.hasClass("open")||(i.removeClass("open"),t(".tags-overflow:visible").slideToggle())}).on(e.SearchFilters.Enums.eEvents.LOCATION_MATCH_COMPLETE,function(a,n){var s=n.bestMatch,l=n.similarMatches&&n.similarMatches.length,c=r.isAddressOrMlsSearch?r.searchFilterInfo.zone!==(s&&s.zone):e.SearchLocationsCollection.GetPrimaryZone()!==(s&&s.zone);if(e.Utility.LogConsole("NRT.SearchLocationsMatch.Events: LOCATION_MATCH_COMPLETE triggered"),e.SearchFilters.DidYouMean.RemovePriorDidYouMean(),r.$TagLocationInput.val(""),s&&s.entityId===e.SearchFilters.Enums.eEntityId.ENTITY_IS_MLS)return t(".location-input").addClass("error"),!1;if(s&&!c){var d=e.SearchLocationsCollection.Add(s);if(s&&s.entityId===e.SearchFilters.Enums.eEntityId.ENTITY_IS_ADDRESS){if(null!==n.matchUrl)return o.reloadSearchFilters(i.location.protocol+"//"+i.location.hostname+n.matchUrl),!1;if(isAddressOrMlsSearch){var u=i.location.href.split("?");return o.reloadSearchFilters(u[0]+"?searchTerm="+encodeURIComponent(n.searchTerm)),!1}t(".location-input").addClass("error")}!r.isAddressOrMlsSearch&&s&&s.entityId!==e.SearchFilters.Enums.eEntityId.ENTITY_IS_MLS?r.$TagLocationInput.tagsManager("pushTag",s.displayText):(r.searchFilterInfo.searchType=e.SearchFilters.Enums.eSearchType.LOCATION_FOR_SALE,e.SearchCriteriaCollection.Clear(),e.SearchCriteriaCollection.AddRaw(e.SearchFilters.Enums.eSearchCriteriaType.SEARCH_TYPE,"",1,""),r.searchFilterInfo.criteria=e.SearchCriteriaCollection.GetCriteria(),r.isAddressOrMlsSearch&&e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_LOAD)),n.isExactMatch||(e.SearchFilters.DidYouMean.inferredLocation=d)}s&&(c||n.bestMatch.entityId===e.SearchFilters.Enums.eEntityId.ENTITY_IS_MLS&&!r.isAddressOrMlsSearch)&&e.SearchFilters.DidYouMean.GetDidYouMeanModal(s,!0,n.searchTerm),!n.isExactMatch&&l&&e.SearchFilters.DidYouMean.GetDidYouMeanAlert(n),null===s&&t(".location-input").addClass("error")}).on(e.SearchFilters.Enums.eEvents.LOCATION_ADDED,function(i){1===e.SearchLocationsCollection.GetLocations().length&&(t(".psr-no-locations").removeClass("slideInLeft psr-no-locations-show pulse"),t(".location-input").removeClass("error"))}),c.searchType!==h.eSearchType.AGENT_LISTINGS&&c.searchType!==h.eSearchType.OFFICE_LISTINGS&&(e.SearchLocationsHistory.Initialize(d.zone,d.entityType,d.entityId,d.displayText),r.isAddressOrMlsSearch||e.SearchLocationsNearby.GetLocations(d.entityType,d.entityId,d.displayText,null,r.searchFilterInfo.locations)),r.$TagKeywordInput=t("#psr-filters-keyword.keyword-add-input"),r.$TagKeywordInput.on("tm:hide",function(e,i){t(this).parents(".keyword-input").find(".keyword-add-btn").hide().end().find(".max-keywords-warning").show()}).on("tm:show",function(e,i){t(this).parents(".keyword-input").find(".max-keywords-warning").hide().end().find(".keyword-add-btn").show()}).on("keydown",function(t){var i,a=r.$TagKeywordInput.val(),o=!1,s={id:e.SearchFilters.Enums.eSearchCriteriaType.KEYWORDS,name:"Keyword(s)",valueId:0,value:a};t.key!==n&&r.$TagKeywordInput.is(":focus")?"Enter"!==(i=t.key)&&";"!==i||(o=!0):t.keyCode!==n&&r.$TagKeywordInput.is(":focus")&&(13!==(i=t.keyCode||t.which)&&186!==i||(o=!0)),o&&(e.SearchCriteriaCollection.AddRaw(s.id,s.name,s.valueId,s.value),r.$TagKeywordInput.tagsManager("pushTag",a),r.$TagKeywordInput.val(""))}).on("tm:pushed tm:spliced tm:splicing",function(t,i){var a,n,o=null,s=null;if("tm:spliced"===t.type&&t.target.className.indexOf("keyword-add-input")>-1){for(n=(o=e.SearchCriteriaCollection.GetCriteria()).length,a=0;a<n;a+=1)if(i===(s=o[a]).value){e.SearchCriteriaCollection.RemoveRaw(s.id,s.name,s.valueId,s.value);break}e.Utility.LogConsole("NRT.SearchFilters.poptag: "+i+" |evt: "+t.type+" |tags: "+r.$TagKeywordInput.tagsManager("tags"))}}),r.$TagKeywordInput.tagsManager(t.extend(!0,{},r.tagControlSettings,{prefilled:t.map(u,function(e){return e.Text})||[],tagsContainer:".keyword-tags-holder",maxTags:5})),e.Global.Feature.UseNewPropertySearchFiltersMVP2&&r.$TagKeywordInput.data("opts",t.extend(!0,{},r.$TagKeywordInput.data("opts"),{tagClassAddAnimate:"pulse"})),t(a).on("click",".keyword-input .keyword-add-btn",function(t){t.preventDefault();var i=r.$TagKeywordInput.val(),a={id:e.SearchFilters.Enums.eSearchCriteriaType.KEYWORDS,name:"Keyword(s)",valueId:0,value:i};i.length>0&&(r.$TagKeywordInput.tagsManager("pushTag",i),r.$TagKeywordInput.val(""),e.SearchCriteriaCollection.AddRaw(a.id,a.name,a.valueId,a.value))}),!0===e.session.get("isPropertyCategorySwitched")&&(r.toggleAdvancedFiltersDrawer(!0),e.session.set("isPropertyCategorySwitched",!1)),r.isAddressOrMlsSearch&&e.Utility.MediaQueryEvents.currentDisplayMode>=e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP&&t(".submit-search").css("margin-top","10px"),e.Utility.LogConsole("NRT.SearchFilters: initialized")},getSelectricOptions:function(e){return t.isPlainObject(e)||(e={}),t.extend(!0,{allowWrap:!1,arrowButtonMarkup:'<i class="icon-arrow-down2"></i>',expandToItemText:!1,labelBuilder:"{text}",stopPropagation:!1,nativeOnMobile:!0},e)},updateDesktopLocationCount:function(){r.$desktopLocationCounts.text("+"+t(".tags-overflow .psr-filter-tag").length)},updateMobileLocationCount:function(){r.$mobileLocationCounts.text("("+e.SearchLocationsCollection.Count()+")")},updateCriteriaCount:function(){var i=e.SearchCriteriaCollection.FilteredDesktopCriteriaCount(),a=e.SearchCriteriaCollection.FilteredMobileCriteriaCount();t(".filter-count").text("("+a+")"),t(".show-more-filters .current").text("More Filters"+(i?" ("+i+")":""))},addNearbyHistoryLocation:function(e,i){t(i.item).addClass("ui-state-disabled")},totalWidthOfElements:function(i){var a=0;return t(i).each(function(){a+=t(this).outerWidth(!0)+1}),e.Utility.LogConsole("NRT.SearchFilters.totalWidthOfElements: executed"),a},getNextOverflowSibling:function(e,t){var i,a=t.length;for(i=0;i<a;i+=1)if(e<parseFloat(t[i].id.split("_").pop(),10))return t[i];return null},taggingOverflow:function(){try{var i,a,n,o,s=r.$tagsHolder.children(".psr-filter-tag"),l=t(".more-location-tags"),c=t(".tags-overflow"),d=c.find(".psr-filter-tag"),u=r.totalWidthOfElements(s)+1,h=r.$tagsHolder.outerWidth(!0)-(l.outerWidth(!0)+1||0),p=t(s[0]).outerWidth(!0)||143,g=h-u;l.css("display","inline-flex"),g<0&&(i=Math.ceil(Math.abs(g/p)),o=s.slice(s.length-i),a=parseFloat(o[0].id.split("_").pop(),10),(n=r.getNextOverflowSibling(a,d))?t(n).before(o):c.append(o),s=r.$tagsHolder.find(".psr-filter-tag"),d=c.find(".psr-filter-tag"),g=(h=r.$tagsHolder.outerWidth(!0)-(l.outerWidth(!0)+1||0))-(u=r.totalWidthOfElements(s)+1),d.length&&l.css("display","inline-flex")),g>p&&(i=Math.floor(Math.abs(g/p)),o=d.slice(0,i>d.length?d.length:i),s.last().length?s.last().after(o):r.$tagsHolder.prepend(o),d=c.find(".psr-filter-tag")),d.length||(r.hideLocationOverflow(),l.css("display","none")),r.updateDesktopLocationCount(),e.Utility.LogConsole("NRT.SearchFilters.taggingOverflow: executed")}catch(t){e.Utility.LogConsole("NRT.SearchFilters.taggingOverflow: "+t)}},removeTaggingOverFlow:function(){var i=t(".more-location-tags"),a=t(".tags-overflow .psr-filter-tag");r.$tagsHolder.find(".more-location-tags").before(a),i.hide(),e.Utility.LogConsole("NRT.SearchFilters.removeTaggingOverFlow: executed")},hideDesktopSlideout:function(){t(".ui-autocomplete").css("display","none"),r.$TagLocationInput.blur(),t(".psr-search-filters-nav").find(".psr-filters-all:not(.modalize)").removeClass("slideInDown "+r.modalLayerAnimationSpeed).attr("style",null),t(".show-more-filters").removeClass("open"),e.Utility.LogConsole("NRT.SearchFilters.hideDesktopSlideout: executed")},hideLocationOverflow:function(){t(".tags-overflow").css("display","none"),t(".js-more-locations-tags").removeClass("open")},hideSmallDeviceModal:function(){t(".ui-autocomplete").css("display","none"),r.$TagLocationInput.blur(),t(".psr-search-filters-nav").find(".psr-filters-all.modalize, .psr-locations-all.modalize").removeClass("modalize").end().find(".nav-button").css("pointer-events","auto"),t("html,body").removeClass("modal-open"),r.$pageHeader.removeClass("page-header-hidden"),e.Utility.LogConsole("NRT.SearchFilters.hideSmallDeviceModal: executed")},setLocationsNearby:function(i){var a=t("#nearbyItems"),n=[],o=[];i?(t.each(i,function(e,t){n.push('<li><input type="checkbox" class="mobile-location" id="aloc-'+e+'" name="aloc[]" value="'+t.entityId+"_"+e+'" class="mobile-location" data-location=\''+JSON.stringify(t).replace(/'/g,"&#39")+"'><label for=\"aloc-"+e+'">'+t.displayText+'<i class="icon-plus"></i></label></li>'),o.push('<li class="ui-menu-item nearby-item" role="presentation"><a id="'+t.entityId+"_"+e+"\" data-location='"+JSON.stringify(t).replace(/'/g,"&#39")+'\' class="ui-corner-all" tabindex="-1">'+t.displayText+"</a></li>")}),a.empty().append(n.join(""))):a.parents(".search-filter.psr-filters-locations-nearby").hide(),e.Utility.LogConsole("NRT.SearchFilters.setLocationsNearby: completed")},setLocationsHistory:function(){var i=t("#historyItems"),a=e.SearchLocationsHistory.GetLocations(),n=[],o=[];a?(t.each(a,function(e,t){n.push('<li><input type="checkbox" class="mobile-location" id="hloc-'+e+'" name="hloc[]" value="'+t.entityId+"_"+e+'" class="mobile-location" data-location=\''+JSON.stringify(t).replace(/'/g,"&#39")+"'><label for=\"hloc-"+e+'">'+t.displayText+'<i class="icon-plus"></i></label></li>'),o.push('<li class="ui-menu-item history-item" role="presentation"><a id="'+t.entityId+"_"+e+"\" data-location='"+JSON.stringify(t).replace(/'/g,"&#39")+'\' class="ui-corner-all" tabindex="-1">'+t.displayText+"</a></li>")}),i.empty().append(n.join(""))):i.parents(".search-filter.psr-filters-locations-history").hide(),e.Utility.LogConsole("NRT.SearchFilters.setLocationsHistory: completed")},showSmallDeviceModal:function(n){var o=t(n),s=o.find(".btn-close"),l=o.find(".modal-footer.tablet-down-show"),c=o.find(".btn-close.tablet-down-show");r.currentScrollPosition=i.scrollY,i.requestAnimationFrame(function(){r.$pageHeader.addClass("page-header-hidden"),o.addClass("modalize").addClass("slideInDown "+r.modalLayerAnimationSpeed),c.addClass("btn-close-transitioning"),l.addClass("modal-footer-transitioning"),i.requestAnimationFrame(function(){i.scroll(0,0),i.requestAnimationFrame(function(){t("html,body").addClass("modal-open")})})}),t(a).on("keyup",function(i){27===i.which&&(s.click(),t(a).off("keyup"),e.Utility.LogConsole("NRT.SearchFilters.showSmallDeviceModal: Keyup > ESC > closed small device modal: "+o.attr("class")))}),o.on(e.SearchFilters.Enums.eEvents.animationEnd,function(){o.hasClass("slideOutUp "+r.modalLayerAnimationSpeed)?(o.removeClass("modalize slideOutUp "+r.modalLayerAnimationSpeed),r.$pageHeader.removeClass("page-header-hidden"),t(".psr-search-filters-nav .nav-button").css("pointer-events","auto"),e.Utility.LogConsole("NRT.SearchFilters.showSmallDeviceModal: small device modal > animation out complete: "+o.attr("class"))):o.hasClass("slideInDown "+r.modalLayerAnimationSpeed)&&(o.removeClass("slideInDown "+r.modalLayerAnimationSpeed),l.removeClass("modal-footer-transitioning"),c.removeClass("btn-close-transitioning"),e.Utility.LogConsole("NRT.SearchFilters.showSmallDeviceModal: small device modal: animation in complete: "+o.attr("class")))}),s.one("click",function(a){a.preventDefault(),t("html,body").removeClass("modal-open"),i.scroll(0,r.currentScrollPosition),o.addClass("slideOutUp "+r.modalLayerAnimationSpeed),c.addClass("btn-close-transitioning"),l.addClass("modal-footer-transitioning"),e.Utility.LogConsole("NRT.SearchFilters.showSmallDeviceModal: small device modal > click closed: "+o.attr("class"))}),e.Utility.LogConsole("NRT.SearchFilters.showSmallDeviceModal: executed")},pushAutocompleteLocationTag:function(i){var n=!1,o=r.isAddressOrMlsSearch?r.searchFilterInfo.zone!==i.zone:e.SearchLocationsCollection.GetPrimaryZone()!==i.zone;t(a).on(e.SearchFilters.Enums.eEvents.LOCATION_EXISTS,function(){n=!0}),n?n=!1:o?e.SearchFilters.DidYouMean.GetDidYouMeanModal(i):(r.$TagLocationInput.tagsManager("pushTag",i.displayText),e.SearchFilters.DidYouMean.RemovePriorDidYouMean(),e.SearchLocationsCollection.AddRaw(i.zone,i.entityType,i.entityId,i.displayText))},advancedSearchCriteriaEvent:function(t){var i,a,n,o=t.target,s=o.checked,l=o.type,c=e.SearchFilters.Enums,d=c.eSearchCriteriaType,u=parseInt(o.name)||o.name,h=["hidden-input_for_location","search-options","hidden-undefined",d.IS_NEW_LISTING,d.PRICE_MIN,d.PRICE_MAX,d.SEARCH_TYPE,d.CATEGORY_TYPE],p=parseInt("on"===o.value?"1":o.value.replace(/,/g,""));if(p||0===p||(p=o.value),n={id:u,name:"",valueId:"number"==typeof p?p:-1,value:"string"==typeof p?p:null},h.some(function(e){return n.id===e}))return e.Utility.LogConsole("nrt.searchCriteriaCollection.Count: current filter count - "+e.SearchCriteriaCollection.Count()),null;if(a=e.SearchCriteriaCollection.GetCriteria(),(i=["radio","select-one","text","number"].some(function(e){return l===e}))?r.removeDuplicateCriterion(n,a,e.SearchCriteriaCollection.Remove,!1):"checkbox"!==l||s||r.removeDuplicateCriterion(n,a,e.SearchCriteriaCollection.Remove,!0),0===a.length&&"checkbox"!==l||i||s){if(n.id===c.eSearchCriteriaType.DATE_AVAILABLE&&n.valueId<0)return null;e.SearchCriteriaCollection.AddRaw(n.id,n.name,n.valueId,n.value)}e.Utility.LogConsole("NRT.searchCriteriaCollection.Count: current filter count - "+e.SearchCriteriaCollection.Count())},removeDuplicateCriterion:function(e,t,i,a){var n,o,s=t.length;for(o=0;o<s;o+=1)(n=t[o])&&r.checkIfDuplicate(e,n,a)&&i(n)},checkIfDuplicate:function(e,t,i){var a=e.id===t.id,n=e.valueId===t.valueId,o=e.value===t.value,r=0===e.valueId,s=r||e.valueId;return a&&(i?s?n:o:s?!r||!n:!o)},toggleSuggestedLocation:function(i,a){var n=a.some(function(e){return e.entityId===i.entityId}),o=t(".location-add-input").data(),s=o.tlis.indexOf(i.displayText),l=e.SearchLocationsCollection.GetPrimaryZone()!==i.zone;n&&s>-1?(e.SearchLocationsCollection.Remove(i),r.$TagLocationInput.tagsManager("removeTag",o.tlid[s])):l?e.SearchFilters.DidYouMean.GetDidYouMeanModal(i):(r.$TagLocationInput.tagsManager("pushTag",i.displayText),e.SearchLocationsCollection.AddRaw(i.zone,i.entityType,i.entityId,i.displayText),e.SearchFilters.DidYouMean.RemovePriorDidYouMean())},populateCollections:function(){t.map(r.searchFilterInfo.locations,function(t,i){o.initialLocations.push(t.displayText),e.SearchLocationsCollection.AddRaw(t.zone,t.entityType,t.entityId,t.displayText)}),t.map(r.searchFilterInfo.criteria,function(t,i){e.SearchCriteriaCollection.AddRaw(t.id,t.name,t.valueId,t.value)})},onSaveSearchClick:function(i){var n=t(i.currentTarget).data("origin");i.preventDefault(),e.Utility.LogConsole("NRT.SearchFilters.onSaveSearchClick > searchCriteria = "+JSON.stringify(r.searchFilterInfo.criteria)),t(a).one(e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_SAVE,function(t,i){r.currentSearchResultsUrlInfo=i,r.searchFilterInfo.searchId=i.searchId,r.subscriberIsActive&&r.subscriberIsAuthenticated?e.SearchFilters.SaveSearch.showSaveSearchWithAlertsCheckModal(n):e.SearchFilters.SaveSearch.authenticateUserBeforeSaveSearch(n,i.url)}),r.searchFilterInfo.isSaveSearch=!0,r.pageReloadWatch(function(){return e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_SAVE)})},onUpdateResultsClick:function(i){var a=e.SearchLocationsCollection.GetLocations(),n=t(".psr-no-locations"),o=t(".location-input"),s=t("#location-search").val();if(e.Utility.LogConsole("NRT.SearchFilters.onUpdateResultsClick"),r.searchFilterInfo.criteria=e.SearchFilters.RangeFilters.checkForRangeCriteria(r.searchFilterInfo.criteria),e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS),a.length)i.preventDefault(),r.pageReloadWatch();else{if(n.hasClass("psr-no-locations-show"))return n.removeClass("slideInLeft").addClass("pulse"),o.addClass("error"),setTimeout(function(){n.removeClass("pulse")},500),!1;if(!r.isAddressOrMlsSearch)return n.addClass("psr-no-locations-show slideInLeft"),o.addClass("error"),!1;i.preventDefault(),r.searchFilterInfo.searchTerm!==s&&""!==s||e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_LOAD)}},pageReloadWatch:function(i){e.SearchResultsUrl.checkHasPendingRequests()?t(a).one(e.SearchFilters.Enums.eEvents.QUEUE_CLEARED,function(){return r.pageReloadWatch(i)}):i?i():o.reloadSearchFilters(r.currentSearchResultsUrlInfo.url)},checkTopBiggerThanWindow:function(e,a){return e===n&&(e=t(".psr-search-filters-nav")),a===n&&(a=r.$pageHeader),t(i).height()<=e.height()+a.height()},toggleAdvancedFiltersDrawer:function(a){var n=t(".psr-filters-all"),o=t(".show-more-filters"),s=t(".psr-search-filters-nav"),l=Object.keys(s.data()).length;n.is(":visible")&&!a?(o.removeClass("open"),n.slideUp(400,function(){s.addClass("fixedsticky"),l||s.fixedsticky(),r.checkTopBiggerThanWindow(s,r.$pageHeader)&&t("html, body").animate({scrollTop:r.$pageHeader.offset().top},"slow")})):e.Utility.MediaQueryEvents.currentDisplayMode<e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP?(t(".psr-search-filters-nav .nav-button").css("pointer-events","none"),r.showSmallDeviceModal(n)):(o.addClass("open"),n.slideDown(400,function(){var a=r.checkTopBiggerThanWindow(s,r.$pageHeader);e.Utility.LogConsole("NRT.Search.Filters: top bigger than window:",a),a&&n.not(".modalize")&&(i.FixedSticky&&i.FixedSticky.destroy(s),t("html, body").animate({scrollTop:r.$pageHeader.offset().top},"slow",function(){s.removeClass("fixedsticky")}))}))},resetFilterInfoForSearchTypeChange:function(i){var a=e.SearchFilters.Enums,n=a.eSearchCriteriaType,o=t.extend(!0,{},r.searchFilterInfo),s=a.mapInputToSearchType(i.valueId,o.searchType);e.SearchCriteriaCollection.Clear(),e.SearchCriteriaCollection.Add({id:n.CATEGORY_TYPE,name:"",valueId:a.eUserCategoryType.RESIDENTIAL,value:null}),e.SearchCriteriaCollection.Add(i),r.isAddressOrMlsSearch&&(r.searchFilterInfo.searchType=s),e.Utility.LogConsole("NRT.SearchFilters.resetFilterInfoForSearchTypeChange: criteria: "+JSON.stringify(r.searchFilterInfo.criteria))},resetFilterInfoForCategoryTypeChange:function(i){var a=t.extend(!0,{},r.searchFilterInfo),n=e.SearchFilters.Enums.eSearchCriteriaType,o=a.criteria.filter(function(e){return e.id===n.SEARCH_TYPE})[0];e.SearchCriteriaCollection.Clear(),e.SearchCriteriaCollection.Add(o),e.SearchCriteriaCollection.Add(i),a.criteria.forEach(function(t){t.id!==n.PRICE_MIN&&t.id!==n.PRICE_MAX||e.SearchCriteriaCollection.Add(t)}),e.Utility.LogConsole("NRT.SearchFilters.resetFilterInfoForCategoryTypeChange: criteria: "+JSON.stringify(r.searchFilterInfo.criteria))}},e.Utility.BaseOrigin().PSR&&e.Global.Feature.UseNewPropertySearchFilters&&(t(".psr-filter-search-form").on("click",".submit-btn",t.proxy(r.onUpdateResultsClick,this)),t(a).on(e.Utility.MediaQueryEvents.eEvents.MQ_DESKTOP_ENTER,function(i){e.Utility.LogConsole("NRT.Utility.MediaQueryEvents: Event :"+i.type),r.taggingOverflow(),t("html").hasClass("modal-open")&&r.hideSmallDeviceModal()}).on(e.Utility.MediaQueryEvents.eEvents.MQ_TABLET_ENTER+" "+e.Utility.MediaQueryEvents.eEvents.MQ_MOBILE_ENTER,function(t){e.Utility.LogConsole("NRT.Utility.MediaQueryEvents: Event :"+t.type),r.removeTaggingOverFlow(),r.hideDesktopSlideout(),r.hideLocationOverflow(),e.SearchLocationsCollection.SyncSuggestedLocations()}).on(e.SearchFilters.Enums.eEvents.NEARBY_LOCATIONS_COMPLETE,function(e,t){r.setLocationsNearby(t),r.setLocationsHistory()}).on(e.SearchFilters.Enums.eEvents.SUGGESTED_LOCATION_TOGGLE,function(t,i){var a=e.SearchLocationsCollection.GetLocations();r.toggleSuggestedLocation(i,a)}).on(e.SearchFilters.Enums.eEvents.CRITERIA_ADDED+" "+e.SearchFilters.Enums.eEvents.CRITERIA_REMOVED,function(t,i){r.searchFilterInfo.criteria=e.SearchCriteriaCollection.GetCriteria(),r.updateCriteriaCount(),e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS)}).on(e.SearchFilters.Enums.eEvents.LOCATION_ADDED+" "+e.SearchFilters.Enums.eEvents.LOCATION_REMOVED,function(t,i){r.searchFilterInfo.locations=e.SearchLocationsCollection.GetLocations(),r.updateDesktopLocationCount(),r.updateMobileLocationCount(),e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS)}).on("click",".next-mls-group",function(i){var a=parseInt(t(this).data("groupid"))||-1;i.preventDefault(),e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_LOAD,a)}).on("change",".sort-options",function(a){var n=parseInt(t(this).val())||0,o=i.App;a.preventDefault(),o.spinner.Spin(),o.searchData.sortId=n,o.searchData.offset=0,r.searchFilterInfo.criteria.sortId=n,e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS),o.state.inGeocoordinateSearchMode?o.router.fetchBoundsData():o.router.fetchNonBoundsData()}).on("change","#nearbyItems, #historyItems",function(i){i.target.checked=!i.target.checked,e.Utility.Throttle(t(a).trigger(e.SearchFilters.Enums.eEvents.SUGGESTED_LOCATION_TOGGLE,t(i.target).data("location")),500)}),t(".results-search.psr-search-filters-nav").fixedsticky(),t("select.search-options.psr-filter").selectric(r.getSelectricOptions({expandToItemText:!0})),t(".selectric-scroll").attr("tabindex",-1),t("select.search-options.psr-filter, .search-option-filter input[type=radio], .category-filter .category-filter-radio").on("change",function(){var i=t(this),a={id:parseInt(i.prop("id")),name:"",valueId:parseInt(i.val()),value:null};switch(e.Utility.LogConsole("NRT.SearchFilters: Form Change Event: criteria"+JSON.stringify(r.searchFilterInfo.criteria)),a.id){case e.SearchFilters.Enums.eSearchCriteriaType.CATEGORY_TYPE:e.session.set("isPropertyCategorySwitched",!0),r.resetFilterInfoForCategoryTypeChange(a);break;case e.SearchFilters.Enums.eSearchCriteriaType.SEARCH_TYPE:r.resetFilterInfoForSearchTypeChange(a)}e.SearchResultsUrl.getSearchResultsUrl(r.searchFilterInfo,e.SearchFilters.Enums.eEvents.FETCH_SUCCESS_LOAD)}),t("select.search-beds.psr-filter").selectric(r.getSelectricOptions({labelBuilder:"{text} Beds"})),t("select.search-baths.psr-filter").selectric(r.getSelectricOptions({labelBuilder:"{text} Baths"})),t("select.sort-options.psr-filter").selectric(r.getSelectricOptions({expandToItemText:!0,forceRenderBelow:!0})),t(".selectric-scroll").attr("tabindex",-1),setTimeout(function(){t(".psr-simple-filters").removeClass("transparent")},0),t(".psr-search-filters-nav").find("li input[type=checkbox][class!=mobile-location] ~ label").append('<i class="icon-check"></i>'),t(".psr-advanced-filters .search-filter select").selectric(r.getSelectricOptions({expandToItemText:!0})),t(".selectric-scroll").attr("tabindex",-1),r.$newListingDropdownInput=t(".selectric-new-listings-days .selectric-input"),!1===t(".psr-advanced-filters [name="+e.SearchFilters.Enums.eSearchCriteriaType.IS_NEW_LISTING+"]input[type=checkbox]").prop("checked")&&r.$newListingDropdownInput.attr("tabindex",-1),t(".psr-advanced-filters").on("change","[name="+e.SearchFilters.Enums.eSearchCriteriaType.IS_NEW_LISTING+"]input[type=checkbox]",function(i){var a=t(this),n=a.prop("checked"),o=a.parent().find("select[name="+e.SearchFilters.Enums.eSearchCriteriaType.NEW_LISTING_DAYS+"]"),s={id:parseInt(a.prop("name")),name:"New listing",valueId:1,value:null},l={id:parseInt(o.prop("name")),name:"",valueId:parseInt(o.val()),value:null};o.parent().parent().toggleClass("selectric-select-disabled",!n),n?(e.SearchCriteriaCollection.AddRaw(s.id,s.name,s.valueId,s.value),e.SearchCriteriaCollection.AddRaw(l.id,l.name,l.valueId,l.value),r.$newListingDropdownInput.attr("tabindex",0)):(e.SearchCriteriaCollection.RemoveRaw(s.id,s.name,1,s.value),e.SearchCriteriaCollection.RemoveRaw(l.id,l.name,l.valueId,l.value),r.$newListingDropdownInput.attr("tabindex",-1))}),t(".psr-search-filters-nav").on("click",".nav-button",function(e){e.preventDefault(),t(".psr-search-filters-nav .nav-button").css("pointer-events","none"),r.showSmallDeviceModal(t(this).data("action"))}).on("click",".show-more-filters, .drawer-handle .button-holder",function(e){r.toggleAdvancedFiltersDrawer()}),t(".psr-filter-search-form").on("change",function(e){0===t(e.target).parents(".manage-locations").length&&r.advancedSearchCriteriaEvent(e)}).on("change","select[id^=baths-]",function(e){t("input[id^=baths-][value="+t(this).val()+"]").prop("checked",!0)}).on("change","select[id^=beds-]",function(e){t("input[id^=beds-][value="+t(this).val()+"]").prop("checked",!0)}),t(a).ready(function(){t(a).trigger(e.SearchFilters.Enums.eEvents.PSR_FILTERS_READY)}),t.fn.slideFadeToggle=function(e,t,i){return this.animate({opacity:"toggle",height:"toggle"},e,t,i)}),e.SearchFilters=t.extend(!0,e.SearchFilters,o)}(window.NRT,jQuery,window,document),function(e,t){var i,a={};i={checkForRangeCriteria:function(t){var i,n,o=e.SearchFilters.Enums.eRangeCriteria;return i=t.filter(function(e){return e.id===o.minAcreage||e.id===o.maxAcreage}),n=t.filter(function(e){return e.id!==o.minAcreage&&e.id!==o.maxAcreage}),0===i.length?n:1===i.length?n.concat(i):(i=a.getBounds(i),e.Utility.LogConsole("nrt.SearchFilters.RangeFilters: rangeFiltersArray = "+JSON.stringify(i)),n.concat(i))}},a={getBounds:function(t){var i,a,n=e.SearchFilters.Enums.eRangeCriteria,o=[];return i=t.reduce(function(e,t){return t.valueId<e.valueId?t.valueId:e.valueId}),a=t.reduce(function(e,t){return t.valueId>e.valueId?t.valueId:e.valueId}),o.push({id:n.minAcreage,value:null,name:"",valueId:i}),o.push({id:n.maxAcreage,value:null,name:"",valueId:a}),o}},e.SearchFilters.RangeFilters=i}(window.NRT,jQuery),
/*!
 * fancyBox - jQuery Plugin
 * @version: 2.1.7 (Tue, 28 Feb 2017)
 * requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * @License: bd51b3e667709bb55f545040a1fe9544 - www.fancyapps.com/fancybox/#license
 *
 * @Copyright 2017 fancyapps.com
 *
 */
function(e,t,i,a){var n=i("html"),o=i(e),r=i(t),s=i.fancybox=function(){s.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==a,u=function(e){return e&&e.hasOwnProperty&&e instanceof i},h=function(e){return e&&"string"===i.type(e)},p=function(e){return h(e)&&e.indexOf("%")>0},g=function(e,t){var i=parseInt(e,10)||0;return t&&p(e)&&(i=s.getViewport()[t]/100*i),Math.ceil(i)},m=function(e,t){return g(e,t)+"px"};i.extend(s,{version:"2.1.7",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>',loading:'<div id="fancybox-loading"><div></div></div>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){if(e&&(i.isPlainObject(t)||(t={}),!1!==s.close(!0)))return i.isArray(e)||(e=u(e)?i(e).get():[e]),i.each(e,function(n,o){var r,l,c,d,p,g,m,f={};"object"===i.type(o)&&(o.nodeType&&(o=i(o)),u(o)?(f={href:o.data("fancybox-href")||o.attr("href"),title:i("<div/>").text(o.data("fancybox-title")||o.attr("title")||"").html(),isDom:!0,element:o},i.metadata&&i.extend(!0,f,o.metadata())):f=o),r=t.href||f.href||(h(o)?o:null),l=t.title!==a?t.title:f.title||"",!(d=(c=t.content||f.content)?"html":t.type||f.type)&&f.isDom&&((d=o.data("fancybox-type"))||(d=(p=o.prop("class").match(/fancybox\.(\w+)/))?p[1]:null)),h(r)&&(d||(s.isImage(r)?d="image":s.isSWF(r)?d="swf":"#"===r.charAt(0)?d="inline":h(o)&&(d="html",c=o)),"ajax"===d&&(r=(g=r.split(/\s+/,2)).shift(),m=g.shift())),c||("inline"===d?r?c=i(h(r)?r.replace(/.*(?=#[^\s]+$)/,""):r):f.isDom&&(c=o):"html"===d?c=r:d||r||!f.isDom||(d="inline",c=o)),i.extend(f,{href:r,type:d,content:c,title:l,selector:m}),e[n]=f}),s.opts=i.extend(!0,{},s.defaults,t),t.keys!==a&&(s.opts.keys=!!t.keys&&i.extend({},s.defaults.keys,t.keys)),s.group=e,s._start(s.opts.index)},cancel:function(){var e=s.coming;e&&!1===s.trigger("onCancel")||(s.hideLoading(),e&&(s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),s.coming=null,s.current||s._afterZoomOut(e)))},close:function(e){s.cancel(),!1!==s.trigger("beforeClose")&&(s.unbindEvents(),s.isActive&&(s.isOpen&&!0!==e?(s.isOpen=s.isOpened=!1,s.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0,!0).removeClass("fancybox-opened"),s.transitions[s.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),s._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(s.player.timer)},i=function(){t(),s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},a=function(){t(),r.unbind(".player"),s.player.isActive=!1,s.trigger("onPlayEnd")};!0===e||!s.player.isActive&&!1!==e?s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":a,"onUpdate.player":i,"beforeLoad.player":t}),i(),s.trigger("onPlayStart")):a()},next:function(e){var t=s.current;t&&(h(e)||(e=t.direction.next),s.jumpto(t.index+1,e,"next"))},prev:function(e){var t=s.current;t&&(h(e)||(e=t.direction.prev),s.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var n=s.current;n&&(e=g(e),s.direction=t||n.direction[e>=n.index?"next":"prev"],s.router=i||"jumpto",n.loop&&(e<0&&(e=n.group.length+e%n.group.length),e%=n.group.length),n.group[e]!==a&&(s.cancel(),s._start(e)))},reposition:function(e,t){var a,n=s.current,o=n?n.wrap:null;o&&(a=s._getPosition(t),e&&"scroll"===e.type?(delete a.position,o.stop(!0,!0).animate(a,200)):(o.css(a),n.pos=i.extend({},n.dim,a)))},update:function(e){var t=e&&e.originalEvent&&e.originalEvent.type,i=!t||"orientationchange"===t;i&&(clearTimeout(c),c=null),s.isOpen&&!c&&(c=setTimeout(function(){var a=s.current;a&&!s.isClosing&&(s.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&a.autoResize)&&s._setDimension(),"scroll"===t&&a.canShrink||s.reposition(e),s.trigger("onUpdate"),c=null)},i&&!d?0:300))},toggle:function(e){s.isOpen&&(s.current.fitToView="boolean"===i.type(e)?e:!s.current.fitToView,d&&(s.wrap.removeAttr("style").addClass("fancybox-tmp"),s.trigger("onUpdate")),s.update())},hideLoading:function(){r.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var e,t;s.hideLoading(),e=i(s.opts.tpl.loading).click(s.cancel).appendTo("body"),r.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),s.cancel())}),s.defaults.fixed||(t=s.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x})),s.trigger("onLoading")},getViewport:function(){var t=s.current&&s.current.locked||!1,i={x:o.scrollLeft(),y:o.scrollTop()};return t&&t.length?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=d&&e.innerWidth?e.innerWidth:o.width(),i.h=d&&e.innerHeight?e.innerHeight:o.height()),i},unbindEvents:function(){s.wrap&&u(s.wrap)&&s.wrap.unbind(".fb"),r.unbind(".fb"),o.unbind(".fb")},bindEvents:function(){var e,t=s.current;t&&(o.bind("orientationchange.fb"+(d?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),s.update),(e=t.keys)&&r.bind("keydown.fb",function(n){var o=n.which||n.keyCode,r=n.target||n.srcElement;if(27===o&&s.coming)return!1;n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||r&&(r.type||i(r).is("[contenteditable]"))||i.each(e,function(e,r){return t.group.length>1&&r[o]!==a?(s[e](r[o]),n.preventDefault(),!1):i.inArray(o,r)>-1?(s[e](),n.preventDefault(),!1):void 0})}),i.fn.mousewheel&&t.mouseWheel&&s.wrap.bind("mousewheel.fb",function(e,a,n,o){for(var r,l=e.target||null,c=i(l),d=!1;c.length&&!(d||c.is(".fancybox-skin")||c.is(".fancybox-wrap"));)d=(r=c[0])&&!(r.style.overflow&&"hidden"===r.style.overflow)&&(r.clientWidth&&r.scrollWidth>r.clientWidth||r.clientHeight&&r.scrollHeight>r.clientHeight),c=i(c).parent();0===a||d||s.group.length>1&&!t.canShrink&&(o>0||n>0?s.prev(o>0?"down":"left"):(o<0||n<0)&&s.next(o<0?"up":"right"),e.preventDefault())}))},trigger:function(e,t){var a,n=t||s.coming||s.current;if(n){if(i.isFunction(n[e])&&(a=n[e].apply(n,Array.prototype.slice.call(arguments,1))),!1===a)return!1;n.helpers&&i.each(n.helpers,function(t,a){a&&s.helpers[t]&&i.isFunction(s.helpers[t][e])&&s.helpers[t][e](i.extend(!0,{},s.helpers[t].defaults,a),n)})}r.trigger(e)},isImage:function(e){return h(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return h(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,a,n,o,r,l={};if(e=g(e),!(t=s.group[e]||null))return!1;if(o=(l=i.extend(!0,{},s.opts,t)).margin,r=l.padding,"number"===i.type(o)&&(l.margin=[o,o,o,o]),"number"===i.type(r)&&(l.padding=[r,r,r,r]),l.modal&&i.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=s.group,l.index=e,s.coming=l,!1!==s.trigger("beforeLoad")){if(n=l.type,a=l.href,!n)return s.coming=null,!(!s.current||!s.router||"jumpto"===s.router)&&(s.current.index=e,s[s.router](s.direction));if(s.isActive=!0,"image"!==n&&"swf"!==n||(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===n&&(l.aspectRatio=!0),"iframe"===n&&d&&(l.scrolling="scroll"),l.wrap=i(l.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+n+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),i.extend(l,{skin:i(".fancybox-skin",l.wrap),outer:i(".fancybox-outer",l.wrap),inner:i(".fancybox-inner",l.wrap)}),i.each(["Top","Right","Bottom","Left"],function(e,t){l.skin.css("padding"+t,m(l.padding[e]))}),s.trigger("onReady"),"inline"===n||"html"===n){if(!l.content||!l.content.length)return s._error("content")}else if(!a)return s._error("href");"image"===n?s._loadImage():"ajax"===n?s._loadAjax():"iframe"===n?s._loadIframe():s._afterLoad()}else s.coming=null},_error:function(e){i.extend(s.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:s.coming.tpl.error}),s._afterLoad()},_loadImage:function(){var e=s.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,s.coming.width=this.width/s.opts.pixelRatio,s.coming.height=this.height/s.opts.pixelRatio,s._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,s._error("image")},e.src=s.coming.href,!0!==e.complete&&s.showLoading()},_loadAjax:function(){var e=s.coming;s.showLoading(),s.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){s.coming&&"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,s._afterLoad())}}))},_loadIframe:function(){var e=s.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(s.showLoading(),t.one("load",function(){i(this).data("ready",1),d||i(this).bind("load.fb",s.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),s._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||s._afterLoad()},_preloadImages:function(){var e,t,i=s.group,a=s.current,n=i.length,o=a.preload?Math.min(a.preload,n-1):0;for(t=1;t<=o;t+=1)"image"===(e=i[(a.index+t)%n]).type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,a,n,o,r,l=s.coming,c=s.current,d="fancybox-placeholder";if(s.hideLoading(),l&&!1!==s.isActive){if(!1===s.trigger("afterLoad",l,c))return l.wrap.stop(!0).trigger("onReset").remove(),void(s.coming=null);switch(c&&(s.trigger("beforeChange",c),c.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),s.unbindEvents(),e=l,t=l.content,a=l.type,n=l.scrolling,i.extend(s,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:c}),o=e.href,a){case"inline":case"ajax":case"html":e.selector?t=i("<div>").html(t).find(e.selector):u(t)&&(t.data(d)||t.data(d,i('<div class="'+d+'"></div>').insertAfter(t).hide()),t=t.show().detach(),e.wrap.bind("onReset",function(){i(this).find(t).length&&t.hide().replaceAll(t.data(d)).data(d,!1)}));break;case"image":t=e.tpl.image.replace(/\{href\}/g,o);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+o+'"></param>',r="",i.each(e.swf,function(e,i){t+='<param name="'+e+'" value="'+i+'"></param>',r+=" "+e+'="'+i+'"'}),t+='<embed src="'+o+'" type="application/x-shockwave-flash" width="100%" height="100%"'+r+"></embed></object>"}u(t)&&t.parent().is(e.inner)||e.inner.append(t),s.trigger("beforeShow"),e.inner.css("overflow","yes"===n?"scroll":"no"===n?"hidden":n),s._setDimension(),s.reposition(),s.isOpen=!1,s.coming=null,s.bindEvents(),s.isOpened?c.prevMethod&&s.transitions[c.prevMethod]():i(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),s.transitions[s.isOpened?e.nextMethod:e.openMethod](),s._preloadImages()}},_setDimension:function(){var e,t,a,n,o,r,l,c,d,u,h,f,v,y,S,b,w,C=s.getViewport(),T=0,I=s.wrap,E=s.skin,x=s.inner,L=s.current,_=L.width,A=L.height,R=L.minWidth,M=L.minHeight,k=L.maxWidth,D=L.maxHeight,O=L.scrolling,N=L.scrollOutside?L.scrollbarWidth:0,P=L.margin,U=g(P[1]+P[3]),F=g(P[0]+P[2]);if(I.add(E).add(x).width("auto").height("auto").removeClass("fancybox-tmp"),o=U+(a=g(E.outerWidth(!0)-E.width())),r=F+(n=g(E.outerHeight(!0)-E.height())),l=p(_)?(C.w-o)*g(_)/100:_,c=p(A)?(C.h-r)*g(A)/100:A,"iframe"===L.type){if(b=L.content,L.autoHeight&&b&&1===b.data("ready"))try{b[0].contentWindow.document.location&&(x.width(l).height(9999),w=b.contents().find("body"),N&&w.css("overflow-x","hidden"),c=w.outerHeight(!0))}catch(e){}}else(L.autoWidth||L.autoHeight)&&(x.addClass("fancybox-tmp"),L.autoWidth||x.width(l),L.autoHeight||x.height(c),L.autoWidth&&(l=x.width()),L.autoHeight&&(c=x.height()),x.removeClass("fancybox-tmp"));if(_=g(l),A=g(c),h=l/c,R=g(p(R)?g(R,"w")-o:R),k=g(p(k)?g(k,"w")-o:k),M=g(p(M)?g(M,"h")-r:M),d=k,u=D=g(p(D)?g(D,"h")-r:D),L.fitToView&&(k=Math.min(C.w-o,k),D=Math.min(C.h-r,D)),y=C.w-U,S=C.h-F,L.aspectRatio?(_>k&&(A=g((_=k)/h)),A>D&&(_=g((A=D)*h)),_<R&&(A=g((_=R)/h)),A<M&&(_=g((A=M)*h))):(_=Math.max(R,Math.min(_,k)),L.autoHeight&&"iframe"!==L.type&&(x.width(_),A=x.height()),A=Math.max(M,Math.min(A,D))),L.fitToView)if(x.width(_).height(A),I.width(_+a),f=I.width(),v=I.height(),L.aspectRatio)for(;(f>y||v>S)&&_>R&&A>M&&!(T++>19);)A=Math.max(M,Math.min(D,A-10)),(_=g(A*h))<R&&(A=g((_=R)/h)),_>k&&(A=g((_=k)/h)),x.width(_).height(A),I.width(_+a),f=I.width(),v=I.height();else _=Math.max(R,Math.min(_,_-(f-y))),A=Math.max(M,Math.min(A,A-(v-S)));N&&"auto"===O&&A<c&&_+a+N<y&&(_+=N),x.width(_).height(A),I.width(_+a),f=I.width(),v=I.height(),e=(f>y||v>S)&&_>R&&A>M,t=L.aspectRatio?_<d&&A<u&&_<l&&A<c:(_<d||A<u)&&(_<l||A<c),i.extend(L,{dim:{width:m(f),height:m(v)},origWidth:l,origHeight:c,canShrink:e,canExpand:t,wPadding:a,hPadding:n,wrapSpace:v-E.outerHeight(!0),skinSpace:E.height()-A}),!b&&L.autoHeight&&A>M&&A<D&&!t&&x.height("auto")},_getPosition:function(e){var t=s.current,i=s.getViewport(),a=t.margin,n=s.wrap.width()+a[1]+a[3],o=s.wrap.height()+a[0]+a[2],r={position:"absolute",top:a[0],left:a[3]};return t.autoCenter&&t.fixed&&!e&&o<=i.h&&n<=i.w?r.position="fixed":t.locked||(r.top+=i.y,r.left+=i.x),r.top=m(Math.max(r.top,r.top+(i.h-o)*t.topRatio)),r.left=m(Math.max(r.left,r.left+(i.w-n)*t.leftRatio)),r},_afterZoomIn:function(){var e=s.current;e&&(s.isOpen=s.isOpened=!0,s.wrap.css("overflow","visible").addClass("fancybox-opened").hide().show(0),s.update(),(e.closeClick||e.nextClick&&s.group.length>1)&&s.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),s[e.closeClick?"close":"next"]())}),e.closeBtn&&i(e.tpl.closeBtn).appendTo(s.skin).bind("click.fb",function(e){e.preventDefault(),s.close()}),e.arrows&&s.group.length>1&&((e.loop||e.index>0)&&i(e.tpl.prev).appendTo(s.outer).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&i(e.tpl.next).appendTo(s.outer).bind("click.fb",s.next)),s.trigger("afterShow"),e.loop||e.index!==e.group.length-1?s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play(!0)):s.play(!1))},_afterZoomOut:function(e){e=e||s.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(s,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),s.trigger("afterClose",e)}}),s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,i=e.orig,a={},n=50,o=50,r=e.hPadding,l=e.wPadding,c=s.getViewport();return!i&&e.isDom&&t.is(":visible")&&((i=t.find("img:first")).length||(i=t)),u(i)?(a=i.offset(),i.is("img")&&(n=i.outerWidth(),o=i.outerHeight())):(a.top=c.y+(c.h-o)*e.topRatio,a.left=c.x+(c.w-n)*e.leftRatio),("fixed"===s.wrap.css("position")||e.locked)&&(a.top-=c.y,a.left-=c.x),a={top:m(a.top-r*e.topRatio),left:m(a.left-l*e.leftRatio),width:m(n+l),height:m(o+r)}},step:function(e,t){var i,a,n=t.prop,o=s.current,r=o.wrapSpace,l=o.skinSpace;"width"!==n&&"height"!==n||(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),s.isClosing&&(i=1-i),a=e-("width"===n?o.wPadding:o.hPadding),s.skin[n](g("width"===n?a:a-r*i)),s.inner[n](g("width"===n?a:a-r*i-l*i)))},zoomIn:function(){var e=s.current,t=e.pos,a=e.openEffect,n="elastic"===a,o=i.extend({opacity:1},t);delete o.position,n?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===a&&(t.opacity=.1),s.wrap.css(t).animate(o,{duration:"none"===a?0:e.openSpeed,easing:e.openEasing,step:n?this.step:null,complete:s._afterZoomIn})},zoomOut:function(){var e=s.current,t=e.closeEffect,i="elastic"===t,a={opacity:.1};i&&(a=this.getOrigPosition(),e.closeOpacity&&(a.opacity=.1)),s.wrap.animate(a,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:s._afterZoomOut})},changeIn:function(){var e,t=s.current,i=t.nextEffect,a=t.pos,n={opacity:1},o=s.direction;a.opacity=.1,"elastic"===i&&(e="down"===o||"up"===o?"top":"left","down"===o||"right"===o?(a[e]=m(g(a[e])-200),n[e]="+=200px"):(a[e]=m(g(a[e])+200),n[e]="-=200px")),"none"===i?s._afterZoomIn():s.wrap.css(a).animate(n,{duration:t.nextSpeed,easing:t.nextEasing,complete:s._afterZoomIn})},changeOut:function(){var e=s.previous,t=e.prevEffect,a={opacity:.1},n=s.direction;"elastic"===t&&(a["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"=200px"),e.wrap.animate(a,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},s.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0},overlay:null,fixed:!1,el:i("html"),create:function(e){var t;e=i.extend({},this.defaults,e),this.overlay&&this.close(),t=s.coming?s.coming.parent:e.parent,this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(t&&t.length?t:"body"),this.fixed=!1,e.fixed&&s.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(e){var t=this;e=i.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(o.bind("resize.overlay",i.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){if(i(e.target).hasClass("fancybox-overlay"))return s.isActive?s.close():t.close(),!1}),this.overlay.css(e.css).show()},close:function(){o.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),this.el.removeClass("fancybox-lock"),o.scrollTop(this.scrollV).scrollLeft(this.scrollH)),i(".fancybox-overlay").remove().hide(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var e,i="100%";this.overlay.width(i).height("100%"),l?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),r.width()>e&&(i=r.width())):r.width()>o.width()&&(i=r.width()),this.overlay.width(i).height(r.height())},onReady:function(e,t){var a=this.overlay;i(".fancybox-overlay").stop(!0,!0),a||this.create(e),e.locked&&this.fixed&&t.fixed&&(t.locked=this.overlay.append(t.wrap),t.fixed=!1),!0===e.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){t.locked&&!this.el.hasClass("fancybox-lock")&&(!1!==this.fixPosition&&i("*:not(object)").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin"),this.scrollV=o.scrollTop(),this.scrollH=o.scrollLeft(),this.el.addClass("fancybox-lock"),o.scrollTop(this.scrollV).scrollLeft(this.scrollH)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!s.coming&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}},s.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,a,n=s.current,o=n.title,r=e.type;if(i.isFunction(o)&&(o=o.call(n.element,n)),h(o)&&""!==i.trim(o)){switch(t=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+o+"</div>"),r){case"inside":a=s.skin;break;case"outside":a=s.wrap;break;case"over":a=s.inner;break;default:a=s.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(g(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](a)}}},i.fn.fancybox=function(e){var t,a=i(this),n=this.selector||"",o=function(o){var r,l,c=i(this).blur(),d=t;o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||c.is(".fancybox-wrap")||(r=e.groupAttr||"data-fancybox-group",(l=c.attr(r))||(r="rel",l=c.get(0)[r]),l&&""!==l&&"nofollow"!==l&&(d=(c=(c=n.length?i(n):a).filter("["+r+'="'+l+'"]')).index(this)),e.index=d,!1!==s.open(c,e)&&o.preventDefault())};return t=(e=e||{}).index||0,n&&!1!==e.live?r.undelegate(n,"click.fb-start").delegate(n+":not('.fancybox-item, .fancybox-nav')","click.fb-start",o):a.unbind("click.fb-start").bind("click.fb-start",o),this.filter("[data-fancybox-start=1]").trigger("click"),this},r.ready(function(){var t,o,r,l;i.scrollbarWidth===a&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),a=t.innerWidth()-t.height(99).innerWidth();return e.remove(),a}),i.support.fixedPosition===a&&(i.support.fixedPosition=(r=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),l=20===r[0].offsetTop||15===r[0].offsetTop,r.remove(),l)),i.extend(s.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),t=i(e).width(),n.addClass("fancybox-lock-test"),o=i(e).width(),n.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(o-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(e){e.fancybox.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",source:function(t){var i;return t.element&&(i=e(t.element).find("img").attr("src")),!i&&"image"===t.type&&t.href&&(i=t.href),i}},wrap:null,list:null,width:0,init:function(t,i){var a,n=this,o=t.width,r=t.height,s=t.source;a="";for(var l=0;l<i.group.length;l++)a+='<li><a style="width:'+o+"px;height:"+r+'px;" href="javascript:jQuery.fancybox.jumpto('+l+');"></a></li>';this.wrap=e('<div id="fancybox-thumbs"></div>').addClass(t.position).appendTo("body"),this.list=e("<ul>"+a+"</ul>").appendTo(this.wrap),e.each(i.group,function(t){var a=i.group[t],l=s(a);l&&e("<img />").on("load",function(){var i,a,s,l=this.width,c=this.height;n.list&&l&&c&&(i=l/o,a=c/r,s=n.list.children().eq(t).find("a"),i>=1&&a>=1&&(i>a?(l=Math.floor(l/a),c=r):(l=o,c=Math.floor(c/i))),e(this).css({width:l,height:c,top:Math.floor(r/2-c/2),left:Math.floor(o/2-l/2)}),s.width(o).height(r),e(this).hide().appendTo(s).fadeIn(300))}).attr("src",l).attr("title",a.title)}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(i.group.length+1)).css("left",Math.floor(.5*e(window).width()-(i.index*this.width+.5*this.width)))},beforeLoad:function(e,t){t.group.length<2?t.helpers.thumbs=!1:t.margin["top"===e.position?0:2]+=e.height+15},afterShow:function(e,t){this.list?this.onUpdate(e,t):this.init(e,t),this.list.children().removeClass("active").eq(t.index).addClass("active")},onUpdate:function(t,i){this.list&&this.list.stop(!0).animate({left:Math.floor(.5*e(window).width()-(i.index*this.width+.5*this.width))},150)},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery),function(e){var t=e.fancybox;t.helpers.buttons={defaults:{skipSingle:!1,position:"top",tpl:'<div id="fancybox-buttons"><ul><li><a class="btnPrev" title="Previous" href="javascript:;"></a></li><li><a class="btnPlay" title="Start slideshow" href="javascript:;"></a></li><li><a class="btnNext" title="Next" href="javascript:;"></a></li><li><a class="btnToggle" title="Toggle size" href="javascript:;"></a></li><li><a class="btnClose" title="Close" href="javascript:;"></a></li></ul></div>'},list:null,buttons:null,beforeLoad:function(e,t){if(e.skipSingle&&t.group.length<2)return t.helpers.buttons=!1,void(t.closeBtn=!0);t.margin["bottom"===e.position?2:0]+=30},onPlayStart:function(){this.buttons&&this.buttons.play.attr("title","Pause slideshow").addClass("btnPlayOn")},onPlayEnd:function(){this.buttons&&this.buttons.play.attr("title","Start slideshow").removeClass("btnPlayOn")},afterShow:function(i,a){var n=this.buttons;n||(this.list=e(i.tpl).addClass(i.position).appendTo("body"),n={prev:this.list.find(".btnPrev").click(t.prev),next:this.list.find(".btnNext").click(t.next),play:this.list.find(".btnPlay").click(t.play),toggle:this.list.find(".btnToggle").click(t.toggle),close:this.list.find(".btnClose").click(t.close)}),a.index>0||a.loop?n.prev.removeClass("btnDisabled"):n.prev.addClass("btnDisabled"),a.loop||a.index<a.group.length-1?(n.next.removeClass("btnDisabled"),n.play.removeClass("btnDisabled")):(n.next.addClass("btnDisabled"),n.play.addClass("btnDisabled")),this.buttons=n,this.onUpdate(i,a)},onUpdate:function(e,t){var i;this.buttons&&(i=this.buttons.toggle.removeClass("btnDisabled btnToggleOn"),t.canShrink?i.addClass("btnToggleOn"):t.canExpand||i.addClass("btnDisabled"))},beforeClose:function(){this.list&&this.list.remove(),this.list=null,this.buttons=null}}}(jQuery),function(e,t,i){var a,n={};a={init:function(i){switch(i){case"small":e.Utility.MediaQueryEvents.currentDisplayMode<e.Utility.MediaQueryEvents.eCurrentDisplayMode.TABLET?t(".fancybox-small").click(function(e){e.preventDefault()}).find("img").css("cursor","default"):n.initFancyBox(".photo-carousel.tablet-down-show.owl .owl-carousel .fancybox-small");break;case"large":n.initFancyBox(".photo-carousel.tablet-up-show.owl .owl-carousel .fancybox-thumbs")}t(document).on(e.Utility.MediaQueryEvents.eEvents.MQ_MOBILE_ENTER,function(e){t.fancybox.close(!0),t(".fancybox-small").click(function(e){e.preventDefault()})})}},n={initFancyBox:function(i){var a=n.getFancyBoxThumbs(i);a.fancybox({prevEffect:"fade",nextEffect:"fade",nextClick:!0,loop:!1,fixed:!0,helpers:{thumbs:{width:90,height:60},overlay:{closeClick:!1,locked:!0}},beforeLoad:function(){var i=this,n=i.element,o=i.group,r=o.length-1;a.first().data("fancyboxGroup");for((o.find(function(e){return"inline"===e.type})||!1)&&e.Global.Feature.ShowPDLargeDeviceSlideshowCallToAction&&(r-=1);r>=0;r-=1)t(o[r].element.parent()).hasClass("cloned")&&o.splice(r,1);t(o).each(function(e,a){t(a.element).data("href")===t(n).data("href")&&(i.index=e)})},beforeShow:function(){var i,a=t(this.element[0]),n=a.hasClass("call-to-action-large-button-panel")||a.hasClass("call-to-action-large-button-panel-tablet"),o=t(this.element).find("img").attr("alt");o||(i=t(this.element).data("fancybox-alt")),o?t(".fancybox-image").attr("alt",o):i&&t(".fancybox-image").attr("alt",i),n&&e.Global.Feature.ShowPDLargeDeviceSlideshowCallToAction&&a.parents(".fancybox-skin").addClass("call-to-action-fancy-override")},afterShow:function(){var i=t(this.element[0]),a=i.hasClass("call-to-action-large-button-panel")||i.hasClass("call-to-action-large-button-panel-tablet"),n=this.group.length;if((this.group.find(function(e){return"inline"===e.type})||!1)&&e.Global.Feature.ShowPDLargeDeviceSlideshowCallToAction&&(n-=1),!a){t(".fancybox-image").attr("onerror",t(".fancybox-thumbs:first").attr("onerror"));var o=t(".fancybox-inner"),r=this.index+1,s=t('<a class="share-pinit pinit pin-it-button" style="cursor: pointer; float: left;" title="Pinterest" rel="nofollow" ><img src="https://assets.pinterest.com/images/PinExt.png" alt="Pin It" /></a>'),l=t('<span class="fancybox-counter">'+r.toString()+"/"+n+"<span>");s.appendTo(o).fadeIn(),l.appendTo(o).fadeIn()}t("body > .fancybox-nav").remove(),t(".fancybox-overlay > .fancybox-close").remove(),t(".fancybox-outer .fancybox-nav").appendTo("body"),t(".fancybox-close").appendTo(".fancybox-overlay"),a||e.SocialShare.ConfigPinIt(s,{url:encodeURIComponent(t('meta[property="og:url"]').attr("content")),media:encodeURIComponent(t(".fancybox-image").attr("src")),title:encodeURIComponent(t('meta[property="og:title"]').attr("content")),description:encodeURIComponent(t('meta[property="og:description"]').attr("content"))}),t(".fancybox-frame").hide(),e.Utility.LogConsole("NRT.FancyBox afterShow: "+t(this))},afterClose:function(){var i=t(this.element[0]);(i.hasClass("call-to-action-large-button-panel")||i.hasClass("call-to-action-large-button-panel-tablet"))&&i.parents(".fancybox-skin").removeClass("call-to-action-fancy-override"),t(".fancybox-frame").show(),e.Utility.LogConsole("NRT.FancyBox afterClose: "+t(this))}})},getFancyBoxThumbs:function(i){var a=t(i),n="fancybox-small"===a.first().data("fancyboxGroup"),o=null;return e.Global.Feature.ShowPDLargeDeviceSlideshowCallToAction&&(o=t(n?".call-to-action-large-button-panel-tablet":".call-to-action-large-button-panel"),a=a.add(o),e.CallToAction.initializeCallToActionPanelForLargeViewer(o)),a.each(function(e,i){var a=t(i),n=a.data("href");n&&a.attr("href",n)}),a}},e.FancyBox=a}(window.NRT,jQuery,window),function(e,t,i,a,n){var o,r={};o={Initialize:function(a){r.lat=a.lat,r.lng=a.lng,r.mapClient=a.mapClient||"",r.mapVersion=a.mapVersion||"",r.mapChannel=a.mapChannel||"",r.mapLibraries=a.mapLibraries||"",r.mapSelector=t(a.mapSelector)[0],r.mobileMapSelector=t(a.mobileMapSelector)[0]||null,r.hasMobileMapSelector=a.hasMobileMapSelector||!1,r.showOnLoad=a.showOnLoad||!1,r.clickShow=a.clickShow||[],r.clickHide=a.clickHide||[],r.clickTrigger=a.clickTrigger||null,r.clickTriggerMobile=a.clickTriggerMobile||null,r.isStreetView=a.isStreetView,r.isStreetView&&(r.clickTrigger&&t(r.clickTrigger).on("click",function(e){r.onClick(e),e.preventDefault()}),r.clickTriggerMobile&&t(r.clickTriggerMobile).on("click",function(e){r.onClick(e),e.preventDefault()}),r.showOnLoad&&(r.isRegistered||r.registerMapEvents(),r.setAll())),t(i).on(e.Utility.eEvents.LINK_SHOW_COMPLETE,function(t,i){e.Utility.LogConsole("NRT.StreetViewMap: LINK_SHOW_COMPLETE captured - "+i),i.indexOf("streetview-trigger")>-1&&(r.isRegistered||r.registerMapEvents(),r.setAll())}),t(i).on(e.Utility.eEvents.TOGGLE_OPEN_COMPLETE,function(t,i){e.Utility.LogConsole("NRT.StreetViewMap: TOGGLE_OPEN_COMPLETE captured - "+i),i&&(i.indexOf("tab3")>-1||r.isMobile()&&i.indexOf("mobile-streetview-trigger")>-1)&&(r.isRegistered||r.registerMapEvents(),r.setAll())}),t(i).on(e.Utility.eEvents.TAB_OPEN_COMPLETE,function(t,i){var a=i?i.content:"";e.Utility.LogConsole("NRT.StreetViewMap: TAB_OPEN_COMPLETE captured - "+a),a&&(a.indexOf("tab3")>-1||r.isMobile()&&a.indexOf("mobile-streetview-trigger")>-1)&&(r.isRegistered||r.registerMapEvents(),r.setAll())})},GetMap:function(){return r.map}},r={map:null,mapClient:"",mapVersion:"",mapChannel:"",mapLibraries:"",clickShow:[],clickHide:[],clickTrigger:null,clickTriggerMobile:null,showOnLoad:null,latLng:null,lat:null,lng:null,camera:null,cameraHeading:null,cameraPitch:null,cameraYaw:null,mapSelector:null,mobileMapSelector:null,hasMobileMapSelector:!1,isStreetView:!1,isRegistered:!1,isMobile:function(){return(i.innerWidth||t(i).width())<=800},onClick:function(a){var n;r.isMobile()||r.clickHide&&r.clickHide.length>0&&t(r.clickHide.join(", ")).hide(0),r.clickShow&&r.clickShow.length>0&&(n=t(a.currentTarget).attr("class"),t(r.clickShow.join(", ")).show(0,function(){this!==r.mapSelector||r.isMobile()||(e.Utility.LogConsole("NRT.StreetViewMap: LINK_SHOW_COMPLETE triggered - "+n),t(i).trigger(e.Utility.eEvents.LINK_SHOW_COMPLETE,n))}))},setAll:function(){loadGoogleMaps(r.mapVersion,r.mapClient,r.mapChannel,r.mapLibraries).done(function(){e.Utility.LogConsole("NRT.StreetViewMap.setAll: loadGoogleMaps done"),r.setMap()})},setMap:function(){(new google.maps.StreetViewService).getPanoramaByLocation(r.latLng,50,t.proxy(r.streetViewCallback,this))},registerMapEvents:function(){loadGoogleMaps(r.mapVersion,r.mapClient,r.mapChannel,r.mapLibraries).done(function(){e.Utility.LogConsole("NRT.StreetViewMap.registerMapEvents: loadGoogleMaps: done"),t.support.leadingWhitespace&&(google.maps.event.addDomListener(i,"load",t.proxy(r.setAll,this)),google.maps.event.addDomListener(i,"resize",t.proxy(r.setAll,this))),r.latLng=new google.maps.LatLng(r.lat,r.lng),r.isRegistered=!0})},streetViewCallback:function(e,t){if(t===google.maps.StreetViewStatus.OK){var i,a,n,o,s,l,c=google.maps.geometry.spherical.computeHeading(e.location.latLng,r.latLng),d=function(e){return Math.sin(e*Math.PI/180)};r.camera=e.location.latLng,r.cameraPitch=e.tiles.originPitch,r.cameraYaw=e.tiles.originPitchYaw,r.cameraHeading=e.tiles.originalHeading,i={position:r.camera,pov:{heading:c,pitch:0,zoom:0},fullscreenControl:!1},a=r.hasMobileMapSelector&&r.isMobile()?r.mobileMapSelector:r.mapSelector,r.map=new google.maps.StreetViewPanorama(a,i),null!==r.map&&void 0!==r.map&&(n=a.clientWidth,o=a.clientHeight,l=n*d(s=Math.abs(r.cameraPitch))+o*d(90-s),r.map.growY=Math.round((l-o)/2),r.map.growX=Math.round((l*n/o-n)/2),r.rotate(a),r.map.setVisible(!0))}},getRoll:function(){var e,t,i,a,n,o,s,l,c,d,u=function(e){return Math.abs(Math.abs(e)-1)<1e-10?Math.round(Math.acos(e)):Math.acos(e)},h=function(e){return Math.sin(e)},p=function(e){return Math.cos(e)},g=function(e){return Math.abs(e)},m=function(e){return e*Math.PI/180},f=function(e){return 180*e/Math.PI};if(e=0,void 0!==r.cameraHeading&&null!==r.cameraHeading){for(i={heading:r.cameraHeading,pitch:r.cameraPitch,yaw:r.cameraYaw},a=r.map.getPov().heading;a<0;)a+=360;for(;a>360;)a-=360;l=m(g(i.pitch)),c=m(90),t=m((i.heading<0?i.heading+360:i.heading)-a),d=u(p(l)*p(c)+h(l)*h(c)*p(t)),h(l)*h(c)*h(d)!=0?(e=u((p(l)-p(c)*p(d))/(h(c)*h(d))),(s=i.heading-a)<0&&(s+=360),e=i.pitch<0?s<180?-1*f(e):f(e):s>180?-1*f(e):f(e)):((t=i.heading-90)<0&&(t+=360),n=-1*(g(a-t)/90-1),g(e=i.pitch*n)>g(i.pitch)&&(o=2*(g(e)-g(i.pitch)),e=e<0?e+o:e-o))}return e},stopRoll:function(){var e;if(r.map.tilesLoaded&&clearInterval(r.map.tilesLoaded),r.map.canvas)for(e in r.map.canvas)r.map.canvas.hasOwnProperty(e)&&r.map.canvas[e].removeAttribute("style");delete r.map.canvas,delete r.map.tilesLoaded,r.map.setZoom(1)},rotate:function(e){var i,n,o,s,l,c,d,u=["transform","mozTransform","webkitTransform","oTransform","msTransform"],h=u.length,p=r.map.growX,g=r.map.growY;for(n=0;n<h;n+=1)if(a.body.style[u[n]]){i=u[n];break}if(r.map.setZoom((1*(r.map.getZoom()||1)-Math.round(g/3))/100),!r.map.getVisible())return r.stopRoll();s=r.getRoll(),r.map.canvas={},(c=(l=t(e).find("canvas")).length)>0&&(r.map.canvas.canvas=l[c-1]);for(o in r.map.canvas)r.map.canvas.hasOwnProperty(o)&&((d=r.map.canvas[o]).style[i]="rotate("+s+"deg)",d.style.margin="-"+g+"px "+p+"px "+g+"px -"+p+"px",d.style.width=e.clientWidth+2*p+"px",d.style.height=e.clientHeight+2*g+"px")}},e.StreetViewMap=o}(window.NRT,jQuery,window,document),function(e,t,i){var a,n={};a={insertCallToActionPanelInCarousel:function(i){var a,n,o;i.data("photocount")>1?(a=t(".sm-photo-viewer .call-to-action-button-panel").clone(!0),o=(n=i.parent().hasClass("tablet-up-show"))?"thumb":"fancybox-small",a.attr("data-fancybox-group",o),n?a.find(".sas-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_LG_CAR_C2A_SAS_BTN).end().find(".save-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_LG_CAR_C2A_FAV_LNK).end().find(".share-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_LG_CAR_C2A_SHR_LNK):a.find(".sas-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_SM_CAR_C2A_SAS_BTN).end().find(".save-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_SM_CAR_C2A_FAV_LNK).end().find(".share-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_SM_CAR_C2A_SHR_LNK)):a.attr("data-fancybox-group","fancybox-small"),a.appendTo(i)},initializeCallToActionPanelForLargeViewer:function(t){t.find(".sas-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_LG_VWR_C2A_SAS_BTN).end().find(".save-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_LG_VWR_C2A_FAV_LNK).end().find(".share-section a").attr("data-origin",e.Event.eTrackingOrigin.PD_LG_VWR_C2A_SHR_LNK)}},n={selSaveSections:".call-to-action-button-panel .save-section, .call-to-action-large-button-panel .save-section, .call-to-action-large-button-panel-tablet .save-section",selSaveLinks:".call-to-action-button-panel .save, .call-to-action-large-button-panel .save, .call-to-action-large-button-panel-tablet .save",initialize:function(){t(i).on(e.Event.eAction.PROPERTY_SAVED,function(){t(n.selSaveSections).addClass("hide"),e.Utility.LogConsole("NRT.CallToAction.initialize: event:nrt.Event.eAction.PROPERTY_SAVED")}).on(e.Event.eAction.PROPERTY_DELETED,function(){t(n.selSaveSections).removeClass("hide"),e.Utility.LogConsole("NRT.CallToAction.initialize: event:nrt.Event.eAction.PROPERTY_DELETED")}).on("click",n.selSaveLinks,function(i){var a=t(i.currentTarget),n=a.data();i.preventDefault(),e.HBIB.AddPropertyToFavorites(n.pid,null,n.origin),a.blur(),e.Utility.LogConsole("NRT.CallToAction.initialize: save: clicked")}),e.Utility.LogConsole("NRT.CallToAction: initialized")}},e.Utility.BaseOrigin().PD&&(e.Global.Feature.ShowPDSmallDevicePhotoViewerCallToAction||e.Global.Feature.ShowPDSmallDeviceCarouselCallToAction||e.Global.Feature.ShowPDLargeDeviceSlideshowCallToAction||e.Global.Feature.ShowPDLargeDeviceCarouselCallToAction)&&n.initialize(),e.CallToAction=a}(window.NRT,jQuery,document),function(e,t,i,a){var n,o={};i.self===i.top&&t("body").hasClass("body-property-detail")&&i.history.state&&i.history.state.depth>0&&i.addEventListener("popstate",function(t){e.Utility.LogConsole("nrt.PropertyDetail: popstate listener > pd:popstate",t.state),!t.state.hasOwnProperty("depth")&&/\/(?:p|d|m)id_\d+\//.test(i.location.href)||i.location.reload()},!0),n={PreInitialize:function(e){o.isModalView=e.isModalView||!1,o.preventStage=o.isModalView&&i.navigator.userAgent.toLowerCase().indexOf("ipad")>-1,o.isModalView&&(t(document).on("click",'a[href*="/pid_"]',function(e){var a=document.createElement("a");a.href=t(this).attr("href"),top.postMessage(a.pathname,i.location.origin),e.preventDefault()}),o.configureDetailLinksForModal())},Initialize:function(e){o.listingID=e.listingID||null,o.mlsNumber=e.mlsNumber||"",o.onboardCommunityUrl=e.onboardCommunityUrl||"",o.onboardSchoolUrl=e.onboardSchoolUrl||"",o.hasMortgageCalculator=e.hasMortgageCalculator||!1,o.isCalculatePayment=e.isCalculatePayment||!1,o.isMetroProperty=e.isMetroProperty||!1,o.photoCount=e.photoCount||0,o.lat=e.lat||0,o.lng=e.lng||0,o.isStreetView=e.isStreetView||!1,o.locationBoundaries=e.locationBoundaries||null,o.isDisplayOnPropDetailMap=e.isDisplayOnPropDetailMap||!1,o.mapJS=e.mapJS||"",o.mapClient=e.mapClient||"",o.mapVersion=e.mapVersion||"",o.mapChannel=e.mapChannel||"",o.mapLibraries=e.mapLibraries||"",o.signinDialog(),o.photoViewAll(),o.loadOwlCarousels(),o.loadPageViews(),o.tabSetInit(),o.initPageEvents(),o.initActionBarButtons(),self!==top&&o.setupAuthenticationReturnPath(t("#sign-up-vow"))},LazyLoadPhotos:function(){o.lazyLoadPhotos()},Track:function(){o.track()}},o={listingID:null,mlsNumber:"",facebookLogin:null,onboardCommunityUrl:"",onboardSchoolUrl:"",hasMortgageCalculator:!1,isCalculatePayment:!1,isMetroProperty:!1,photoCount:0,lat:null,lng:null,isStreetView:!1,locationBoundaries:null,isDisplayOnPropDetailMap:!1,mapJS:"",mapClient:"",mapVersion:"",mapChannel:"",mapLibraries:"",$photoViewAll:null,preventStage:!1,currentOwlLargeIndex:0,currentOwlSmallIndex:0,largeOwlCarouselLoaded:!1,smallOwlCarouselLoaded:!1,schoolScoresNotInView:0,$schoolScores:null,throttledHandler:null,schoolsExpandEl:null,initPageEvents:function(){var a,n,r,s,l;t(i).resize(function(){e.Utility.Throttle(o.loadOwlCarousels(),200)}),t("#sort-by-mobile").change(function(){a=t(this).find("option:selected").attr("id"),t('div.property-tabs a[id="tabSet_'+a+'"]').trigger("click")}),o.lat>0&&o.isDisplayOnPropDetailMap&&(o.photoCount>1?(e.DetailMap.Initialize({mapSelector:".map-location-tab",lat:o.lat,lng:o.lng,clickTrigger:".tab2",clickShow:[],clickHide:[],hasMobileMapSelector:!1,openInfoWindow:!1,defaultZoom:13,isBoundaries:!0,locationBoundaries:o.locationBoundaries,isPOI:!0,renewMapOnResize:!1,mapJS:o.mapJS,loadMapOnPageLoad:!1,mapVersion:o.mapVersion,mapClient:o.mapClient,mapChannel:o.mapChannel,mapLibraries:o.mapLibraries}),e.StreetViewMap.Initialize({mapSelector:".streetview-canvas",lat:o.lat,lng:o.lng,clickTrigger:".tab3",clickShow:[],isStreetView:o.isStreetView,mapVersion:o.mapVersion,mapClient:o.mapClient,mapChannel:o.mapChannel,mapLibraries:o.mapLibraries})):(e.DetailMap.Initialize({mapSelector:".map-location-with-toolbar",mobileMapSelector:".map-location-mobile",hasMobileMapSelector:!0,clickTrigger:".mapview-trigger",clickTriggerMobile:".mobile-mapview-trigger",clickShow:[".map-location-with-toolbar",".street-view-li",".whats-nearby"],clickHide:[".streetview-canvas-with-toolbar",".map-location-li"],lat:o.lat,lng:o.lng,openInfoWindow:!1,defaultZoom:13,isBoundaries:!0,locationBoundaries:o.locationBoundaries,isPOI:!0,poiSelector:"#detail-nearby-tab",poiSelectorMobile:"#detail-nearby-mobile",renewMapOnResize:!1,mapJS:o.mapJS,loadMapOnPageLoad:!0,mapVersion:o.mapVersion,mapClient:o.mapClient,mapChannel:o.mapChannel,mapLibraries:o.mapLibraries}),e.StreetViewMap.Initialize({mapSelector:".streetview-canvas-with-toolbar",mobileMapSelector:".streetview-canvas",hasMobileMapSelector:!0,clickTrigger:".streetview-trigger",clickTriggerMobile:".mobile-streetview-trigger",clickShow:[".streetview-canvas-with-toolbar",".map-location-li"],clickHide:[".map-location-with-toolbar",".street-view-li",".whats-nearby"],lat:o.lat,lng:o.lng,isStreetView:o.isStreetView,mapVersion:o.mapVersion,mapClient:o.mapClient,mapChannel:o.mapChannel,mapLibraries:o.mapLibraries}))),o.hasMortgageCalculator&&(o.isCalculatePayment?e.MortgageCalc.Initialize():o.isMetroProperty||t("#divCBProperty").hide()),""!==o.onboardCommunityUrl&&(n=t("#onboard-community-trigger"),r=t("#onboard-community"),n.parent().hasClass("active")&&r.attr("src",o.onboardCommunityUrl),n.click(function(e){""===r.attr("src")&&r.attr("src",o.onboardCommunityUrl)})),""!==o.onboardSchoolUrl&&(s=t("#onboard-school-trigger"),l=t("#onboard-school"),s.parent().hasClass("active")&&l.attr("src",o.onboardSchoolUrl),s.click(function(e){""===l.attr("src")&&l.attr("src",o.onboardSchoolUrl)})),e.Utility.ReadMore(".story-section"),e.Utility.ReadMoreProperty(".remark-section"),t("#cb-home-warranty").on("click",function(){t("#home-warranty-modal").lightbox_me({centered:!0})})},signinDialog:function(){var a,n=new e.HBIB.LoginAjax("#authdialog > form"),r=t("#authdialog").find("p.not-a-member a");t(".data-signin").click(function(s){s.preventDefault(),a=i.location,n.BindForm(function(){a.reload()}),e.FacebookLogin.Initialize({clickSelector:".account-sign-in-modal .facebook-signin",onLogin:function(){a.reload()},returnUrl:encodeURIComponent(a.pathname+a.search),cancelUrl:encodeURIComponent(a.pathname+a.search)}),t("#authdialog").lightbox_me({centered:!0,onClose:function(){n.ResetForm()}}),self!==top&&o.setupAuthenticationReturnPath(r)})},setupAuthenticationReturnPath:function(t){var a,n;(n=document.createElement("a")).href=e.session.get("pdModal").urls[0],pdModalState=JSON.parse(sessionStorage.getItem("nrt.session.pdModal")),pdModalState.isSyncing=!0,sessionStorage.setItem("nrt.session.pdModal",JSON.stringify(pdModalState)),a=n.pathname+i.top.location.search,t.prop("href","/sign-up/?ReturnURL="+encodeURIComponent(a))},tabSetInit:function(){t.tabset({header:".layout-main .tabset .tabhead > li",content:".layout-main .tabset .tabcontent > div",activeIndex:0,after:function(){var a=t(this.header+"."+this.activeClass+" a").attr("class");this.content=a,t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,this)}}),t.tabset({header:".tabset-b .tabhead > li",content:".tabset-b .tab",activeIndex:0}),t.tabset({header:".property-tabs .tab-nav > li",content:".property-tabs .tab-content-wrap > .tab-content",activeIndex:0,after:function(){t("div.property-tabs div.tab-content.active div.property-snapshot").matchHeight(),e.Utility.LogConsole("NRT.PropertyDetail.tabsetInit: matchHeight on listings for the active tab"),t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,this)}}),t(".property-tabs").on("click",".btn-view-more > a",function(e){e.preventDefault(),o.tabSetLoadMore(t(this))})},tabSetLoadMore:function(a){var n,r=a.parents(".property-row"),s=r.children("ul").last(),l=a.data("loaded"),c=a.attr("href");l?e.Utility.LogConsole("NRT.PropertyDetail.tabSetLoadMore: this tab was already loaded"):t.ajax({type:"GET",url:c}).done(function(i){s.nextAll().remove(),s.after(i).next().waitForImages(function(){t(this).find("div.property-snapshot").matchHeight(),e.Utility.LogConsole("NRT.PropertyDetail.tabsetLoadMore: matchHeight on new row of listings")}),a.data("loaded",!0),s=r.children("ul").last(),t("html, body").animate({scrollTop:s.offset().top-50},1e3)}).fail(function(t,i,a){e.Utility.LogConsole("Error loading related listings :"+a)}).always(function(){t("body").css("cursor","default"),e.PrefetchedListings.InitializeTabsets(),o.isModalView&&o.configureDetailLinksForModal(),n={content:".property-tabs .tab-content-wrap > .tab-content"},t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,n)})},photoOwlSliderLargeInit:function(){var i=t("div.photo-carousel.tablet-up-show.owl"),a=i.find(".owl-carousel"),n=a.data("photocount")||0,r=!(n<=1),s={dots:!1,nav:!1,margin:r?1:0,stagePadding:0,touchDrag:r,mouseDrag:r,loop:r,merge:r,mergeFit:r,autoWidth:!0},l={};a.trigger("destroy.owl.carousel"),a.html(a.find(".owl-stage-outer").html()).removeClass("owl-loaded"),a.one("initialized.owl.carousel",function(a){var r=a.item.index,s=t(a.currentTarget).find(".owl-item").eq(r).find("img").attr("src");1===n?i.backgroundBlur({imageURL:s,blurAmount:20,imageClass:"bg-blur",duration:250,opacity:.75}):i.find("div.controls span.prev.owl, span.next.owl").velocity({opacity:1},{duration:1e3}),i.find("p.photo-count.icon-camera.owl").velocity({opacity:1},{duration:1e3}),o.largeOwlCarouselLoaded=!0,e.FancyBox.init("large")}),a.off("changed.owl.carousel").on("changed.owl.carousel",function(a){if(a.namespace&&"position"===a.property.name){var r=a.item.index,s=t(a.currentTarget).find(".owl-item").eq(r).find("img").attr("src"),l=r+1-a.relatedTarget._clones.length/2,c=a.item.count,d=i.find("p.photo-count.icon-camera.owl");(l>c||0===l)&&(l=c-l%c),o.currentOwlLargeIndex=l-1,e.Global.Feature.ShowPDLargeDeviceCarouselCallToAction&&(l>(c-=1)?d.velocity({opacity:0},{duration:0}):d.velocity({opacity:1},{duration:250})),d.text(l+"/"+c),1===n&&i.backgroundBlur(s).end()}e.Utility.LogConsole("NRT.PropertyDetails.photoOwlSliderLargeInit: Large Owl Carousel: changed.owl.carousel initialized.owl.carousel: event.type: "+a.type+", my.currentOwlLargeIndex: "+o.currentOwlLargeIndex)}),r?(l={responsive:{0:{items:3},783:{items:4},1200:{items:5}},startPosition:o.currentOwlLargeIndex},i.find(".controls").find(".prev").off("click").on("click",function(){a.trigger("prev.owl.carousel")}).end().find(".next").off("click").on("click",function(){a.trigger("next.owl.carousel")}).end()):l={items:1,center:!0,startPosition:o.currentOwlSmallIndex},a.owlCarousel(t.extend(!0,{},s,l))},photoOwlSliderSmallInit:function(){var i=t("div.photo-carousel.tablet-down-show.owl"),a=i.find(".owl-carousel"),n=a.data("photocount")||0,r=!(n<=1),s={dots:!1,nav:!1,margin:r?1:0,stagePadding:0,touchDrag:r,mouseDrag:r,loop:r,merge:r,mergeFit:r,autoWidth:!0},l={};a.trigger("destroy.owl.carousel"),a.html(a.find(".owl-stage-outer").html()).removeClass("owl-loaded"),a.one("initialized.owl.carousel",function(a){var r=a.item.index,s=t(a.currentTarget).find(".owl-item").eq(r).find("img").attr("src");1===n?i.backgroundBlur({imageURL:s,blurAmount:20,imageClass:"bg-blur",duration:250,opacity:.75}):i.find("div.controls span.prev.owl, span.next.owl").velocity({opacity:1},{duration:1e3}),i.find("p.photo-count.icon-camera.owl").velocity({opacity:1},{duration:1e3}),o.smallOwlCarouselLoaded=!0,e.FancyBox.init("small")}),a.off("changed.owl.carousel").on("changed.owl.carousel",function(a){if(a.namespace&&"position"===a.property.name){var r=a.item.index,s=t(a.currentTarget).find(".owl-item").eq(r).find("img").attr("src"),l=r+1-a.relatedTarget._clones.length/2,c=a.item.count,d=i.find("p.photo-count.icon-camera.owl");(l>c||0===l)&&(l=c-l%c),o.currentOwlSmallIndex=l-1,e.Global.Feature.ShowPDSmallDeviceCarouselCallToAction&&(l>(c-=1)?d.velocity({opacity:0},{duration:0}):d.velocity({opacity:1},{duration:250})),d.text(l+"/"+c),1===n&&i.backgroundBlur(s).end()}e.Utility.LogConsole("NRT.PropertyDetails.photoOwlSliderSmallInit: Small Owl Carousel: changed.owl.carousel initialized.owl.carousel: event.type: "+a.type+", my.currentOwlSmallIndex: "+o.currentOwlSmallIndex)}),r?(l={responsive:{0:{items:3},601:{items:3},783:{items:4},1200:{items:5}},startPosition:o.currentOwlSmallIndex},i.find(".controls").find(".prev").off("click").on("click",function(){a.trigger("prev.owl.carousel")}).end().find(".next").off("click").on("click",function(){a.trigger("next.owl.carousel")}).end()):l={items:1,center:!0,startPosition:o.currentOwlSmallIndex},a.owlCarousel(t.extend(!0,{},s,l))},updateSliderDirectionControls:function(e,t,i,a){0===e?(i.addClass("disabled"),t.removeClass("disabled")):e===a-1?i.removeClass("disabled"):(i.removeClass("disabled"),t.removeClass("disabled"))},photoViewAll:function(){var a,n,r,s=".photo-carousel.tablet-up-show .owl-carousel";t(document).on("click",".small-photo",function(l){l.preventDefault(),o.$photoViewAll||(o.$photoViewAll=t(".sm-photo-viewer"),e.Global.Feature.ShowPDSmallDevicePhotoViewerCallToAction&&o.$photoViewAll.find(".save").attr("data-origin",e.Event.eTrackingOrigin.PD_SM_VWR_C2A_FAV_LNK).end().find(".sas").attr("data-origin",e.Event.eTrackingOrigin.PD_SM_VWR_C2A_SAS_BTN).end().find(".share").attr("data-origin",e.Event.eTrackingOrigin.PD_SM_VWR_C2A_SHR_LNK),(n=t(s+" .owl-item").not(".cloned").find(".fancybox-thumbs")).length<1&&(n=t(s+" .fancybox-thumbs")),r='<a class="btn-close close" href="#"><span class="visually-hidden">Close</span></a>',n.each(function(e,i){var a=t(i);r+='<img src="'+a.data("href")+'" style="margin-bottom:1px; margin-left:auto; margin-right:auto;" onerror="'+a.attr("onerror")+'">',a.attr("href",a.data("href"))}),o.$photoViewAll.prepend(r),t(i).on("popstate",function(e){t("#ViewAllPhotoModal").trigger("close")})),(a=t("#ViewAllPhotoModal")).html(o.$photoViewAll.html()).find(".call-to-action-button-panel").hide().end().lightbox_me({onClose:function(){a.hide(),a.find(".call-to-action-button-panel").hide(),"#ViewAllPhotos"===i.location.hash&&history.back()},onLoad:function(){a.waitForImages(function(){a.trigger("reposition"),i.scrollTo(0,0),a.find(".call-to-action-button-panel").show()})},modalCSS:{top:"0px",width:"100%"},zIndex:1e3}),Modernizr.history&&history.pushState("","View All Photos","#ViewAllPhotos")}),e.Utility.LogConsole("NRT.PropertyDetail.photoViewAll: bindings complete")},loadPageViews:function(){o.listingID&&o.listingID>0&&t.ajax({url:e.Utility.AssembleUrl(["propertylisting","getpageviews"]),type:"GET",dataType:"json",contentType:"application/json",data:{id:o.listingID}}).done(function(t){o.updatePageViews(t),e.Utility.LogConsole("NRT.PropertyDetail.loadPageViews: ajax call done")})},updatePageViews:function(i){var a,n;i&&(a=e.Utility.FormatCommas(i),n=1===i?" time":" times",t("div.details-block div.col-1 ul.padding-top").append("<li><strong>Viewed: </strong>"+a+n+"</li>"))},track:function(){var i;o.listingID&&o.listingID>0&&(i={id:o.listingID,mlsNumber:o.mlsNumber},t.ajax({url:e.Utility.AssembleUrl(["propertylisting","track"]),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(i)}).done(function(t){e.Utility.LogConsole("NRT.PropertyDetail.track: ajax call done, HttpStatus = "+t)}).fail(function(t,i,a){var n="NRT.PropertyDetail.track: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+a),new Error(n)}))},loadOwlCarousels:function(){if(e.Utility.MediaQueryEvents.currentDisplayMode<e.Utility.MediaQueryEvents.eCurrentDisplayMode.DESKTOP){if(!o.smallOwlCarouselLoaded){var i=t(".photo-carousel.tablet-down-show .owl-carousel");e.Global.Feature.ShowPDSmallDeviceCarouselCallToAction&&i.data("photocount")>1&&e.CallToAction.insertCallToActionPanelInCarousel(i),i.waitForImages(o.photoOwlSliderSmallInit)}}else if(!o.largeOwlCarouselLoaded){var a=t(".photo-carousel.tablet-up-show .owl-carousel");e.Global.Feature.ShowPDLargeDeviceCarouselCallToAction&&a.data("photocount")>1&&e.CallToAction.insertCallToActionPanelInCarousel(a),a.waitForImages(o.photoOwlSliderLargeInit)}},tabletDown_GoToRMI:function(){var i=t(".layout-sidebar form"),a=i.find(".tablet-up-show.js-more-info");e.Utility.MediaQueryEvents.currentDisplayMode<=e.Utility.MediaQueryEvents.eCurrentDisplayMode.TABLET&&a.is(":hidden")&&i.find(".btn-primary.tablet-down-show.trigger-more-info-form").not(".opened").click().addClass("opened"),t("html, body").animate({scrollTop:a.offset().top},1e3)},initActionBarButtons:function(){t(document).on("click","p.utility-buttons.action-bar a.icon-printer",function(e){e.preventDefault(),t(this).blur(),i.print()}).on("click","p.utility-buttons.action-bar a.icon-question",function(e){e.preventDefault(),t(this).blur(),o.tabletDown_GoToRMI()}).on("click","body.body-property-detail a.icon-hide",function(a){var n,r=t(a.currentTarget);a.preventDefault(),t(this).blur(),n=r.data("pid"),r.hasClass("hidden")?(e.HBIB.RemoveHiddenListing(n),e.HBIB.SwitchIconHide(n,!1),o.isModalView&&i.top.App.reloadResults()):e.HBIB.HideListing(n,function(){o.isModalView&&i.top.App.reloadResults(),e.HBIB.SwitchIconHide(n,!0),e.HBIB.SwitchIconFavorite(n,!1)}),e.SearchResultsNavigation.ResetPropertyDetails()})},lazyLoadPhotos:function(){t(".nrt-property-card-img").each(function(){var i=t(this),a=i.data("src"),n=i.data("delay");n=n>0?n:100,a&&a.length>0&&setTimeout(function(){i.attr("src",a),e.Utility.LogConsole("NRT.PropertyDetail.lazyLoadPhotos: loaded src = "+a)},n)}),e.Utility.LogConsole("NRT.PropertyDetail.lazyLoadPhotos: setup done")},configureDetailLinksForModal:function(){t("a").each(function(){var i,a,n;"details-link"===(i=t(this)).context.className?(a=i.attr("href"),n=e.Utility.UpdateUrlParam(a,"ismodal",1),i.attr("href",n)):"agent-details-link"===i.context.className&&i.attr("target","_top")})},schoolScoreScrollHandler:function(a){if(o.schoolsExpandEl=t(".details-block-schools .toggle-trigger").get(0),o.schoolScoresNotInView<=0)return t(i).off("resize, scroll",o.throttledHandler),o.schoolsExpandEl&&o.schoolsExpandEl.removeEventListener("click",o.schoolScoreScrollHandler,!0),null;setTimeout(function(){o.$schoolScores.each(function(i,a){var n=t(a);e.Utility.checkElementInView(n)&&!1===n.hasClass("completion-circle-progress")&&(o.schoolScoresNotInView=o.schoolScoresNotInView-1,n.addClass("completion-circle-progress"))})}),o.schoolScoresNotInView<=0&&(t(i).off("resize, scroll",o.throttledHandler),o.schoolsExpandEl&&o.schoolsExpandEl.removeEventListener("click",o.schoolScoreScrollHandler,!0))}},e.Utility.BaseOrigin().PD&&e.Global.Feature.UseNewSchoolUI&&(o.$schoolScores=t(".school-data-score.completion-circle-wrapper .completion-circle-foreground"),o.schoolScoresNotInView=o.$schoolScores.length,o.schoolScoresNotInView>0&&(o.throttledHandler=e.Utility.Throttle(o.schoolScoreScrollHandler,100),o.schoolsExpandEl=t(".details-block-schools .toggle-trigger").get(0),t(i).on("resize, scroll",o.throttledHandler).on("load",o.schoolScoreScrollHandler),o.schoolsExpandEl&&o.schoolsExpandEl.addEventListener("click",o.schoolScoreScrollHandler,!0))),e.PropertyDetail=n}(window.NRT,jQuery,window),function(e){e.fn.changeElementType=function(t){var i={};e.each(this[0].attributes,function(e,t){i[t.nodeName]=t.nodeValue}),this.replaceWith(function(){return e("<"+t+"/>",i).append(e(this).contents())})}}(jQuery),function(e,t,i,a){var n,o={};n={Initialize:function(n,r,s){var l,c,d,u=new e.HBIB.LoginAjax("#authdialog > form"),h=t("div#listings");u.BindForm(function(){e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(a).trigger(e.Event.eAction.USER_SIGNIN,["manual","","preferred_agent"]),e.session.item("LoggedInStatus","ManualLoggedIn")),i.location.reload()}),o.isTeam=n,o.entityID=r,o.entityName=s,o.initSubscriberInfo(),h.length>0?(c=(l=h.data()).url,d={id:r,displayName:s,listingsUrl:l.listingsUrl,soldsUrl:l.soldsUrl},h.load(c,d,function(){e.Utility.LogConsole("NRT.AgentTeam.Initialize: Properties Ajax Load: Complete"),o.initPageEvents(),o.tabSetInit(),e.PrefetchedListings.InitializeTabsets(".tabcontent .property-snapshot"),t("div.agent-profile div.photo-wrap img.lazyload").each(function(){var e=t(this);e.attr("src",e.data("original")).removeClass("lazyload")}),t("div#listings").waitForImages(function(){t("div.agent-profile div.tabcontent div.property-snapshot").matchHeight()}),e.Utility.LogConsole("NRT.AgentTeam: listings.load: matchHeight executed on agent/team listing")})):o.initPageEvents(),e.Utility.LogConsole("NRT.AgentTeam.Initialize: Complete")},SetLanguageSelection:function(){var e="#AgentTeamSearch_LanguageID";t(a).on("change",e,function(){t("#AgentTeamSearch_IsLanguage").prop("checked",t(e).val()>0)})},SetStartsWithSelection:function(){var e=".js-agent-team-search-starts-with",i="#AgentTeamSearch_IsStartsWith";t(a).on("change",e,function(){t(i).prop("checked",t(e).val()),t("#IsStartsWith").val("true")}),t(i).change(function(){t("#IsStartsWith").val(t(this).is(":checked").toLowerCase())})},ToggleAgentResultsSearch:function(){var e,i=".trigger-results-agents-searchby",a="#IsSearchByNameAndLocation";t(i).each(function(){t(this).on("click",function(n){e="true"===t(a).val().toLowerCase(),t(a).val(!e),o.toggleAgentSearchPanel(!e),t("#AgentTeamName").val(""),e?t(i).text("Find agents by name"):t(i).text("Find agents by location"),n.preventDefault()})})},InitializeAgentSimpleSearch:function(){t("#Name_LocationID").val(""),t("#SearchUrl").val(""),t("#form-agent-search").keydown(function(e){13===e.keyCode&&(o.submitSimpleSearchPost("#form-agent-search","#LocationName_Location",e),e.preventDefault())}).submit(function(e){o.submitSimpleSearchPost("#form-agent-search","#LocationName_Location",e),e.preventDefault()}),t(".submit-btn").on("click",function(e){-1===t.inArray(t(this).attr("id"),["norcal-submit","socal-submit"])&&o.submitSimpleSearchPost(this.form,"#LocationName_Location",e)})},InitializeAgentSearch:function(){var e,a;t("#IsSearchByNameAndLocation").val(t("#IsSearchByNameAndLocation").val().toLowerCase()),t("#Name_LocationID").val(""),t("#SearchUrl").val(""),t(".trigger-agents-search-by-location").on("click",function(e){o.switchSearchBy(!1),e.preventDefault()}),t(".trigger-agents-search-by-name-location").on("click",function(e){o.switchSearchBy(!0),e.preventDefault()}),t("#form-agent-search").keydown(function(e){13===e.keyCode&&(o.submitSearchPost("#form-agent-search","#LocationName","#AgentTeamNameLocation",!0,e),e.preventDefault())}).submit(function(e){o.submitSearchPost("#form-agent-search","#LocationName","#AgentTeamNameLocation",!0,e),e.preventDefault()}),t(".starts-with-trigger-location-js").on("click",function(n){t("#IsSearchByNameAndLocation").val(!1),t("#Name_IsStartsWith").val(!0),""!==(e=o.getAgentZoneUrl())&&(a=o.getStartsWithSearchQueryString(t(this).text()),i.location.href=e+a),n.preventDefault()}),t(".submit-btn").on("click",function(e){-1===t.inArray(t(this).attr("id"),["norcal-submit","socal-submit"])&&o.submitSearchPost(this.form,"#LocationName","#AgentTeamNameLocation",!0,e)})},InitializeAgentResults:function(){var e,a,n,r,s,l,c;t("#IsSearchByNameAndLocation").val(t("#IsSearchByNameAndLocation").val().toLowerCase()),t("#IsStartsWith").val(t("#IsStartsWith").val().toLowerCase()),t("form#form-agent-by-name-location-js .submit-btn").on("click",function(i){e="true"===t("#IsSearchByNameAndLocation").val()?"#LocationName_NameLocation":"#LocationName_Location",o.submitSearchPost(this.form,e,"#AgentTeamName",!1,i),i.preventDefault()}),t("ul.agent-results-pager li a").on("click",function(e){a=i.location.pathname.replace(/p_(\d{1,4})\//g,""),n=t(this).data("pagenumber"),r=1===n?"":"p_"+n+"/",""!==a&&(o.setUpdateResults(!0),s=o.getAgentSearchQueryString(t("#AgentTeamName").val()),(c=t(t("form#form-agent-by-name-location-js")[0])).prop("action",a+r+s),c.submit()),e.preventDefault()}),t("select#SortOptionDDL").on("change",function(){""!==(a=i.location.pathname.replace(/p_(\d{1,4})\//g,""))&&(o.setUpdateResults(!0),s=o.getAgentSearchQueryString(t("#AgentTeamName").val()),(l=t("input#SortOption")).val(t(this).val()),l.parent("form").prop("action",a+s).submit())}),t("input#LocationName_NameLocation").on("change",function(){t("input#LocationName_Location").val(t("input#LocationName_NameLocation").val())}),t("input#LocationName_Location").on("change",function(){t("input#LocationName_NameLocation").val(t("input#LocationName_Location").val())})}},o={entityName:"",entityID:0,isTeam:!1,preferredID:0,isSubscriber:!1,isAuthenticated:!1,isPreferred:!1,authDialogSel:"#authdialog",initSubscriberInfo:function(){var i=t("div#subscriberInfo").data("subscriber");o.preferredID=i.PreferredID,o.isSubscriber=i.IsSubscriber,o.isAuthenticated=i.IsAuthenticated,o.isPreferred=o.entityID===o.preferredID,e.Utility.LogConsole("NRT.AgentTeam.initSubscriberInfo: Complete")},initPageEvents:function(){var n,r,s,l,c,d;t("div.listings-block .fancy-select select").change(function(){o.initAgentTeamSelector()}),o.initAgentTeamSelector(),t(i).on("enterBreakpoint800",function(e){o.initAgentTeamSelector()}),"setpreferred"===decodeURIComponent(e.Utility.GetQueryStringParam("completeaction"))&&e.HBIB.ConfirmSetPreferred(o.isTeam,o.entityID,o.entityName),t("#setpreferred").click(function(u){o.isSubscriber&&o.isAuthenticated?o.isPreferred?e.HBIB.ConfirmDeletePreferred(o.isTeam,o.entityID,o.entityName):e.HBIB.ConfirmSetPreferred(o.isTeam,o.entityID,o.entityName):(n=t(o.authDialogSel),r=n.find("form"),s=new e.HBIB.LoginAjax(r),d=i.location,l=e.Utility.UpdateUrlParam(d.search,"completeaction","setpreferred"),c=d.pathname+l,s.BindForm(function(){n.trigger("close"),e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(a).trigger(e.Event.eAction.USER_SIGNIN,["manual","modal_prompt",e.Event.eTrackingOrigin.USER_SIGNIN_PA]),e.session.item("LoggedInStatus","ManualLoggedIn")),d.href=c}),e.FacebookLogin.Initialize({clickSelector:".account-sign-in-modal .facebook-signin",onLogin:function(){e.HBIB.IsWindowNameSet(e.session.item("LoggedInStatus"))||(t(a).trigger(e.Event.eAction.USER_SIGNIN,["fb_manual","modal_prompt",e.Event.eTrackingOrigin.USER_SIGNIN_PA]),e.session.item("LoggedInStatus","FBLoggedIn")),d.href=c},returnUrl:encodeURIComponent(c),cancelUrl:encodeURIComponent(d.pathname+d.search)}),t(".flex-video, .flex-video-module").css("visibility","hidden"),n.lightbox_me({centered:!0,onClose:function(){s.ResetForm(),t(".flex-video, .flex-video-module").css("visibility","visible")}})),u.preventDefault()}),e.Utility.LogConsole("NRT.AgentTeam.initPageEvents: Complete")},toggleAgentSearchPanel:function(i){e.Utility.LogConsole("NRT.AgentTeam.toggleAgentSearchPanel: "+i),t("#agent-results-search-by-location").toggle(!i),t("#agent-results-search-by-name-location").toggle(i),t("form.form-agents-by-name").validate().resetForm(),t(".error").removeClass("error")},switchSearchBy:function(i){e.Utility.LogConsole("NRT.AgentTeam.switchSearchBy: "+i),i?(t("form#form-agent-search").removeClass("form-agents-by-location").addClass("single-line form-agents-by-name-location"),t("div#location-name").changeElementType("p"),t("p#location-name").removeClass("inline"),t("button#submit-btn-location").css("display","none"),t("p.submit-block").css("display",""),t("#LocationName").removeData("errorid"),t("#location-name").css("margin-top","-22px"),t("#locationLabel").hide(),t("#nameLocationLabel").css("display","block")):(t("form#form-agent-search").removeClass("single-line form-agents-by-name-location").addClass("form-agents-by-location"),t("p#location-name").changeElementType("div"),t("div#location-name").addClass("inline"),t("button#submit-btn-location").css("display",""),t("p.submit-block").css("display","none"),t("#location-name").css("margin-top",""),t("#locationLabel, #locationLabel label").css("display","block"),t("#nameLocationLabel").hide()),t("#search-by-name-location").css("clear",i?"left":""),t("p.agent-search-name-location, span.separator").toggle(i),t(".IsSearchByNameAndLocation").val(i),t(".trigger-agents-search-by-name-location").toggle(!i),t(".trigger-agents-search-by-location").toggle(i),t("#agent-results-search-by-location-label").toggle(!i),t("#agent-results-search-by-name-location-label").toggle(i),t("form#form-agent-search").validate().resetForm(),t(".error").removeClass("error")},setUpdateResults:function(e){var i,a;(t("#IsUpdateResults").val(e.toString().toLowerCase()),!0===e)&&t(".resultsfilter").each(function(e){i=t(this),a="#"+i.attr("id")+"Results",t(a).val(i.prop("checked"))})},submitSearchPost:function(i,a,n,r,s){var l,c,d,u,h,p='input[name="AgentTeamSearch.LocationID"]',g='input[name="AgentTeamSearch.LocationZone"]',m='input[name="AgentTeamSearch.SearchUrl"]';o.setUpdateResults(!0),t(a).val()?(c={term:l=e.Utility.ScrubLocationName(t(a).val()),type:"agent",maxResults:5,crossZone:!0},t.ajax({url:e.Utility.AssembleUrl(["autocomplete","getlocations"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(c)}).done(function(e){d=!1,e.length>1&&t.each(e,function(e,i){if(i.EntityName.toLowerCase()===l.toLowerCase())return t(a).val(i.EntityName),t(p).val(i.EntityID),t(g).val(i.Zone),t(m).val(i.SearchUrl),d=!0,!1}),d||(1===e.length?(t(a).val(e[0].EntityName),t(p).val(e[0].EntityID),t(g).val(e[0].Zone),t(m).val(e[0].SearchUrl)):(u=!0,h=t(p).val(),e.length>0&&t.each(e,function(e,t){if(t.EntityID===h)return u=!1,!1}),u&&(t(p).val(""),t(g).val(""),t(m).val("")))),o.submitValidation(i,a,n,r,s)}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider();var n="NRT.AgentTeam.submitSearchPost: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+a),new Error(n)})):o.submitValidation(i,a,n,r,s)},submitSimpleSearchPost:function(i,a,n){var r,s,l,c,d,u='input[name="AgentTeamSearch.LocationID"]',h='input[name="AgentTeamSearch.LocationZone"]',p='input[name="AgentTeamSearch.SearchUrl"]';t(a).val()?(s={term:r=e.Utility.ScrubLocationName(t(a).val()),type:"agent",maxResults:5,crossZone:!0},t.ajax({url:e.Utility.AssembleUrl(["autocomplete","getlocations"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(s)}).done(function(e){l=!1,e.length>1&&t.each(e,function(e,i){if(i.EntityName.toLowerCase()===r.toLowerCase())return t(a).val(i.EntityName),t(u).val(i.EntityID),t(h).val(i.Zone),t(p).val(i.SearchUrl),l=!0,!1}),l||(1===e.length?(t(a).val(e[0].EntityName),t(u).val(e[0].EntityID),t(h).val(e[0].Zone),t(p).val(e[0].SearchUrl)):(c=!0,d=t(u).val(),e.length>0&&t.each(e,function(e,t){if(t.EntityID===d)return c=!1,!1}),c&&(t(u).val(""),t(h).val(""),t(p).val("")))),o.submitSimpleValidation(i,a,n)}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider();var n="NRT.AgentTeam.submitSimpleSearchPost: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+a),new Error(n)})):o.submitSimpleValidation(i,a,n)},validateForm:function(i,a,n){return e.Validate.Initialize(i),n&&o.setupNameValidation(n),o.setupLocationValidation(a),t(i).valid()},submitValidation:function(e,a,n,r,s){var l,c,d="true"===t("#IsSearchByNameAndLocation").val()?n:null;o.validateForm(e,a,d)?(o.clearStartsWith(),o.clearOfficeID(),r?""!==(l=o.getAgentTeamLocationSearchUrl())&&(c=o.getAgentSearchQueryString(t(n).val().trim()),i.location.href=l+c):""!==(l=o.getAgentResultsUrl())&&(c=o.getAgentSearchQueryString(t("#AgentTeamName").val().trim()),t(e).prop("action",l+c),t(e).submit(),s.preventDefault())):r||s.preventDefault()},submitSimpleValidation:function(e,t,a){var n;o.validateForm(e,t,null)?""!==(n=o.getAgentSearchUrl())&&(i.location.href=n):a.preventDefault()},getAgentResultsUrl:function(){return"true"===t("#IsStartsWith").val()?t("#LocationName_NameLocation").val()?o.getAgentSearchUrl():o.getAgentZoneUrl():"true"===t("#IsSearchByNameAndLocation").val()?t("#LocationName_NameLocation").val()?o.getAgentSearchUrl():o.getAgentZoneUrl():t("#LocationName_Location").val()?o.getAgentSearchUrl():o.getAgentZoneUrl()},getAgentTeamLocationSearchUrl:function(){return t("#LocationName").val()?o.getAgentSearchUrl():o.getAgentZoneUrl()},getAgentSearchUrl:function(){var e=t("#SearchUrl").val();return e=e.replace(/\/p_(.*?)\//g,"/")},getAgentZoneUrl:function(){return t("#SearchZoneUrl").val()},getAgentSearchQueryString:function(e){var i="";return null!==e&&""!==e?(i="?name="+encodeURIComponent(e),o.clearStartsWith(),o.clearOfficeID()):"true"===t("#IsStartsWith").val()&&(i=o.getStartsWithSearchQueryString(t("#AgentTeamSearch_StartsWith").val().toLowerCase())),i},getStartsWithSearchQueryString:function(e){return"?startsWith="+e},getOfficeSearchQueryString:function(e){return"?officeid="+e},clearStartsWith:function(){t("#AgentTeamSearch_StartsWith").val(""),t("#AgentTeamSearch_IsStartsWith").attr("checked",!1),t("#IsStartsWith").val("false")},setupLocationValidation:function(e){var i=["AgentTeamSearch.IsSearchByNameAndLocation","AgentTeamSearch.SearchZoneUrl"];t(e).rules("remove"),t(e).rules("add",{agentTeamSearchLocationRequiredCheck:{data:i},messages:{agentTeamSearchLocationRequiredCheck:"Location is required"}}),i=["AgentTeamSearch.IsSearchByNameAndLocation","AgentTeamSearch.LocationID","AgentTeamSearch.LocationZone","AgentTeamSearch.SearchUrl"],t(e).rules("add",{agentTeamSearchLocationValidityCheck:{data:i},messages:{agentTeamSearchLocationValidityCheck:"Location is invalid"}})},setupNameValidation:function(e){t(e).rules("remove"),t(e).rules("add",{required:function(e){return 0===e.value.trim().length},agentTeamSearchNameCheck:{data:["AgentTamSearch.AgentTeamName"]},messages:{required:"Name is required",agentTeamSearchNameCheck:"Name is required"}})},clearOfficeID:function(){t("#OfficeID").val("0")},initAgentTeamSelector:function(){var e,i,a=t("div.listings-block select option:selected");if(t(".nrt-listings-current, .nrt-listings-openhouse, .nrt-listings-sold, .btn-secondary .current-listings, .btn-secondary .sold-listings").hide(),a.length){switch(a.val().toLowerCase()){case"current listings":e=".nrt-listings-current, .btn-secondary .current-listings",i=".nrt-listings-current";break;case"upcoming open houses":e=".nrt-listings-openhouse, .btn-secondary .current-listings",i=".nrt-listings-openhouse";break;case"recent sales":e=".nrt-listings-sold, .btn-secondary .sold-listings",i=".nrt-listings-sold"}t(e).show(),o.createOwlSlider(i)}},createOwlSlider:function(i){e.Utility.LogConsole("NRT.AgentTeam.createOwlSlider: start");var a=t(i).find("div.property-snapshot-carousel.agent-team-results.property-row.owl-carousel"),n=t(i).find(".one-up-carousel-controls"),o=!1;!a.data("loaded")&&a.length>0?(a.find("div.prop").length>1&&(o=!0),a.trigger("destroy.owl.carousel"),a.html(a.find(".owl-stage-outer").html()).removeClass("owl-loaded"),a.off("initialized.owl.carousel").on("initialized.owl.carousel",function(e){t(".agent-team-results .property-snapshot").matchHeight({byRow:!1}),a.data("loaded",!0)}),a.off("changed.owl.carousel").on("changed.owl.carousel",function(e){null!==e.item.index&&(0===e.item.index?n.find(".prev a.nav-prev").addClass("disabled"):n.find(".prev a.nav-prev").removeClass("disabled"),e.item.count<=e.item.index+e.page.size?n.find(".next a.nav-next").addClass("disabled"):n.find(".next a.nav-next").removeClass("disabled"))}),o&&n.find(".prev").html('<a class="nav-prev"></a>').css({"z-index":100}).off("click").on("click",function(){a.trigger("prev.owl.carousel")}).end().find(".next").html('<a class="nav-next"></a>').css({"z-index":100}).off("click").on("click",function(){a.trigger("next.owl.carousel")}).end(),a.owlCarousel({items:1,dots:!1,loop:!1,margin:25,stagePadding:0,startPosition:0,nav:!1,touchDrag:o,mouseDrag:o})):a.trigger("to.owl.carousel",[0,10]),e.Utility.LogConsole("NRT.AgentTeam.createOwlSlider: end")},tabSetInit:function(){t.tabset({header:".layout-main .tabset .tabhead > li",content:".layout-main .tabset .tabcontent > div",activeIndex:0,after:function(){t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,this)}}),t("#sort-by-mobile").change(function(){var e=t(this).find("option:selected").attr("id");t('div.agent-property-tabs a[id="tabSet_'+e+'"]').trigger("click")})}},t(i).load(function(){e.Utility.ReadMore(),t(".trigger-agents-by-location").click(function(){t(".form-agents-by-name-location").hide(),t(".form-agents-by-location").show()}),t(".trigger-agents-by-name-location").click(function(){t(".form-agents-by-location").hide(),t(".form-agents-by-name-location").show()})}),e.AgentTeam=n}(window.NRT,jQuery,window,document),function(e,t,i){var a,n={};a={InitializeOfficeProfile:function(i){t("div.office-profile div.photo-wrap img.lazyload").each(function(){var e=t(this);e.attr("src",e.data("original")).removeClass("lazyload")}),n.tabSetInit(),t("div.tabset div.tabcontent ul.split-3").waitForImages(function(){t(this).find("div.photo-wrap").matchHeight().end().find("p.title").matchHeight().end().find("p.price-block").matchHeight().end().find("ul.details").matchHeight().end().find("p.mls-credit").matchHeight().end().find("div.property-snapshot").matchHeight(),e.Utility.LogConsole("NRT.Office.InitializeOfficeProfile:  matchHeight on listings for the tab")}),i.lat&&i.lat>0&&e.DetailMap.Initialize({mapSelector:".map-container",lat:i.lat,lng:i.lng,openInfoWindow:!0,mapJS:i.mapJS,loadMapOnPageLoad:!0,mapClient:i.mapClient,mapVersion:i.mapVersion,mapChannel:i.mapChannel}),n.initOfficeOwlCarousel()},InitializeOfficeSearch:function(){var e,a="#locationName";t("#OfficeSearch_LocationID").val(""),t("#SearchUrl").val(""),t("#submit-btn-location").click(function(e){n.submitSearchPost(this.form,a,!1,e),e.preventDefault()}),t("#submit-btn-office").click(function(a){""!==(e=t("#form-office-selection-js option:selected").val())&&(i.location.href=e),a.preventDefault()}),t("#form-office-by-location-js").submit(function(e){n.submitSearchPost("#form-office-by-location-js",a,!1,e),e.preventDefault()})},InitializeOfficeSearchResults:function(){var e="#locationName";t("#form-office-results-by-location-js").keydown(function(t){13===t.keyCode&&(n.submitSearchPost(this,e,!0,t),t.preventDefault())}),t("#submit-btn-location").click(function(t){n.submitSearchPost(this.form,e,!0,t)}),t("#form-office-by-location-js").submit(function(t){n.submitSearchPost(this.form,e,!1,t)}),t("#submit-btn-update").click(function(t){n.submitSearchPost(this.form,e,!0,t,n.getOfficeSearchResultsQueryString())}),t("#SortOptionDDL").change(function(i){i.preventDefault(),n.submitSearchPost(t("#form-office-results-by-location-js"),e,!0,i,n.getOfficeSearchResultsQueryString())}),t("ul.office-results-pager li a").on("click",function(e){var a=n.getOfficeSearchUrl(),o=t(this).data("pagenumber"),r=1===o?"":"p_"+o+"/";""!==a&&(i.location.href=a+r+n.getOfficeSearchResultsQueryString()),e.preventDefault()})}},n={photoCount:0,currentOwlIndex:0,initOfficeOwlCarousel:function(){var i=t("div.photo-carousel"),a=i.find(".owl-carousel");a.trigger("destroy.owl.carousel"),a.html(a.find(".owl-stage-outer").html()).removeClass("owl-loaded"),a.one("initialized.owl.carousel",function(e){i.find("div.controls span.prev.owl, span.next.owl").velocity({opacity:1},{duration:1e3}),i.find("p.photo-count.icon-camera.owl").velocity({opacity:1},{duration:1e3})}),a.off("changed.owl.carousel").on("changed.owl.carousel",function(t){if(t.namespace&&"position"===t.property.name){var a=t.item.index+1-t.relatedTarget._clones.length/2,o=t.item.count;(a>o||0===a)&&(a=o-a%o),n.currentOwlIndex=a-1,i.find("p.photo-count.icon-camera.owl").text(a+"/"+o)}e.Utility.LogConsole("NRT.Office.initOfficeOwlCarousel: Owl Carousel: changed.owl.carousel initialized.owl.carousel: event.type: "+t.type)}),a.owlCarousel({dots:!1,nav:!1,margin:1,stagePadding:0,touchDrag:!0,mouseDrag:!0,loop:!0,merge:!0,mergeFit:!0,autoWidth:!0,responsive:{0:{items:3},601:{items:3},783:{items:4},1200:{items:5}},startPosition:n.currentOwlIndex}),i.find(".controls").find(".prev").off("click").on("click",function(){a.trigger("prev.owl.carousel")}).end().find(".next").off("click").on("click",function(){a.trigger("next.owl.carousel")}).end()},getOfficeSearchUrl:function(){var e=t("#SearchUrl").val();return e=e.replace(/\/p_(.*?)\//g,"/")},getOfficeSearchResultsParams:function(){var e=t("#language-selection option:selected").val(),i=t("#SortOptionDDL option:selected").val(),a=[];return t("#islanguage-checkbox:checked").val()&&""!==e&&a.push("lang="+e),t("#isawards-check:checked").val()&&a.push("isawards=1"),"N"!==i&&a.push("sortby="+i),a},getOfficeSearchResultsQueryString:function(){var e,t="",i=n.getOfficeSearchResultsParams();if(i.length>0){t="?";for(e in i)i.hasOwnProperty(e)&&(t+=e>0?"&":"",t+=i[e])}return t},submitSearchPost:function(i,a,o,r,s){var l,c,d,u,h,p='input[name="OfficeSearch.LocationID"]',g='input[name="OfficeSearch.LocationZone"]',m='input[name="OfficeSearch.SearchUrl"]';t(a).val()?(c={term:l=e.Utility.ScrubLocationName(t(a).val()),type:"office",maxResults:5,crossZone:!0},t.ajax({url:e.Utility.AssembleUrl(["autocomplete","getlocations"]),type:"POST",async:!1,contentType:"application/json",dataType:"json",data:JSON.stringify(c)}).done(function(e){d=!1,e.length>1&&t.each(e,function(e,i){if(i.EntityName.toLowerCase()===l.toLowerCase())return t(a).val(i.EntityName),t(p).val(i.EntityID),t(g).val(i.Zone),t(m).val(i.SearchUrl),d=!0,!1}),d||(1===e.length?(t(a).val(e[0].EntityName),t(p).val(e[0].EntityID),t(g).val(e[0].Zone),t(m).val(e[0].SearchUrl)):(u=!0,h=t(p).val(),e.length>0&&t.each(e,function(e,t){if(t.EntityID===h)return u=!1,!1}),u&&(t(p).val(""),t(g).val(""),t(m).val("")))),n.submitValidation(i,a,o,r,s)}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider();var n="NRT.Office.submitSearchPost: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+a),new Error(n)})):n.submitValidation(i,a,o,r,s)},setupLocationValidation:function(e){var i=[];t(e).rules("remove"),t(e).rules("add",{officeSearchLocationRequiredCheck:{data:i},messages:{officeSearchLocationRequiredCheck:"Location is required"}}),i=["OfficeSearch.IsSearchByNameAndLocation","OfficeSearch.LocationID","OfficeSearch.LocationZone","OfficeSearch.SearchUrl"],t(e).rules("add",{officeSearchLocationValidityCheck:{data:i},messages:{officeSearchLocationValidityCheck:"Location is invalid"}})},validateForm:function(i,a){return e.Validate.Initialize(i),n.setupLocationValidation(a),t(i).valid()},submitValidation:function(e,a,o,r,s){if(n.validateForm(e,a)){var l=n.getOfficeSearchUrl();i.location.href=""!==l?l+(s||""):t("#SearchZoneUrl").val()+(s||"")}r.preventDefault()},tabSetInit:function(){t.tabset({header:".layout-main .tabset .tabhead > li",content:".layout-main .tabset .tabcontent > div",activeIndex:0,after:function(){t(i).trigger(e.Utility.eEvents.TAB_OPEN_COMPLETE,this)}})}},e.Office=a}(window.NRT,jQuery,window,document),
/*!
 * 
 * TableSorter 2.0 - Client-side table sorting with ease!
 * @Version 2.0.5b
 * @requires jQuery v1.2.3
 * 
 * @Copyright (c) 2007 Christian Bach
 * Examples and docs at: http://tablesorter.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * 
 */
function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[],sortWrapper;function benchmark(e,t){log(e+","+((new Date).getTime()-t.getTime())+"ms")}function log(e){"undefined"!=typeof console&&void 0!==console.debug?console.log(e):alert(e)}function buildParserCache(e,t){if(e.config.debug)var i="";if(0!=e.tBodies.length){var a=e.tBodies[0].rows;if(a[0])for(var n=[],o=a[0].cells.length,r=0;r<o;r++){var s=!1;$.metadata&&$(t[r]).metadata()&&$(t[r]).metadata().sorter?s=getParserById($(t[r]).metadata().sorter):e.config.headers[r]&&e.config.headers[r].sorter&&(s=getParserById(e.config.headers[r].sorter)),s||(s=detectParserForColumn(e,a,-1,r)),e.config.debug&&(i+="column:"+r+" parser:"+s.id+"\n"),n.push(s)}return e.config.debug&&log(i),n}}function detectParserForColumn(e,t,i,a){for(var n=parsers.length,o=!1,r=!1,s=!0;""==r&&s;)t[++i]?(o=getNodeFromRowAndCellIndex(t,i,a),r=trimAndGetNodeText(e.config,o),e.config.debug&&log("Checking if value was empty on row:"+i)):s=!1;for(var l=1;l<n;l++)if(parsers[l].is(r,e,o))return parsers[l];return parsers[0]}function getNodeFromRowAndCellIndex(e,t,i){return e[t].cells[i]}function trimAndGetNodeText(e,t){return $.trim(getElementText(e,t))}function getParserById(e){for(var t=parsers.length,i=0;i<t;i++)if(parsers[i].id.toLowerCase()==e.toLowerCase())return parsers[i];return!1}function buildCache(e){if(e.config.debug)var t=new Date;for(var i=e.tBodies[0]&&e.tBodies[0].rows.length||0,a=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,n=e.config.parsers,o={row:[],normalized:[]},r=0;r<i;++r){var s=$(e.tBodies[0].rows[r]),l=[];if(s.hasClass(e.config.cssChildRow))o.row[o.row.length-1]=o.row[o.row.length-1].add(s);else{o.row.push(s);for(var c=0;c<a;++c)l.push(n[c].format(getElementText(e.config,s[0].cells[c]),e,s[0].cells[c]));l.push(o.normalized.length),o.normalized.push(l),l=null}}return e.config.debug&&benchmark("Building cache for "+i+" rows:",t),o}function getElementText(e,t){if(!t)return"";var i=$(t).attr("data-sort-value");if(void 0!==i)return i;return e.supportsTextContent||(e.supportsTextContent=t.textContent||!1),"simple"==e.textExtraction?e.supportsTextContent?t.textContent:t.childNodes[0]&&t.childNodes[0].hasChildNodes()?t.childNodes[0].innerHTML:t.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(t):$(t).text()}function appendToTable(e,t){if(e.config.debug)var i=new Date;for(var a=t,n=a.row,o=a.normalized,r=o.length,s=o[0].length-1,l=$(e.tBodies[0]),c=[],d=0;d<r;d++){var u=o[d][s];if(c.push(n[u]),!e.config.appender)for(var h=n[u].length,p=0;p<h;p++)l[0].appendChild(n[u][p])}e.config.appender&&e.config.appender(e,c),c=null,e.config.debug&&benchmark("Rebuilt table:",i),applyWidget(e),setTimeout(function(){$(e).trigger("sortEnd")},0)}function buildHeaders(e){if(e.config.debug)var t=new Date;$.metadata;var i=computeTableHeaderCellIndexes(e),a=$(e.config.selectorHeaders,e).each(function(t){if(this.column=i[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(e.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(e,t))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(e,t)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(e,t)),!this.sortDisabled){var a=$(this).addClass(e.config.cssHeader);e.config.onRenderHeader&&e.config.onRenderHeader.apply(a)}e.config.headerList[t]=this});return e.config.debug&&(benchmark("Built headers:",t),log(a)),a}function computeTableHeaderCellIndexes(e){for(var t=[],i={},a=e.getElementsByTagName("THEAD")[0].getElementsByTagName("TR"),n=0;n<a.length;n++)for(var o=a[n].cells,r=0;r<o.length;r++){var s,l=o[r],c=l.parentNode.rowIndex,d=c+"-"+l.cellIndex,u=l.rowSpan||1,h=l.colSpan||1;void 0===t[c]&&(t[c]=[]);for(var p=0;p<t[c].length+1;p++)if(void 0===t[c][p]){s=p;break}i[d]=s;for(p=c;p<c+u;p++){void 0===t[p]&&(t[p]=[]);for(var g=t[p],m=s;m<s+h;m++)g[m]="x"}}return i}function checkCellColSpan(e,t,i){for(var a=[],n=e.tHead.rows,o=n[i].cells,r=0;r<o.length;r++){var s=o[r];s.colSpan>1?a=a.concat(checkCellColSpan(e,headerArr,i++)):(1==e.tHead.length||s.rowSpan>1||!n[i+1])&&a.push(s)}return a}function checkHeaderMetadata(e){return!(!$.metadata||!1!==$(e).metadata().sorter)}function checkHeaderOptions(e,t){return!(!e.config.headers[t]||!1!==e.config.headers[t].sorter)}function checkHeaderOptionsSortingLocked(e,t){return!(!e.config.headers[t]||!e.config.headers[t].lockedOrder)&&e.config.headers[t].lockedOrder}function applyWidget(e){for(var t=e.config.widgets,i=t.length,a=0;a<i;a++)getWidgetById(t[a]).format(e)}function getWidgetById(e){for(var t=widgets.length,i=0;i<t;i++)if(widgets[i].id.toLowerCase()==e.toLowerCase())return widgets[i]}function formatSortingOrder(e){return"Number"!=typeof e?"desc"==e.toLowerCase()?1:0:1==e?1:0}function isValueInArray(e,t){for(var i=t.length,a=0;a<i;a++)if(t[a][0]==e)return!0;return!1}function setHeadersCss(e,t,i,a){t.removeClass(a[0]).removeClass(a[1]);var n=[];t.each(function(e){this.sortDisabled||(n[this.column]=$(this))});for(var o=i.length,r=0;r<o;r++)n[i[r][0]].addClass(a[i[r][1]])}function fixColumnWidth(e,t){if(e.config.widthFixed){var i=$("<colgroup>");$("tr:first td",e.tBodies[0]).each(function(){i.append($("<col>").css("width",$(this).width()))}),$(e).prepend(i)}}function updateHeaderSortCount(e,t){for(var i=e.config,a=t.length,n=0;n<a;n++){var o=t[n],r=i.headerList[o[0]];r.count=o[1],r.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?makeSortFunction("text",0==order?"asc":"desc",c):makeSortFunction("numeric",0==order?"asc":"desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(e,t,i){var a="a["+i+"]",n="b["+i+"]";return"text"==e&&"asc"==t?"("+a+" == "+n+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+n+") ? -1 : 1 )));":"text"==e&&"desc"==t?"("+a+" == "+n+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : ("+n+" < "+a+") ? -1 : 1 )));":"numeric"==e&&"asc"==t?"("+a+" === null && "+n+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+n+"));":"numeric"==e&&"desc"==t?"("+a+" === null && "+n+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+n+" === null ? Number.NEGATIVE_INFINITY : "+n+" - "+a+"));":void 0}function makeSortText(e){return"((a["+e+"] < b["+e+"]) ? -1 : ((a["+e+"] > b["+e+"]) ? 1 : 0));"}function makeSortTextDesc(e){return"((b["+e+"] < a["+e+"]) ? -1 : ((b["+e+"] > a["+e+"]) ? 1 : 0));"}function makeSortNumeric(e){return"a["+e+"]-b["+e+"];"}function makeSortNumericDesc(e){return"b["+e+"]-a["+e+"];"}function sortText(e,t){return table.config.sortLocaleCompare?e.localeCompare(t):e<t?-1:e>t?1:0}function sortTextDesc(e,t){return table.config.sortLocaleCompare?t.localeCompare(e):t<e?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark,this.construct=function(e){return this.each(function(){if(this.tHead&&this.tBodies){var t,i,a,n;this.config={},n=$.extend(this.config,$.tablesorter.defaults,e),t=$(this),$.data(this,"tablesorter",n),i=buildHeaders(this),this.config.parsers=buildParserCache(this,i),a=buildCache(this);var o=[n.cssDesc,n.cssAsc];fixColumnWidth(this),i.click(function(e){var r=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&r>0){t.trigger("sortStart");$(this);var s=this.column;if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),e[n.sortMultiSortKey])if(isValueInArray(s,n.sortList))for(u=0;u<n.sortList.length;u++){var l=n.sortList[u],c=n.headerList[l[0]];l[0]==s&&(c.count=l[1],c.count++,l[1]=c.count%2)}else n.sortList.push([s,this.order]);else{if(n.sortList=[],null!=n.sortForce)for(var d=n.sortForce,u=0;u<d.length;u++)d[u][0]!=s&&n.sortList.push(d[u]);n.sortList.push([s,this.order])}return setTimeout(function(){setHeadersCss(t[0],i,n.sortList,o),appendToTable(t[0],multisort(t[0],n.sortList,a))},1),!1}}).mousedown(function(){if(n.cancelSelection)return this.onselectstart=function(){return!1},!1}),t.bind("update",function(){var e=this;setTimeout(function(){e.config.parsers=buildParserCache(e,i),a=buildCache(e)},1)}).bind("updateCell",function(e,t){var i=this.config,n=[t.parentNode.rowIndex-1,t.cellIndex];a.normalized[n[0]][n[1]]=i.parsers[n[1]].format(getElementText(i,t),t)}).bind("sorton",function(e,t){$(this).trigger("sortStart"),n.sortList=t;var r=n.sortList;updateHeaderSortCount(this,r),setHeadersCss(this,i,r,o),appendToTable(this,multisort(this,r,a))}).bind("appendCache",function(){appendToTable(this,a)}).bind("applyWidgetId",function(e,t){getWidgetById(t).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(n.sortList=$(this).metadata().sortlist),n.sortList.length>0&&t.trigger("sorton",[n.sortList]),applyWidget(this)}})},this.addParser=function(e){for(var t=parsers.length,i=!0,a=0;a<t;a++)parsers[a].id.toLowerCase()==e.id.toLowerCase()&&(i=!1);i&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t},this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t},this.isDigit=function(e,t){return/^[-+]?\d*$/.test($.trim(e.replace(/[,.']/g,"")))},this.clearTableBody=function(e){if($.browser.msie)for(;e.tBodies[0].firstChild;)e.tBodies[0].removeChild(e.tBodies[0].firstChild);else e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(e){return!0},format:function(e){return $.trim(e.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){var i=t.config;return $.tablesorter.isDigit(e,i)},format:function(e){return $.tablesorter.formatFloat(e.replace(/,/g,""))},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return/^[£$€?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[£$€]/g),"").replace(/,/g,""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){for(var t=e.split("."),i="",a=t.length,n=0;n<a;n++){var o=t[n];2==o.length?i+="0"+o:i+=o}return $.tablesorter.formatFloat(i)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return/^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(""!=e?new Date(e.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return/\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var i=t.config;return e=e.replace(/\-/g,"/"),"us"==i.dateFormat&&(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")),"pt"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"uk"==i.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"dd/mm/yy"!=i.dateFormat&&"dd-mm-yy"!=i.dateFormat||(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(e){return!1},format:function(e,t,i){var a=t.config,n=a.parserMetadataName?a.parserMetadataName:"sortValue";return $(i).metadata()[n]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;var i,a,n=-1;$("tr:visible",e.tBodies[0]).each(function(t){(i=$(this)).hasClass(e.config.cssChildRow)||n++,a=n%2==0,i.removeClass(e.config.widgetZebra.css[a?0:1]).addClass(e.config.widgetZebra.css[a?1:0])}),e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})}(jQuery),function(e,t){var i,a={};i={Initialize:function(i){var n=e.Tabs,o=t("#searchtext-2");a.mapJS=i.mapJS||"",a.searchEntity=i.searchEntity||null,a.getDescriptionFromWiki=i.getDescriptionFromWiki||!1,a.detailmapInfo.lat=i.lat||0,a.detailmapInfo.lng=i.lng||0,a.detailmapInfo.mapClient=i.mapClient||"",a.detailmapInfo.mapVersion=i.mapVersion||"",a.detailmapInfo.mapChannel=i.mapChannel||"",a.detailmapInfo.mapLibraries=i.mapLibraries||"",n.GetInitialTabSelected(),n.SetupViewMoreButton(),n.MobileSortChanged(),t.tabset({header:".property-tabs .tab-nav > li",content:".property-tabs .tab-content-wrap > .tab-content",activeIndex:0,after:function(){return n.LoadActiveTab(".property-tabs .tab-content-wrap > .tab-content"),!1}}),o.tooltipster({content:"Search by city, neighborhood, or zip code",position:"bottom-left",trigger:"custom"}).on("focus",function(){o.tooltipster("show")}).on("blur keypress keyup",function(){o.tooltipster("hide")}),a.detailmapInfo.lat>0&&(a.searchEntity&&a.searchEntity.HasEntity?t.ajax({type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",url:e.Utility.AssembleUrl(["location","getboundariesforsearchlocations"]),data:JSON.stringify([{entityType:a.searchEntity.EntityType,entityId:a.searchEntity.EntityId}])}).done(function(e){a.detailmapInfo.locationBoundaries=e,a.detailmapInfo.isBoundaries=!0,a.getGuidemap()}):(a.detailmapInfo.isBoundaries=!1,a.getGuidemap())),a.getDescriptionFromWiki&&a.searchEntity&&a.searchEntity.HasEntity&&t.ajax({type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",url:e.Utility.AssembleUrl(["location","wikipediadescription"]),data:{entityType:a.searchEntity.EntityType,entityId:a.searchEntity.EntityId}}).done(function(e){t("#wikidesc").html(e)})}},a={mapJS:"",location:null,getDescriptionFromWiki:!1,detailmapInfo:{mapSelector:".map-container-lp",defaultZoom:12,doNotDisplayMarker:!0,renewMapOnResize:!1,loadMapOnPageLoad:!0,isPOI:!0,fitBoundsPostDraw:!0,lat:0,lng:0,mapClient:"",mapVersion:"",mapChannel:"",mapLibraries:"geometry"},getGuidemap:function(){e.DetailMap.Initialize(a.detailmapInfo)}},t(window).load(function(){t(".table-sort").tablesorter(),t(".table-sort th").wrapInner("<span />")}),e.RealEstateGuide=i}(window.NRT,jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t,i){var a,n={};a={Initialize:function(){var i,a,o;n.autocomplete=new e.PropertySearchAutocomplete,n.autocomplete.Initialize("#searchtext-simple",e.Utility.AssembleUrl(["quicksearch","getautocomplete"])),n.dom={submit:t("#search-simple input[type=submit]"),priceMin:t("#price-min").autoNumeric("init",{aSign:"$",vMin:"0",mDec:"0"}),priceMax:t("#price-max").autoNumeric("init",{aSign:"$",vMin:"0",mDec:"0"})},n.dom.submit.on("click",function(t){t.preventDefault(),n.validatePriceMinMax(),n.validateSearch()&&(i=n.getCriteriaPath(),(a=new e.QuickSearch).Initialize("#searchtext-simple",null,!1,"#PrimaryLocationEntity"),o=a.GetSearchInfo(n.autocomplete.GetSelectedObject(),n.autocomplete.GetSearchTerm()),n.primaryLocationEntity=o.SearchData,n.primaryLocationSearchTerm=o.SearchTerm,o.SearchData&&o.SearchData.HasEntity&&e.SearchLocationsHistory.AddSearchLocation(o.SearchData.Zone,o.SearchData.EntityType,o.SearchData.EntityId,o.SearchData.Text),n.getSearchResultsURL(i))})}},n={dom:null,autocomplete:null,primaryLocationEntity:null,primaryLocationSearchTerm:null,searchType:1,searchSource:0,getCriteriaPath:function(){var e,i=[],a=[],n="";return t(".search-form select:not([type=hidden])").each(function(){if(t(this).val()!==t(this).find(":first, option").val()){var e=t(this).data("defaultvalue");if(e&&t(this).val()===e)return!0;i.push(this.name+"_"+encodeURIComponent(this.value))}}),t(".search-form input[type=text]").not("[type=hidden]").filter(function(){t(this).val().length>0&&"input_for_location"!==t(this).prop("name")&&("object"!==_typeof(t(this).data("autoNumeric"))?a.push(this.name+"_"+encodeURIComponent(this.value)):a.push(this.name+"_"+encodeURIComponent(t(this).autoNumeric("get"))))}),(e=i.concat([],a)).length>0&&(n="/kvc-"+e.join(",")+"/"),{keyValuePath:n}},validatePriceMinMax:function(){var e,t=n.dom,i=t.priceMin.autoNumeric("get"),a=t.priceMax.autoNumeric("get");parseInt(a,10)<parseInt(i,10)&&(e=i,t.priceMin.autoNumeric("init"),t.priceMin.autoNumeric("set",a),t.priceMax.autoNumeric("init"),t.priceMax.autoNumeric("set",e))},validateSearch:function(){var i=t("#searchtext-simple"),a=i.closest("form");return e.Validate.Initialize(a),i&&(i.rules("remove"),i.rules("add",{required:!0,messages:{required:"Oops! We didn't find any matching locations. Try again?"}}),i.rules("add",{regex:/^[a-zA-Z0-9\s,\-_'"&\.\/\#()]+$/g,messages:{regex:"Oops, we didn't understand those characters, Try again?"}})),a.valid()},parseParam:function(e){var t="",a=i.location.search,n=a.indexOf(e),o=a.indexOf("&",n);return n>-1&&(t=o>-1?a.substring(n,o):a.substring(n)),t},getSearchResultsURL:function(i){var a=t("#SearchType").val(),o=t("#SearchSource").val();a&&(n.searchType=a),o&&(n.searchSource=o),t.ajax({url:e.Utility.AssembleUrl(["quicksearch","getsearchresultsurl"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({searchEntity:n.primaryLocationEntity,searchTerm:n.primaryLocationSearchTerm,searchTypeId:n.searchType,previousSearchEntity:null,searchSource:n.searchSource})}).done(function(e){n.onSuccessfulURL(e,i)}).fail(function(t,i,a){var n="HC:searchform.updatePrimaryLocationPath: Ajax Error";throw e.Event.Raise(e.Event.eError.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+t.toString()),new Error(n)})},navigateToNewURL:function(e,t,a,o){var r,s,l,c,d,u,h,p="",g="",m="",f=[];for(t&&(e.indexOf("/kvc-")>0?e=e.replace(/\/kvc-[A-Za-z0-9_,%&();\.]*\//,t.keyValuePath):e+=t.keyValuePath),s=(r=e.split("/")).length,c=0;c<s;c+=1)(l=r[c]).length>0&&("?"===l[0]?g=l:(p+="/",p+=l));d=n.parseParam("sortId"),u=n.parseParam("groupId"),h=n.parseParam("mode"),g.length>0&&f.push(g),d.length>0&&f.push(d),h.length>0&&f.push(h),!a&&!o&&u.length>0&&f.push(u),f.length>0&&0!==(m=f.join("&")).indexOf("?")&&(m="?"+m),i.location=i.location.protocol+"//"+i.location.hostname+p.toLowerCase()+"/"+m},onSuccessfulURL:function(e,i){var a;e&&e.redirectToUrl&&e.redirectToUrl.length>0?1!==n.searchSource?n.navigateToNewURL(e.redirectToUrl,i,e.hasZoneChanged,e.hasPrimaryLocationChanged):e.hasZoneChanged?n.navigateToNewURL(e.redirectToUrl,null,e.hasZoneChanged,e.hasPrimaryLocationChanged):e.hasPrimaryLocationChanged&&n.navigateToNewURL(e.redirectToUrl,i,e.hasZoneChanged,e.hasPrimaryLocationChanged):(a=t("#searchtext-simple"),t(".error").removeClass("error"),a.parent().addClass("error"),a.parent().find(".message").remove(),a.after('<span for="searchtext-simple" class="message">Oops! We didn\'t find any matching locations. Try again?</span>'))}},e.SimpleSearch=a}(window.NRT,jQuery,window),function(e,t,i){var a,n={};a={Initialize:function(){i.location.pathname.split("/").indexOf("news")>-1&&n.setupPager()}},n={setupPager:function(){var e,a,n,o=t("ul.news-results-pager li a");o.length>0&&o.on("click",function(o){e=t("#zonedUrl").val(),a=t(this).data("pagenumber"),n=1===parseInt(a,10)?"":"p_"+a+"/",""!==e&&(i.location.href=e+n),o.preventDefault()})}},t(window).load(function(){a.Initialize()}),e.News=a}(window.NRT,jQuery,document);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*! Image Blur plugin, author @msurguy */
/*! Image Blur plugin, author @msurguy */
!function(e){var t=function(){for(var e=3,t=document.createElement("div"),i=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",i[0];);return e>4?e:void 0}(),i=function(){return"_"+Math.random().toString(36).substr(2,9)},a={svgns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(e,t){var i=document.createElementNS(a.svgns,e);return t&&a.setAttr(i,t),i},setAttr:function(e,t){for(var i in t)"href"===i?e.setAttributeNS(a.xlink,i,t[i]):e.setAttribute(i,t[i]);return e}},n=function(t,a){this.internalID=i(),this.$element=e(t),this.$width=this.$element.width(),this.$height=this.$element.height(),this.element=t,this.options=e.extend({},n.DEFAULTS,a),this.$overlayEl=this.createOverlay(),this.$blurredImage={},this.useVelocity=this.detectVelocity(),this.attachListeners(),this.generateBlurredImage(this.options.imageURL)};n.VERSION="0.1.1",n.DEFAULTS={imageURL:"",blurAmount:10,imageClass:"",overlayClass:"",duration:!1,opacity:1},n.prototype.detectVelocity=function(){return!!window.jQuery.Velocity},n.prototype.attachListeners=function(){this.$element.on("ui.blur.loaded",e.proxy(this.fadeIn,this)),this.$element.on("ui.blur.unload",e.proxy(this.fadeOut,this))},n.prototype.fadeIn=function(){this.options.duration&&this.options.duration>0&&(this.useVelocity?this.$blurredImage.velocity({opacity:this.options.opacity},{duration:this.options.duration}):this.$blurredImage.animate({opacity:this.options.opacity},{duration:this.options.duration}))},n.prototype.fadeOut=function(){this.options.duration&&this.options.duration>0?this.useVelocity?this.$blurredImage.velocity({opacity:0},{duration:this.options.duration}):this.$blurredImage.animate({opacity:0},{duration:this.options.duration}):this.$blurredImage.css({opacity:0})},n.prototype.generateBlurredImage=function(e){var a=this.$blurredImage;this.internalID=i(),a.length>0&&(this.options.duration&&this.options.duration>0?this.useVelocity?a.first().velocity({opacity:0},{duration:this.options.duration,complete:function(){a.remove()}}):a.first().animate({opacity:0},{duration:this.options.duration,complete:function(){a.remove()}}):a.remove()),this.$blurredImage=t?this.createIMG(e,this.$width,this.$height):this.createSVG(e,this.$width,this.$height)},n.prototype.createOverlay=function(){return!(!this.options.overlayClass||""===this.options.overlayClass)&&e("<div></div>").prependTo(this.$element).addClass(this.options.overlayClass)},n.prototype.createSVG=function(t,i,n){var o=this,r=a.createElement("svg",{xmlns:a.svgns,version:"1.1",width:i,height:n,id:"blurred"+this.internalID,class:this.options.imageClass,viewBox:"0 0 "+i+" "+n,preserveAspectRatio:"none"}),s="blur"+this.internalID,l=a.createElement("filter",{id:s}),c=a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:this.options.blurAmount}),d=a.createElement("image",{x:0,y:0,width:i,height:n,externalResourcesRequired:"true",href:t,style:"filter:url(#"+s+")",preserveAspectRatio:"none"});d.addEventListener("load",function(){o.$element.trigger("ui.blur.loaded")},!0),d.addEventListener("SVGLoad",function(){o.$element.trigger("ui.blur.loaded")},!0),l.appendChild(c),r.appendChild(l),r.appendChild(d);var u=e(r);return o.options.duration&&o.options.duration>0&&(u.css({opacity:0}),window.setTimeout(function(){"0"===u.css("opacity")&&u.css({opacity:1})},this.options.duration+100)),this.element.insertBefore(r,this.element.firstChild),u},n.prototype.createIMG=function(e,t,i){var a=this,n=this.prependImage(e),o=2*this.options.blurAmount>100?100:2*this.options.blurAmount;return n.css({filter:"progid:DXImageTransform.Microsoft.Blur(pixelradius="+o+") ",top:2.5*-this.options.blurAmount,left:2.5*-this.options.blurAmount,width:t+2.5*this.options.blurAmount,height:i+2.5*this.options.blurAmount}).attr("id","blurred"+this.internalID),n.load(function(){a.$element.trigger("ui.blur.loaded")}),this.options.duration&&this.options.duration>0&&window.setTimeout(function(){"0"===n.css("opacity")&&n.css({opacity:1})},this.options.duration+100),n},n.prototype.prependImage=function(t){var i=e('<img src="'+t+'" />');return this.$overlayEl?i.insertBefore(this.$overlayEl).attr("id",this.internalID).addClass(this.options.imageClass):i.prependTo(this.$element).attr("id",this.internalID).addClass(this.options.imageClass)};var o=e.fn.backgroundBlur;e.fn.backgroundBlur=function(t){return this.each(function(){var i=e(this),a=i.data("plugin.backgroundBlur"),o=e.extend({},n.DEFAULTS,i.data(),"object"===(void 0===t?"undefined":_typeof(t))&&t);a||i.data("plugin.backgroundBlur",a=new n(this,o)),"fadeIn"===t?a.fadeIn():"fadeOut"===t?a.fadeOut():"string"==typeof t&&a.generateBlurredImage(t)})},e.fn.backgroundBlur.Constructor=n,e.fn.backgroundBlur.noConflict=function(){return e.fn.backgroundBlur=o,this}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * Owl Carousel v2.2.1
 * @Copyright 2013-2017 David Deutsch
 * @License: Licensed under MIT (https://github.com/OwlCarousel2/OwlCarousel2/blob/master/LICENSE)
 */
/*!
 * Owl Carousel v2.2.1
 * @Copyright 2013-2017 David Deutsch
 * @License: Licensed under MIT (https://github.com/OwlCarousel2/OwlCarousel2/blob/master/LICENSE)
 */
!function(e,t,i,a){function n(t,i){this.settings=null,this.options=e.extend({},n.Defaults,i),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy(function(t,i){this._handlers[i]=e.proxy(this[i],this)},this)),e.each(n.Plugins,e.proxy(function(e,t){this._plugins[e.charAt(0).toLowerCase()+e.slice(1)]=new t(this)},this)),e.each(n.Workers,e.proxy(function(t,i){this._pipe.push({filter:i.filter,run:e.proxy(i.run,this)})},this)),this.setup(),this.initialize()}n.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},n.Width={Default:"default",Inner:"inner",Outer:"outer"},n.Type={Event:"event",State:"state"},n.Plugins={},n.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",i=!this.settings.autoWidth,a=this.settings.rtl,n={width:"auto","margin-left":a?t:"","margin-right":a?"":t};!i&&this.$stage.children().css(n),e.css=n}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,i=null,a=this._items.length,n=!this.settings.autoWidth,o=[];for(e.items={merge:!1,width:t};a--;)i=this._mergers[a],i=this.settings.mergeFit&&Math.min(i,this.settings.items)||i,e.items.merge=i>1||e.items.merge,o[a]=n?t*i:this._items[a].width();this._widths=o}},{filter:["items","settings"],run:function(){var t=[],i=this._items,a=this.settings,n=Math.max(2*a.items,4),o=2*Math.ceil(i.length/2),r=a.loop&&i.length?a.rewind?n:Math.max(n,o):0,s="",l="";for(r/=2;r--;)t.push(this.normalize(t.length/2,!0)),s+=i[t[t.length-1]][0].outerHTML,t.push(this.normalize(i.length-1-(t.length-1)/2,!0)),l=i[t[t.length-1]][0].outerHTML+l;this._clones=t,e(s).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,i=-1,a=0,n=0,o=[];++i<t;)a=o[i-1]||0,n=this._widths[this.relative(i)]+this.settings.margin,o.push(a+n*e);this._coordinates=o}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,i={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(i)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,i=!this.settings.autoWidth,a=this.$stage.children();if(i&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],a.eq(t).css(e.css);else i&&(e.css.width=e.items.width,a.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,i,a,n=this.settings.rtl?1:-1,o=2*this.settings.stagePadding,r=this.coordinates(this.current())+o,s=r+this.width()*n,l=[];for(i=0,a=this._coordinates.length;i<a;i++)e=this._coordinates[i-1]||0,t=Math.abs(this._coordinates[i])+o*n,(this.op(e,"<=",r)&&this.op(e,">",s)||this.op(t,"<",r)&&this.op(t,">",s))&&l.push(i);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],n.prototype.initialize=function(){var t,i,n;(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading"))&&(t=this.$element.find("img"),i=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:a,n=this.$element.children(i).width(),t.length&&n<=0&&this.preloadAutoWidthImages(t));this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},n.prototype.setup=function(){var t=this.viewport(),i=this.options.responsive,a=-1,n=null;i?(e.each(i,function(e){e<=t&&e>a&&(a=Number(e))}),"function"==typeof(n=e.extend({},this.options,i[a])).stagePadding&&(n.stagePadding=n.stagePadding()),delete n.responsive,n.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+a))):n=e.extend({},this.options),this.trigger("change",{property:{name:"settings",value:n}}),this._breakpoint=a,this.settings=n,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},n.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},n.prototype.prepare=function(t){var i=this.trigger("prepare",{content:t});return i.data||(i.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:i.data}),i.data},n.prototype.update=function(){for(var t=0,i=this._pipe.length,a=e.proxy(function(e){return this[e]},this._invalidated),n={};t<i;)(this._invalidated.all||e.grep(this._pipe[t].filter,a).length>0)&&this._pipe[t].run(n),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},n.prototype.width=function(e){switch(e=e||n.Width.Default){case n.Width.Inner:case n.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},n.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},n.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},n.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.$element.is(":visible")&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},n.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),!1!==this.settings.responsive&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},n.prototype.onDragStart=function(t){var a=null;3!==t.which&&(e.support.transform?a={x:(a=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","))[16===a.length?12:4],y:a[16===a.length?13:5]}:(a=this.$stage.position(),a={x:this.settings.rtl?a.left+this.$stage.width()-this.width()+this.settings.margin:a.left,y:a.top}),this.is("animating")&&(e.support.transform?this.animate(a.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=a,this._drag.stage.current=a,this._drag.pointer=this.pointer(t),e(i).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(i).one("mousemove.owl.core touchmove.owl.core",e.proxy(function(t){var a=this.difference(this._drag.pointer,this.pointer(t));e(i).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(a.x)<Math.abs(a.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},n.prototype.onDragMove=function(e){var t=null,i=null,a=null,n=this.difference(this._drag.pointer,this.pointer(e)),o=this.difference(this._drag.stage.start,n);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),i=this.coordinates(this.maximum()+1)-t,o.x=((o.x-t)%i+i)%i+t):(t=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),i=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),a=this.settings.pullDrag?-1*n.x/5:0,o.x=Math.max(Math.min(o.x,t+a),i+a)),this._drag.stage.current=o,this.animate(o.x))},n.prototype.onDragEnd=function(t){var a=this.difference(this._drag.pointer,this.pointer(t)),n=this._drag.stage.current,o=a.x>0^this.settings.rtl?"left":"right";e(i).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==a.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(n.x,0!==a.x?o:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=o,(Math.abs(a.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},n.prototype.closest=function(t,i){var a=-1,n=this.width(),o=this.coordinates();return this.settings.freeDrag||e.each(o,e.proxy(function(e,r){return"left"===i&&t>r-30&&t<r+30?a=e:"right"===i&&t>r-n-30&&t<r-n+30?a=e+1:this.op(t,"<",r)&&this.op(t,">",o[e+1]||r-n)&&(a="left"===i?e+1:e),-1===a},this)),this.settings.loop||(this.op(t,">",o[this.minimum()])?a=t=this.minimum():this.op(t,"<",o[this.maximum()])&&(a=t=this.maximum())),a},n.prototype.animate=function(t){var i=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),i&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"}):i?this.$stage.velocity({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},n.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},n.prototype.current=function(e){if(e===a)return this._current;if(0===this._items.length)return a;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==a&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},n.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,function(e,t){return t})},n.prototype.reset=function(e){(e=this.normalize(e))!==a&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},n.prototype.normalize=function(e,t){var i=this._items.length,n=t?0:this._clones.length;return!this.isNumeric(e)||i<1?e=a:(e<0||e>=i+n)&&(e=((e-n/2)%i+i)%i+n/2),e},n.prototype.relative=function(e){return e-=this._clones.length/2,this.normalize(e,!0)},n.prototype.maximum=function(e){var t,i,a,n=this.settings,o=this._coordinates.length;if(n.loop)o=this._clones.length/2+this._items.length-1;else if(n.autoWidth||n.merge){for(t=this._items.length,i=this._items[--t].width(),a=this.$element.width();t--&&!((i+=this._items[t].width()+this.settings.margin)>a););o=t+1}else o=n.center?this._items.length-1:this._items.length-n.items;return e&&(o-=this._clones.length/2),Math.max(o,0)},n.prototype.minimum=function(e){return e?0:this._clones.length/2},n.prototype.items=function(e){return e===a?this._items.slice():(e=this.normalize(e,!0),this._items[e])},n.prototype.mergers=function(e){return e===a?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},n.prototype.clones=function(t){var i=this._clones.length/2,n=i+this._items.length,o=function(e){return e%2==0?n+e/2:i-(e+1)/2};return t===a?e.map(this._clones,function(e,t){return o(t)}):e.map(this._clones,function(e,i){return e===t?o(i):null})},n.prototype.speed=function(e){return e!==a&&(this._speed=e),this._speed},n.prototype.coordinates=function(t){var i,n=1,o=t-1;return t===a?e.map(this._coordinates,e.proxy(function(e,t){return this.coordinates(t)},this)):(this.settings.center?(this.settings.rtl&&(n=-1,o=t+1),i=this._coordinates[t],i+=(this.width()-i+(this._coordinates[o]||0))/2*n):i=this._coordinates[o]||0,i=Math.ceil(i))},n.prototype.duration=function(e,t,i){return 0===i?0:Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(i||this.settings.smartSpeed)},n.prototype.to=function(e,t){var i=this.current(),a=null,n=e-this.relative(i),o=(n>0)-(n<0),r=this._items.length,s=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(n)>r/2&&(n+=-1*o*r),(a=(((e=i+n)-s)%r+r)%r+s)!==e&&a-n<=l&&a-n>0&&(i=a-n,e=a,this.reset(i))):e=this.settings.rewind?(e%(l+=1)+l)%l:Math.max(s,Math.min(l,e)),this.speed(this.duration(i,e,t)),this.current(e),this.$element.is(":visible")&&this.update()},n.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},n.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},n.prototype.onTransitionEnd=function(e){if(e!==a&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0)))return!1;this.leave("animating"),this.trigger("translated")},n.prototype.viewport=function(){var a;return this.options.responsiveBaseElement!==t?a=e(this.options.responsiveBaseElement).width():t.innerWidth?a=t.innerWidth:i.documentElement&&i.documentElement.clientWidth?a=i.documentElement.clientWidth:console.warn("Can not detect viewport width."),a},n.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each(e.proxy(function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},n.prototype.add=function(t,i){var n=this.relative(this._current);i=i===a?this._items.length:this.normalize(i,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:i}),t=this.prepare(t),0===this._items.length||i===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[i-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[i].before(t),this._items.splice(i,0,t),this._mergers.splice(i,0,1*t.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[n]&&this.reset(this._items[n].index()),this.invalidate("items"),this.trigger("added",{content:t,position:i})},n.prototype.remove=function(e){(e=this.normalize(e,!0))!==a&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},n.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy(function(t,i){this.enter("pre-loading"),i=e(i),e(new Image).one("load",e.proxy(function(e){i.attr("src",e.target.src),i.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",i.attr("src")||i.attr("data-src")||i.attr("data-src-retina"))},this))},n.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(i).off(".owl.core"),!1!==this.settings.responsive&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize));for(var a in this._plugins)this._plugins[a].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},n.prototype.op=function(e,t,i){var a=this.settings.rtl;switch(t){case"<":return a?e>i:e<i;case">":return a?e<i:e>i;case">=":return a?e<=i:e>=i;case"<=":return a?e>=i:e<=i}},n.prototype.on=function(e,t,i,a){e.addEventListener?e.addEventListener(t,i,a):e.attachEvent&&e.attachEvent("on"+t,i)},n.prototype.off=function(e,t,i,a){e.removeEventListener?e.removeEventListener(t,i,a):e.detachEvent&&e.detachEvent("on"+t,i)},n.prototype.trigger=function(t,i,a,o,r){var s={item:{count:this._items.length,index:this.current()}},l=e.camelCase(e.grep(["on",t,a],function(e){return e}).join("-").toLowerCase()),c=e.Event([t,"owl",a||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},s,i));return this._supress[t]||(e.each(this._plugins,function(e,t){t.onTrigger&&t.onTrigger(c)}),this.register({type:n.Type.Event,name:t}),this.$element.trigger(c),this.settings&&"function"==typeof this.settings[l]&&this.settings[l].call(this,c)),c},n.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]===a&&(this._states.current[t]=0),this._states.current[t]++},this))},n.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]--},this))},n.prototype.register=function(t){if(t.type===n.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var i=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!i||!i.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:i.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===n.Type.State&&(this._states.tags[t.name]?this._states.tags[t.name]=this._states.tags[t.name].concat(t.tags):this._states.tags[t.name]=t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy(function(i,a){return e.inArray(i,this._states.tags[t.name])===a},this)))},n.prototype.suppress=function(t){e.each(t,e.proxy(function(e,t){this._supress[t]=!0},this))},n.prototype.release=function(t){e.each(t,e.proxy(function(e,t){delete this._supress[t]},this))},n.prototype.pointer=function(e){var i={x:null,y:null};return(e=(e=e.originalEvent||e||t.event).touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i},n.prototype.isNumeric=function(e){return!isNaN(parseFloat(e))},n.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var i=Array.prototype.slice.call(arguments,1);return this.each(function(){var a=e(this),o=a.data("owl.carousel");o||(o=new n(this,"object"==(void 0===t?"undefined":_typeof(t))&&t),a.data("owl.carousel",o),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(t,i){o.register({type:n.Type.Event,name:i}),o.$element.on(i+".owl.carousel.core",e.proxy(function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([i]),o[i].apply(this,[].slice.call(arguments,1)),this.release([i]))},o))})),"string"==typeof t&&"_"!==t.charAt(0)&&o[t].apply(o,i)})},e.fn.owlCarousel.Constructor=n}(window.Zepto||window.jQuery,window,document),
/*!
 * AutoRefresh Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoRefresh:!0,autoRefreshInterval:500},n.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},n.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},n.prototype.destroy=function(){var e,i;t.clearInterval(this._interval);for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Lazy Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":e.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type))for(var i=this._core.settings,a=i.center&&Math.ceil(i.items/2)||i.items,n=i.center&&-1*a||0,o=(t.property&&void 0!==t.property.value?t.property.value:this._core.current())+n,r=this._core.clones().length,s=e.proxy(function(e,t){this.load(t)},this);n++<a;)this.load(r/2+this._core.relative(o)),r&&e.each(this._core.clones(this._core.relative(o)),s),o++},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={lazyLoad:!1},n.prototype.load=function(i){var a=this._core.$stage.children().eq(i),n=a&&a.find(".owl-lazy");!n||e.inArray(a.get(0),this._loaded)>-1||(n.each(e.proxy(function(i,a){var n,o=e(a),r=t.devicePixelRatio>1&&o.attr("data-src-retina")||o.attr("data-src"),s=o.attr("data-srcset");this._core.trigger("load",{element:o,url:r},"lazy"),o.is("img")?o.one("load.owl.lazy",e.proxy(function(){o.css("opacity",1),this._core.trigger("loaded",{element:o,url:r},"lazy")},this)).attr("srcset",s).attr("src",r):((n=new Image).onload=e.proxy(function(){o.css({"background-image":'url("'+r+'")',opacity:"1"}),this._core.trigger("loaded",{element:o,url:r},"lazy")},this),n.src=r)},this)),this._loaded.push(a.get(0)))},n.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=n}(window.Zepto||window.jQuery,window,document),
/*!
 * AutoHeight Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this._core=t,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&"position"==e.property.name&&this.update()},this),"loaded.owl.lazy":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},n.prototype.update=function(){var t,i=this._core._current,a=i+this._core.settings.items,n=this._core.$stage.children().toArray().slice(i,a),o=[];e.each(n,function(t,i){o.push(e(i).height())}),t=Math.max.apply(null,o),this._core.$stage.parent().height(t).addClass(this._core.settings.autoHeightClass)},n.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Video Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find(".owl-video");i.length&&(i.css("display","none"),this.fetch(i,e(t.content)))}},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy(function(e){this.play(e)},this))};n.Defaults={video:!1,videoHeight:!1,videoWidth:!1},n.prototype.fetch=function(e,t){var i=e.attr("data-vimeo-id")?"vimeo":e.attr("data-vzaar-id")?"vzaar":"youtube",a=e.attr("data-vimeo-id")||e.attr("data-youtube-id")||e.attr("data-vzaar-id"),n=e.attr("data-width")||this._core.settings.videoWidth,o=e.attr("data-height")||this._core.settings.videoHeight,r=e.attr("href");if(!r)throw new Error("Missing video URL.");if((a=r.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/))[3].indexOf("youtu")>-1)i="youtube";else if(a[3].indexOf("vimeo")>-1)i="vimeo";else{if(!(a[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");i="vzaar"}a=a[6],this._videos[r]={type:i,id:a,width:n,height:o},t.attr("data-video",r),this.thumbnail(e,this._videos[r])},n.prototype.thumbnail=function(t,i){var a,n,o,r=i.width&&i.height?'style="width:'+i.width+"px;height:"+i.height+'px;"':"",s=t.find("img"),l="src",c="",d=this._core.settings,u=function(e){n='<div class="owl-video-play-icon"></div>',a=d.lazyLoad?'<div class="owl-video-tn '+c+'" '+l+'="'+e+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+e+')"></div>',t.after(a),t.after(n)};if(t.wrap('<div class="owl-video-wrapper"'+r+"></div>"),this._core.settings.lazyLoad&&(l="data-src",c="owl-lazy"),s.length)return u(s.attr(l)),s.remove(),!1;"youtube"===i.type?(o="//img.youtube.com/vi/"+i.id+"/hqdefault.jpg",u(o)):"vimeo"===i.type?e.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){o=e[0].thumbnail_large,u(o)}}):"vzaar"===i.type&&e.ajax({type:"GET",url:"//vzaar.com/api/videos/"+i.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){o=e.framegrab_url,u(o)}})},n.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},n.prototype.play=function(t){var i,a=e(t.target).closest("."+this._core.settings.itemClass),n=this._videos[a.attr("data-video")],o=n.width||"100%",r=n.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),a=this._core.items(this._core.relative(a.index())),this._core.reset(a.index()),"youtube"===n.type?i='<iframe width="'+o+'" height="'+r+'" src="//www.youtube.com/embed/'+n.id+"?autoplay=1&rel=0&v="+n.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===n.type?i='<iframe src="//player.vimeo.com/video/'+n.id+'?autoplay=1" width="'+o+'" height="'+r+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===n.type&&(i='<iframe frameborder="0"height="'+r+'"width="'+o+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+n.id+'/player?autoplay=true"></iframe>'),e('<div class="owl-video-frame">'+i+"</div>").insertAfter(a.find(".owl-video")),this._playing=a.addClass("owl-video-playing"))},n.prototype.isInFullScreen=function(){var t=i.fullscreenElement||i.mozFullScreenElement||i.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},n.prototype.destroy=function(){var e,t;this._core.$element.off("click.owl.video");for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Animate Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this.core=t,this.core.options=e.extend({},n.Defaults,this.core.options),this.swapping=!0,this.previous=void 0,this.next=void 0,this.handlers={"change.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy(function(e){e.namespace&&(this.swapping="translated"==e.type)},this),"translate.owl.carousel":e.proxy(function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};n.Defaults={animateOut:!1,animateIn:!1},n.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,i=e.proxy(this.clear,this),a=this.core.$stage.children().eq(this.previous),n=this.core.$stage.children().eq(this.next),o=this.core.settings.animateIn,r=this.core.settings.animateOut;this.core.current()!==this.previous&&(r&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),a.one(e.support.animation.end,i).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(r)),o&&n.one(e.support.animation.end,i).addClass("animated owl-animated-in").addClass(o))}},n.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},n.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Autoplay Plugin
 * @version 2.1.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this._core=t,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":e.proxy(function(e){e.namespace&&"settings"===e.property.name?this._core.settings.autoplay?this.play():this.stop():e.namespace&&"position"===e.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":e.proxy(function(e,t,i){e.namespace&&this.play(t,i)},this),"stop.owl.autoplay":e.proxy(function(e){e.namespace&&this.stop()},this),"mouseover.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":e.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},n.Defaults,this._core.options)};n.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},n.prototype.play=function(e,t){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},n.prototype._getNextTimeout=function(a,n){return this._timeout&&t.clearTimeout(this._timeout),t.setTimeout(e.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||i.hidden||this._core.next(n||this._core.settings.autoplaySpeed)},this),a||this._core.settings.autoplayTimeout)},n.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},n.prototype.stop=function(){this._core.is("rotating")&&(t.clearTimeout(this._timeout),this._core.leave("rotating"))},n.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},n.prototype.destroy=function(){var e,t;this.stop();for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Navigation Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(t){this._core=t,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())},this),"remove.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&this.draw()},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers)};n.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},n.prototype.initialize=function(){var t,i=this._core.settings;this._controls.$relative=(i.navContainer?e(i.navContainer):e("<div>").addClass(i.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+i.navElement+">").addClass(i.navClass[0]).html(i.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy(function(e){this.prev(i.navSpeed)},this)),this._controls.$next=e("<"+i.navElement+">").addClass(i.navClass[1]).html(i.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy(function(e){this.next(i.navSpeed)},this)),i.dotsData||(this._templates=[e("<div>").addClass(i.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(i.dotsContainer?e(i.dotsContainer):e("<div>").addClass(i.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",e.proxy(function(t){var a=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(a,i.dotsSpeed)},this));for(t in this._overrides)this._core[t]=e.proxy(this[t],this)},n.prototype.destroy=function(){var e,t,i,a;for(e in this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)this._controls[t].remove();for(a in this.overides)this._core[a]=this._overrides[a];for(i in Object.getOwnPropertyNames(this))"function"!=typeof this[i]&&(this[i]=null)},n.prototype.update=function(){var e,t,i=this._core.clones().length/2,a=i+this._core.items().length,n=this._core.maximum(!0),o=this._core.settings,r=o.center||o.autoWidth||o.dotsData?1:o.dotsEach||o.items;if("page"!==o.slideBy&&(o.slideBy=Math.min(o.slideBy,o.items)),o.dots||"page"==o.slideBy)for(this._pages=[],e=i,t=0,0;e<a;e++){if(t>=r||0===t){if(this._pages.push({start:Math.min(n,e-i),end:e-i+r-1}),Math.min(n,e-i)===n)break;t=0,0}t+=this._core.mergers(this._core.relative(e))}},n.prototype.draw=function(){var t,i=this._core.settings,a=this._core.items().length<=i.items,n=this._core.relative(this._core.current()),o=i.loop||i.rewind;this._controls.$relative.toggleClass("disabled",!i.nav||a),i.nav&&(this._controls.$previous.toggleClass("disabled",!o&&n<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!o&&n>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!i.dots||a),i.dots&&(t=this._pages.length-this._controls.$absolute.children().length,i.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):t<0&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},n.prototype.onTrigger=function(t){var i=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:i&&(i.center||i.autoWidth||i.dotsData?1:i.dotsEach||i.items)}},n.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy(function(e,i){return e.start<=t&&e.end>=t},this)).pop()},n.prototype.getPosition=function(t){var i,a,n=this._core.settings;return"page"==n.slideBy?(i=e.inArray(this.current(),this._pages),a=this._pages.length,t?++i:--i,i=this._pages[(i%a+a)%a].start):(i=this._core.relative(this._core.current()),a=this._core.items().length,t?i+=n.slideBy:i-=n.slideBy),i},n.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},n.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},n.prototype.to=function(t,i,a){var n;!a&&this._pages.length?(n=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%n+n)%n].start,i)):e.proxy(this._overrides.to,this._core)(t,i)},e.fn.owlCarousel.Constructor.Plugins.Navigation=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Hash Plugin
 * @version 2.1.0
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=function(i){this._core=i,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy(function(i){i.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var i=e(t.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!i)return;this._hashes[i]=t.content}},this),"changed.owl.carousel":e.proxy(function(i){if(i.namespace&&"position"===i.property.name){var a=this._core.items(this._core.relative(this._core.current())),n=e.map(this._hashes,function(e,t){return e===a?t:null}).join();if(!n||t.location.hash.slice(1)===n)return;t.location.hash=n}},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy(function(e){var i=t.location.hash.substring(1),a=this._core.$stage.children(),n=this._hashes[i]&&a.index(this._hashes[i]);void 0!==n&&n!==this._core.current()&&this._core.to(this._core.relative(n),!1,!0)},this))};n.Defaults={URLhashListener:!1},n.prototype.destroy=function(){var i,a;e(t).off("hashchange.owl.navigation");for(i in this._handlers)this._core.$element.off(i,this._handlers[i]);for(a in Object.getOwnPropertyNames(this))"function"!=typeof this[a]&&(this[a]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=n}(window.Zepto||window.jQuery,window,document),
/*!
 * Support Plugin
 *
 * @version 2.1.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @author David Deutsch
 * @license The MIT License (MIT)
 */
function(e,t,i,a){var n=e("<support>").get(0).style,o="Webkit Moz O ms".split(" "),r={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},s=function(){return!!d("transform")},l=function(){return!!d("perspective")},c=function(){return!!d("animation")};function d(t,i){var r=!1,s=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+o.join(s+" ")+s).split(" "),function(e,t){if(n[t]!==a)return r=!i||t,!1}),r}function u(e){return d(e,!0)}(function(){return!!d("transition")})()&&(e.support.transition=new String(u("transition")),e.support.transition.end=r.transition.end[e.support.transition]),c()&&(e.support.animation=new String(u("animation")),e.support.animation.end=r.animation.end[e.support.animation]),s()&&(e.support.transform=new String(u("transform")),e.support.transform3d=l())}(window.Zepto||window.jQuery,window,document),function(e,t){var i,a={};i={Initialize:function(){t(document).on("click",a.hpaLinkSelector,a.openHandler)}},a={hpaLinkSelector:".hpa-learn-more",openHandler:function(e){var i=t(e.target).data("url");i&&i.length>0&&t("#mdlHpa").find(".hpa-details-page-link-wrapper-js").show().find(".hpa-details-page-link-js").attr("href",i),t("#mdlHpa").lightbox_me({lightboxSpeed:500,overlaySpeed:300,appearEffect:"fadeIn",appearEase:"swing",centered:!0,closeEsc:!0,closeClick:!1}),e.preventDefault()}},e.HomePartners=i}(window.NRT,jQuery),function(e,t,i,a){var n={},o={};n={CalculateMonthlyPayment:function(){var t=o.calculateAssociationFee(o["$"+o.eInputIds.ASSOCIATION],o.inputs[o.eInputIds.ASSOCIATION]),i=o.inputs[o.eInputIds.PRICE]-o.inputs[o.eInputIds.DOWN_AMOUNT],a=o.calculateAmortizedPayment(i,o.inputs[o.eInputIds.RATE]/100/o.frequencies.MONTHLY,o.inputs[o.eInputIds.TERM]*o.frequencies.MONTHLY),n=o.roundDecimals(a+o.inputs[o.eInputIds.INSURANCE]/o.frequencies.MONTHLY+o.inputs[o.eInputIds.TAX]/o.frequencies.MONTHLY+t,2);o.outputs.monthlyPayment=n,o["$monthly-payment"].val(e.Utility.FormatCurrency(n,!1,"$"))},Initialize:function(){o.commaInputs=[o.eInputIds.INSURANCE,o.eInputIds.TAX,o.eInputIds.PRICE,o.eInputIds.DOWN_AMOUNT,o.eInputIds.ASSOCIATION],o.whitelistedKeypresses=Object.keys(o.eWhitelistedKeypresses).map(function(e){return o.eWhitelistedKeypresses[e]}),o.initializeDOMBindings(),o.initializeInputState(),n.CalculateMonthlyPayment()}},o={eInputIds:{INSURANCE:"annual-insurance",TAX:"annual-property-taxes",PRICE:"list-price",TERM:"loan-term",RATE:"loan-rate",DOWN_PERCENT:"down-payment",DOWN_AMOUNT:"down-payment-amount",ASSOCIATION:e.Global.Feature.UseNewCalculatorUI?"assoc-fee":"monthly-assoc-fee"},hoaMap:{"per month":1,"per quarter":3,"semi-annually":6,"per year":12},frequencies:{DAILY:365,MONTHLY:12,SEMI_ANNUALLY:6,QUARTERLY:3,YEARLY:1},commaInputs:[],inputs:{},outputs:{},currentDownAmountDisplayValue:null,eWhitelistedKeypresses:{TAB:9,CTRL:17,ALT:18,DELETE:46,BACKSPACE:8,LEFT_META:91,RIGHT_META:92,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,PERIOD:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57},whitelistedKeypresses:[],parseNumber:function(e,t){var i;return e=e!==a&&null!==e?e.toString().replace(/\$|\,/g,""):"",i=Number(e),isNaN(i)&&(t!==a?(t=Number(t),!1===isNaN(t)&&(i=t)):i=0),i},calculateAmortizedPayment:function(e,t,i){return t>0?e*t/(1-Math.pow(1+t,-i)):e/i},roundDecimals:function(e,t){var i=e*Math.pow(10,t);return Math.round(i)/Math.pow(10,t)},setPriceInput:function(e){var t=arguments.length>1&&arguments[1]!==a?arguments[1]:e.val();e.val(t)},updateInputState:function(t,i){var a=o.commaInputs.findIndex(function(e){return e===t})>-1,n=o.eInputIds.PRICE,r=o.eInputIds.DOWN_AMOUNT,s=o.eInputIds.DOWN_PERCENT,l=e.Global.Feature.UseNewCalculatorUI,c=o.inputs[t]!==i;if(t===s&&(c=i!==o.currentDownAmountDisplayValue),c)if(o.inputs[t]=i,t===s)o.currentDownAmountDisplayValue=i,o.inputs[r]=i/100*o.inputs[n],l&&o.setPriceInput(o["$"+r],o.roundDecimals(o.inputs[r],0));else if(t===r){var d=i/o.inputs[n]*100;o.currentDownAmountDisplayValue=o.roundDecimals(d,2),o.inputs[s]=d,o["$"+s].val(o.roundDecimals(d,2))}else t===n&&(o.inputs[r]=o.inputs[s]/100*i,l&&o.setPriceInput(o["$"+r],o.roundDecimals(o.inputs[r],0)));a&&l&&o.setPriceInput(o["$"+t])},calculateAssociationFee:function(e,t){if(0===e.length)return 0;var i=o.hoaMap[e.data("freq")];return i===a?0:t/i},initializeDOMBindings:function(){var e=Object.keys(o.eInputIds).map(function(e){return o.eInputIds[e]});e.forEach(function(e){return o["$"+e]=t("#"+e)}),o["$monthly-payment"]=t("#monthly-payment"),t("#"+e.filter(function(e){return e!==o.eInputIds.TERM}).join(", #")).on("change blur",function(e){var t=o.parseNumber(e.target.value);t<0&&(e.target.value=0),o.updateInputState(e.target.id,Math.max(0,t)),n.CalculateMonthlyPayment()}).on("keypress",function(e){var t=e.which||e.keyCode;(o.whitelistedKeypresses.every(function(e){return e!==t})||t===o.eWhitelistedKeypresses.PERIOD&&(""+e.target.value).indexOf(".")>-1)&&e.preventDefault()}),t("#"+o.eInputIds.TERM).on("change",function(e){o.updateInputState(e.target.id,o.parseNumber(e.target.value)),n.CalculateMonthlyPayment()})},initializeInputState:function(){var t=e.Global.Feature.UseNewCalculatorUI;Object.keys(o.eInputIds).map(function(e){return o.eInputIds[e]}).forEach(function(e){var i=o.commaInputs.findIndex(function(t){return t===e})>-1;e===o.eInputIds.DOWN_AMOUNT?(o.inputs[e]=o.parseNumber(o["$"+o.eInputIds.DOWN_PERCENT].val()/100)*o.parseNumber(o["$"+o.eInputIds.PRICE].val()),o["$"+e].val(o.roundDecimals(o.inputs[e],0))):(e===o.eInputIds.DOWN_PERCENT&&(o.currentDownAmountDisplayValue=o.parseNumber(o["$"+e].val())),o.inputs[e]=o.parseNumber(o["$"+e].val())),t&&i&&o.setPriceInput(o["$"+e])})}},e.MortgageCalc=n}(window.NRT,jQuery,window),
/*!
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * @Copyright (c) 2007-2013 Mika Tuupola
 *
 * @License: Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * @Version:  1.9.1
 *
 */
function(e,t,i,a){var n=e(t);e.fn.lazyload=function(o){var r,s=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};function c(){var t=0;s.each(function(){var i=e(this);if(!l.skip_invisible||i.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else i.trigger("appear"),t=0})}return o&&(a!==o.failurelimit&&(o.failure_limit=o.failurelimit,delete o.failurelimit),a!==o.effectspeed&&(o.effect_speed=o.effectspeed,delete o.effectspeed),e.extend(l,o)),r=l.container===a||l.container===t?n:e(l.container),0===l.event.indexOf("scroll")&&r.bind(l.event,function(){return c()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.attr("src")!==a&&!1!==i.attr("src")||i.is("img")&&i.attr("src",l.placeholder),i.one("appear",function(){if(!this.loaded){if(l.appear){var a=s.length;l.appear.call(t,a,l)}e("<img />").bind("load",function(){var a=i.attr("data-"+l.data_attribute);i.hide(),i.is("img")?i.attr("src",a):i.css("background-image","url('"+a+"')"),i[l.effect](l.effect_speed),t.loaded=!0;var n=e.grep(s,function(e){return!e.loaded});if(s=e(n),l.load){var o=s.length;l.load.call(t,o,l)}}).attr("src",i.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&i.bind(l.event,function(){t.loaded||i.trigger("appear")})}),n.bind("resize",function(){c()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&n.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&s.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){c()}),this},e.belowthefold=function(i,o){return(o.container===a||o.container===t?(t.innerHeight?t.innerHeight:n.height())+n.scrollTop():e(o.container).offset().top+e(o.container).height())<=e(i).offset().top-o.threshold},e.rightoffold=function(i,o){return(o.container===a||o.container===t?n.width()+n.scrollLeft():e(o.container).offset().left+e(o.container).width())<=e(i).offset().left-o.threshold},e.abovethetop=function(i,o){return(o.container===a||o.container===t?n.scrollTop():e(o.container).offset().top)>=e(i).offset().top+o.threshold+e(i).height()},e.leftofbegin=function(i,o){return(o.container===a||o.container===t?n.scrollLeft():e(o.container).offset().left)>=e(i).offset().left+o.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),function(e,t,i){var a,n={};a={Initialize:function(e){n.lat=e.lat,n.lng=e.lng,n.locationBoundaries=e.locationBoundaries||null,n.fitBoundsPostDraw=e.fitBoundsPostDraw||!1,n.mapSelector=t(e.mapSelector)[0],n.mobileMapSelector=t(e.mobileMapSelector)[0]||null,n.hasMobileMapSelector=e.hasMobileMapSelector||!1,n.pinType=e.pinType||"detail",n.infoWindowTemplate=e.infoWindowTemplate||".detail-infowindow-template",n.clickShow=e.clickShow||[],n.clickHide=e.clickHide||[],n.clickTrigger=e.clickTrigger||null,n.clickTriggerMobile=e.clickTriggerMobile||null,n.infoWindowData=e.infoWindowData||{},n.openInfoWindow=e.openInfoWindow||!1,n.defaultZoom=e.defaultZoom||15,n.doNotDisplayMarker=e.doNotDisplayMarker||!1,n.renewMapOnResize=e.renewMapOnResize&&!1,n.loadMapOnPageLoad=e.loadMapOnPageLoad&&!0,n.isCarousel=e.isCarousel||!1,n.isBoundaries=e.isBoundaries||!1,n.isPOI=e.isPOI||!1,n.poiSelector=e.poiSelector||null,n.poiSelectorMobile=e.poiSelectorMobile||null,n.mapJS=e.mapJS||"",n.mapClient=e.mapClient||"",n.mapVersion=e.mapVersion||"",n.mapChannel=e.mapChannel||"",n.mapLibraries=e.mapLibraries||"",n.registerMapPageLoadEvents()},GetMap:function(){return n.map}},n={mapReady:"DetailMap.MapReady",googleMaps:null,map:null,markers:null,marker:null,mapJS:"",mapClient:"",mapVersion:"",mapChannel:"",mapLibraries:"",pinType:null,infoWindow:null,infoWindowTemplate:null,openInfoWindow:!1,clickShow:[],clickHide:[],clickTrigger:null,clickTriggerMobile:null,infoWindowData:{},latLng:null,lat:null,lng:null,locationBoundaries:null,mapSelector:null,mobileMapSelector:null,hasMobileMapSelector:!1,defaultZoom:15,doNotDisplayMarker:!1,renewMapOnResize:!1,loadMapOnPageLoad:!0,isCarousel:!1,isBoundaries:!1,isPOI:!1,poiSelector:null,poiSelectorMobile:null,isAppReady:!1,isMobile:function(){return(i.innerWidth||t(i).width())<=800},onMapResize:function(){n.isMobile()||n.clickHide&&n.clickHide.length>0&&t(n.clickHide.join(", ")).hide(0),n.renewMapOnResize&&n.setAll()},onInitialLoad:function(){n.isAppReady=!0,ioc("app.events").on(e.SearchMapEvent.INFO_WINDOW_ACTION_CLICK,n.onInfoWindowActionClick,this),ioc("app.events").on(e.SearchMapEvent.MARKER_CLICK,n.onMarkerClick,this),ioc("app.events").on(e.SearchMapEvent.MARKER_MOUSEOVER,n.onMarkerClick,this)},onInitializeComplete:function(){ioc("app.events").trigger(n.mapReady,{})},setAll:function(){loadGoogleMaps(n.mapVersion,n.mapClient,n.mapChannel,n.mapLibraries).done(function(i){e.Utility.LogConsole("NRT.StreeViewMap.registerMapEvents: loadGoogleMaps: done"),n.googleMaps=i,n.isAppReady?(e.Utility.LogConsole("NRT.DetailMap.setAll: App is already loaded"),n.setMap(),n.makeZoomControls(),n.setMarker(),n.setInfoWindow(),n.setBoundaries(),n.setPOI()):t.getScript(n.mapJS).done(function(t,i){e.Utility.LogConsole("NRT.DetailMap.setAll: getScript: done, App has been loaded"),n.onInitialLoad(),n.setMap(),n.makeZoomControls(),n.setMarker(),n.setInfoWindow(),n.setBoundaries(),n.setPOI(),n.onInitializeComplete()}).fail(function(){e.Utility.LogConsole("NRT.DetailMap.setAll: getScript("+n.mapJS+") failed")})})},setMap:function(){var i,a;App.searchMap.map=null,App.searchMap.$map=null,n.latLng=new n.googleMaps.LatLng(n.lat,n.lng),i=t.extend({},e.AppConfig.searchMap.map,{zoom:n.defaultZoom,center:n.latLng}),a=n.hasMobileMapSelector&&n.isMobile()?n.mobileMapSelector:n.mapSelector,n.map=new n.googleMaps.Map(a,i),App.searchMap.map=n.map,App.searchMap.$map=t(a)},registerMapPageLoadEvents:function(){n.renewMapOnResize&&t(i).resize(function(t){e.Utility.Throttle(n.onMapResize(),100)}),n.clickTrigger&&t(n.clickTrigger).on("click",function(e){n.onClick(e),e.preventDefault()}),n.clickTriggerMobile&&t(n.clickTriggerMobile).on("click",function(e){n.onClick(e),e.preventDefault()}),n.loadMapOnPageLoad&&(""===n.mapJS&&n.onInitialLoad(),n.setAll(),""===n.mapJS&&n.onInitializeComplete()),t(i).on(e.Utility.eEvents.LINK_SHOW_COMPLETE,function(t,i){e.Utility.LogConsole("NRT.DetailMap: LINK_SHOW_COMPLETE captured - "+i),i.indexOf("mapview-trigger")>-1&&n.setAll()}),t(i).on(e.Utility.eEvents.TAB_OPEN_COMPLETE,function(t,i){var a=i?i.content:"";e.Utility.LogConsole("NRT.DetailMap: TAB_OPEN_COMPLETE captured - "+a),a&&(a.indexOf("tab2")>-1||n.isMobile()&&a.indexOf("mobile-mapview-trigger")>-1)&&n.setAll()}),t(i).on(e.Utility.eEvents.TOGGLE_OPEN_COMPLETE,function(t,i){e.Utility.LogConsole("NRT.DetailMap: TOGGLE_OPEN_COMPLETE captured - "+i),i&&(i.indexOf("tab2")>-1||n.isMobile()&&i.indexOf("mobile-mapview-trigger")>-1)&&n.setAll()})},onClick:function(a){var o;n.isMobile()||n.clickHide&&n.clickHide.length>0&&t(n.clickHide.join(", ")).hide(0),n.clickShow&&n.clickShow.length>0&&(o=t(a.target).attr("class"),t(n.clickShow.join(", ")).show(0,function(){this!==n.mapSelector||n.isMobile()||(e.Utility.LogConsole("NRT.DetailMap: LINK_SHOW_COMPLETE triggered - "+o),t(i).trigger(e.Utility.eEvents.LINK_SHOW_COMPLETE,o))}))},onEnterMobileSize:function(){},onExitMobileSize:function(){},onEnterTabletDownSize:function(){},onExitTabletDownSize:function(){},setMarker:function(){n.doNotDisplayMarker||(n.marker=new e.DetailMarker({pinState:n.openInfoWindow?"active":"normal",pinType:"detail"},{map:n.map,draggable:!1,position:n.latLng,icon:{scaledSize:new n.googleMaps.Size(28,38),url:e.AppConfig.marker.icons.property.major.active[n.isRetina()?1:0]}}))},setInfoWindow:function(){n.infoWindow=new e.InfoWindow({marker:n.marker,map:n.map,data:n.infoWindowData,template:t(n.infoWindowTemplate).html()}),n.openInfoWindow&&n.infoWindow.Open(),App.infoWindow=n.infoWindow},setBoundaries:function(){var t;if(n.isBoundaries&&n.locationBoundaries&&n.locationBoundaries.primaryLocation&&n.locationBoundaries.primaryLocation.shapeArray){(t=new e.MapBoundaries).Initialize({map:n.map,fitBoundsPostDraw:n.fitBoundsPostDraw});try{t.DrawBoundaries(n.locationBoundaries)}catch(t){e.Utility.LogConsole("NRT.DetailMap.setBoundaries: Error: "+t)}}else e.Utility.LogConsole("NRT.DetailMap.setBoundaries: missing boundary data > locationBoundaries: "+n.locationBoundaries)},setPOI:function(){var i;n.isPOI&&(t(".detail-map-tools").css("visibility","visible"),t(".detail-map-tools .with-dropdown").nrtToggle({duration:0,hide:".detail-map-tools .dropdown",target:"next .dropdown",addClass:"open",classTarget:"self",complete:function(){t(this).find("span").toggleClass(function(){return t(this).isOn?"icon-arrow-down2":"icon-arrow-up2"})}}),t(".whats-nearby a").click(function(){t(".icon-flag").removeClass("open")}),t(".detail-map-tools .icon-flag").click(function(){t(".icon-location").removeClass("open")}),t(".universal-toggle-trigger").each(function(){var e=t(this);e.parents(".detail-map-tools").length&&e.nrtToggle(t.extend({duration:400,target:"next .universal-toggle-body:first",addClass:"open",classTarget:"self"},{accordion:".detail-map-tools .universal-toggle-trigger",closeOnClickAnywhere:!1}))}),i={YelpArray:{},map:n.map,markers:new e.MapMarkers(n)},App.poiManager=new e.PoiManager(i),n.isMobile()&&n.poiSelectorMobile?t(".whats-nearby").detach().appendTo(n.poiSelectorMobile):n.poiSelector&&t(".whats-nearby").detach().appendTo(n.poiSelector),t(".nearby-form").trigger("change"))},onInfoWindowActionClick:function(t){"close"===t.action&&n.marker.closeInfoWindow(),"center_map"===t.action&&(ioc("app.events").blockNext(e.SearchMapEvent.INFO_WINDOW_MOUSELEAVE),n.map.setCenter(n.marker.getPosition()))},onMarkerClick:function(e){n.marker.openInfoWindow(!0)},makeZoomControls:function(){var i,a,o,r,s,l,c=this,d=e.AppConfig.searchMap.zoomImages,u=d.minus[n.isRetina()?1:0],h=d.minusHover[n.isRetina()?1:0],p=d.plus[n.isRetina()?1:0],g=d.plusHover[n.isRetina()?1:0];(new Image).src=h,(new Image).src=g,a=t("<img>").addClass("zoom-plus").attr("src",p).click(function(){n.map.setZoom(Math.min(c.map.getZoom()+1,20))}).hover(function(){t(this).attr("src",g)},function(){t(this).attr("src",p)}),i=t("<img>").addClass("zoom-minus").attr("src",u).click(function(){c.map.setZoom(Math.max(c.map.getZoom()-1,4))}).hover(function(){t(this).attr("src",h)},function(){t(this).attr("src",u)}),o=n.isCarousel?t("<div>").addClass("zoom-controls-carousel").append(a).append(i):t("<div>").addClass("zoom-controls").append(a).append(i),n.map.controls[n.googleMaps.ControlPosition.TOP_RIGHT].push(o[0]),r=t('<a href="#">Map</a>').addClass("roadmap-button roadmap-button-map").click(function(i){i.preventDefault();var a=t.extend({},e.AppConfig.searchMap.map.styles,e.AppConfig.searchMap.roadmapOverrideStyles);c.map.setOptions(a),c.map.setMapTypeId(n.googleMaps.MapTypeId.ROADMAP)}),s=t('<a href="#">Satellite</a>').addClass("roadmap-button roadmap-button-satellite").click(function(i){i.preventDefault();var a=t.extend({},e.AppConfig.searchMap.map.styles,e.AppConfig.searchMap.satelliteOverrideStyles);c.map.setOptions(a),c.map.setMapTypeId(n.googleMaps.MapTypeId.HYBRID)}),l=t("<div>").addClass("roadmap-controls").append(r,s),n.map.controls[n.googleMaps.ControlPosition.RIGHT_TOP].push(l[0])},isRetina:function(){return i.devicePixelRatio>1||i.matchMedia&&i.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches}},e.DetailMap=a}(window.NRT,jQuery,window),function(e,t,i){var a,n={};a={InitializeAdvisorSearch:function(){n.baseInitialize(!0)},InitializeAdvisorResults:function(){n.baseInitialize(!1),t("ul.advisor-results-pager li a").on("click",function(e){var i,a,o=n.getAdvisorResultsUrl(),r=t(this).data("pagenumber"),s=1===r?"":"p_"+r+"/";""!==o&&(i=n.getAdvisorSearchQueryString(t("#AdvisorName").val().trim()),(a=t(t("form#form-advisor-by-name-location-js")[0])).prop("action",o+s+i),a.submit()),e.preventDefault()}),t("select#SortOptionDDL").on("change",function(){var e,i,a=n.getAdvisorResultsUrl();""!==a&&(e=n.getAdvisorSearchQueryString(t("#AdvisorName").val().trim()),(i=t("input#SortOption")).val(t(this).val()),i.parent("form").prop("action",a+e).submit())})}},n={entityName:"",advisorID:0,isSubscriber:!1,isAuthenticated:!1,$action:null,$dialog:null,$radiators:null,baseInitialize:function(e){var i="true"===t("#IsSearchByName").val().toLowerCase();t("#IsSearchByName").val(i),t(".trigger-advisors-search-by-location").on("click",function(t){e?n.switchSearchBy(!1):n.switchResultsSearchBy(!1),t.preventDefault()}),t(".trigger-advisors-search-by-name").on("click",function(t){e?n.switchSearchBy(!0):n.switchResultsSearchBy(!0),t.preventDefault()}),t("form#form-advisor-search .submit-btn, form#form-advisor-by-name-location-js .submit-btn").click(function(e){n.submitSearchPost(this.form,"#LocationName","#AdvisorName",!0,e)})},switchSearchBy:function(e){e?t("form#form-advisor-search").removeClass("form-advisors-by-location").addClass("form-advisors-by-name"):t("form#form-advisor-search").removeClass("form-advisors-by-name").addClass("form-advisors-by-location"),t("div#advisor-search-name").toggle(e),t("div#advisor-search-location").toggle(!e),t("input#IsSearchByName").val(e),t(".trigger-advisors-search-by-name").toggle(!e),t(".trigger-advisors-search-by-location").toggle(e),t("#advisor-results-search-by-location-label").toggle(!e),t("#advisor-results-search-by-name-label").toggle(e),t("form.form-advisor-by-name").validate().resetForm(),t(".error").removeClass("error")},submitSearchPost:function(i,a,o,r,s){var l,c,d,u,h=t(a).val();t(a).val()?(l={term:t(a).val(),type:"advisor",maxResults:5,crossZone:!0},t.ajax({url:e.Utility.AssembleUrl(["autocomplete","getlocations"]),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(l)}).done(function(e){c=!1,e.length>1&&t.each(e,function(e,i){if(i.EntityName.toLowerCase()===h.toLowerCase())return t(a).val(i.EntityName),t("input#LocationID").val(i.EntityID),t("input#LocationZone").val(i.Zone),t("input#SearchUrl").val(i.SearchUrl),c=!0,!1}),c||(1===e.length?(t(a).val(e[0].EntityName),t("input#LocationID").val(e[0].EntityID),t("input#LocationZone").val(e[0].Zone),t("input#SearchUrl").val(e[0].SearchUrl)):(d=!0,u=t("input#LocationID").val(),e.length>0&&t.each(e,function(e,t){if(t.EntityID===u)return d=!1,!1}),d&&(t("input#LocationID").val(""),t("input#LocationZone").val(""),t("input#SearchUrl").val("")))),n.submitValidation(i,a,o,r,s)}).fail(function(t,i,a){e.StatusSlider.ShowErrorSlider();var n="NRT.MortgageAdvisor.submitSearchPost: Ajax Error";throw e.Event.Raise(e.Event.ASYNC_ERROR,n,t,i,a),e.Utility.LogConsole(n+": "+a),new Error(n)})):n.submitValidation(i,a,o,r,s)},validateForm:function(i,a,o){return e.Validate.Initialize(i),o&&n.setupNameValidation(o),n.setupLocationValidation(a),t(i).valid()},submitValidation:function(e,a,o,r,s){var l,c,d="true"===t("#IsSearchByName").val()?o:null;n.validateForm(e,a,d)?(c="",d&&"true"===t("#IsSearchByName").val()&&(c=n.getAdvisorSearchQueryString(t("#AdvisorName").val().trim())),r?""!==(l="true"!==t("#IsSearchByName").val()&&t("#LocationName").val()?n.getAdvisorSearchUrl():n.getAdvisorZoneUrl())&&(i.location.href=l+c):""!==(l=n.getAdvisorResultsUrl())&&(t(e).prop("action",l+c),t(e).submit())):s.preventDefault()},switchResultsSearchBy:function(e){t("div.advisor-search-name").toggle(e),t("div.advisor-search-location").toggle(!e),t(".IsSearchByName").val(e),t(".trigger-advisors-search-by-name").toggle(!e),t(".trigger-advisors-search-by-location").toggle(e),t("#advisor-results-search-by-location-label").toggle(!e),t("#advisor-results-search-by-name-label").toggle(e),t("form.form-advisor-by-name").validate().resetForm(),t(".error").removeClass("error")},getAdvisorResultsUrl:function(){return"true"===t("#IsSearchByName").val()?n.getAdvisorZoneUrl():t("#LocationName").val()?n.getAdvisorSearchUrl():n.getAdvisorZoneUrl()},getAdvisorSearchUrl:function(){var e=t("#SearchUrl").val();return e=e.replace(/\/p_(.*?)\//g,"/")},getAdvisorZoneUrl:function(){return t("#SearchZoneUrl").val()},getAdvisorSearchQueryString:function(e){var t="";return null!==e&&""!==e&&(t="?name="+e),t},setupFormValidation:function(t){e.Validate.Initialize(t)},setupLocationValidation:function(e){t(e).rules("remove"),t(e).rules("add",{advisorSearchLocationCheck:{data:["IsSearchByName","LocationID","LocationZone","SearchUrl"]},messages:{advisorSearchLocationCheck:"Location is invalid"}})},setupNameValidation:function(e){t(e).rules("remove"),t(e).rules("add",{required:function(e){return 0===e.value.trim().length},advisorSearchNameCheck:{data:["IsSearchByName"]},messages:{required:"Name is required",advisorSearchNameCheck:"Name is required"}})}},e.MortgageAdvisor=a}(window.NRT,jQuery,window),function(e,t){var i,a={};i={AddItem:function(e){a.searchHistoryStorage&&a.searchHistoryItems||a.initialize(),a.addItem(e)},DisplayHistory:function(){a.searchHistoryStorage&&a.searchHistoryItems||a.initialize(),a.displayHistory()}},a={searchHistoryKey:"nrt:searchHistory",searchHistoryStorage:null,searchHistoryItems:null,initialize:function(){a.searchHistoryStorage=e.Utility.StorageClientFactory(a.searchHistoryKey),a.searchHistoryItems=a.getSearchHistory()},getSearchHistory:function(){var t=a.searchHistoryStorage.getItem("items");return t=t||[],e.Utility.LogConsole("NRT.SearchHistory.getSearchHistory: returned items from local storage"),t},saveSearchHistory:function(){a.searchHistoryStorage.setItem("items",a.searchHistoryItems),e.Utility.LogConsole("NRT.SearchHistory.saveSearchHistory: items saved to local storage")},addItem:function(t){var i;if(t&&t.searchTerm&&t.searchURL){for(i=a.searchHistoryItems.length-1;i>=0;i-=1)a.searchHistoryItems[i].searchTerm!==t.searchTerm&&a.searchHistoryItems[i].searchURL!==t.searchURL||(e.Utility.LogConsole("NRT.SearchHistory.addItem: remove existing item , searchTerm = "+a.searchHistoryItems[i].searchTerm),a.searchHistoryItems.splice(i,1));a.searchHistoryItems.unshift(t),a.searchHistoryItems.length>=6&&(a.searchHistoryItems.splice(5,5),e.Utility.LogConsole("NRT.SearchHistory.addItem: remove excess items")),a.saveSearchHistory()}},displayHistory:function(){var e=t(".search-history"),i=t(".search-history .dropdown ul");i.empty(),0===a.searchHistoryItems.length?e.hide():(t("#searchtext").removeAttr("style"),t.each(a.searchHistoryItems,function(e,a){t("<li>").append(t("<a>").text(a.searchTerm).attr("href",a.searchURL)).appendTo(i)}),e.show())}},e.SearchHistory=i}(window.NRT,jQuery),function(e,t,i){var a,n={};a={Initialize:function(){var e,i,a,o=t(document).width();o<500&&(e=o-(a=n.isRetina()?60:30),i=.625*(o-a),t(".resize-video-js > iframe").attr("width",e).attr("height",i),t(".media-block.resize-video-js").css("width",e+"px").css("height",i+"px").css("min-height",i+"px"))}},n={isRetina:function(){return i.devicePixelRatio>1||i.matchMedia&&i.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches}},e.NEVideo=a}(window.NRT,jQuery,window),function(e,t,i){var a,n={};a={Initialize:function(){n.openHandler()}},n={openHandler:function(e){t("#mdlZoneSelection").lightbox_me({lightboxSpeed:500,overlaySpeed:300,appearEffect:"fadeIn",appearEase:"swing",centered:!0,closeEsc:!0,closeClick:!1})}},e.ZoneSelection=a}(window.NRT,jQuery,window);
/*!
 * JavaScript - loadGoogleMaps( version, apiKey, language )
 *
 * - Load Google Maps API using jQuery Deferred. 
 *   Useful if you want to only load the Google Maps API on-demand.
 * - Requires jQuery 1.5
 * 
 * @Copyright (c) 2011 Glenn Baker
 * @License: Dual licensed under the MIT and GPL licenses.
 */
var loadGoogleMaps=function(e){var t,i=e.now();return function(a,n,o,r){if(t)return t;var s=e.Deferred(),l=function(){s.resolve(!(!window.google||!google.maps)&&google.maps)},c="loadGoogleMaps_"+i++,d=e.extend(n&&""!==n?{client:n}:{},{language:"EN"},o&&""!=o?{channel:o}:{},r&&""!=r?{libraries:r}:{});return window.google&&google.maps?l():window.google&&google.load?google.load("maps",a||3,{other_params:e.param(d),callback:l}):(d=e.extend(d,{v:a||3,libraries:r,callback:c}),window[c]=function(){l(),setTimeout(function(){try{delete window[c]}catch(e){}},20)},e.ajax({dataType:"script",data:d,url:"https://maps.googleapis.com/maps/api/js"})),t=s.promise()}}(jQuery);